<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 13 Apr 2017
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20170413" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple core component - Development documentation</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple core component</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple modules">
        Pineapple modules</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple core component">
        Pineapple core component</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Development documentation</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 13 Apr 2017</li> 
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-fusion-middleware-installation-plugin/index.html" title="Fusion Middleware Installation">
          <i class="none"></i>
        Fusion Middleware Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic Installation">
          <i class="none"></i>
        WebLogic Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic Deployment">
          <i class="none"></i>
        WebLogic Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic Scripting Tool (WLST)">
          <i class="none"></i>
        WebLogic Scripting Tool (WLST)</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">
          <i class="none"></i>
        WebLogic JMX</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog">
          <i class="none"></i>
        The Pineapple Project Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://pineapple.dev.java.net" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section">
<h2>Development documentation<a name="Development_documentation"></a></h2>
<div class="section">
<h3>Implementation<a name="Implementation"></a></h3>
<p>Implementation of supported use cases in the core component:</p>
<ul>
<li><a href="./initialization.html">Initialize core component.</a></li>
<li><a href="./execute-operation.html">Execute operation.</a></li>
<li><a href="./register-listener.html">Register result listener.</a> </li>
<li><a href="./get-administration.html">Get administration interface.</a> </li></ul>
<p>How to implement a plugin provider:</p>
<ul>
<li><a href="./implement-plugin-provider.html">Implement plugin provider in the core component.</a></li></ul></div>
<div class="section">
<h3>Internal configuration<a name="Internal_configuration"></a></h3>
<div class="section">
<h4>Logging<a name="Logging"></a></h4>
<p>pineapple-core uses log4j for logging. Each pineapple client must provide a Log4j configuration which is accessible at runtime as a result of the build process.</p>
<p>The core component does not provide a Log4j configuration as part of its production build. A log4j configuration file is defined in the project in the directory <tt>src/test/resources/log4.properties</tt> for testing. </p>
<p>The test configuration configures Log4j to write to the log file to <tt>${user.home}/.pineapple/logs/pineapple.log</tt>.</p></div>
<div class="section">
<h4>Spring configuration file(s) <a name="Spring_configuration_files"></a></h4>
<p>The core component contains a configuration file which defines a Spring application context. The Spring application context defines dependency injection of objects as part of initialization of the core component. The file is located in <tt>src/main/resources/com.alpha.pineapple.core-config.xml</tt>.</p>
<div class="section">
<h5>Test beans for integration tests <a name="Test_beans_for_integration_tests"></a></h5>
<p>The spring application context defines a test profile named <tt>integration-test</tt> whose beans are only added to the context when a test class activates the profile through the usage of the profile Id <i>integration-test</i>, e.g. <tt>@ActiveProfiles(&quot;integration-test&quot;)</tt>: </p>
<div class="source">
<pre>        &lt;beans profile=&quot;integration-test&quot; &gt;                             
                &lt;bean id=&quot;ObjectMotherCredentialProvider&quot; class=&quot;com.alpha.testutils.ObjectMotherCredentialProvider&quot; /&gt;
        &lt;/beans&gt;
</pre></div></div></div>
<div class="section">
<h4>Internationalization (I18N) configuration file <a name="Internationalization_I18N_configuration_file"></a></h4>
<p>The core component uses internationalization. Messages used by classes in the project are located in the file <tt>src/main/resources/com.alpha.pineapple.core-messages.properties</tt>. </p></div></div>
<div class="section">
<h3>Implementation<a name="Implementation"></a></h3>
<div class="section">
<h4>Core classes<a name="Core_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple</tt> contains public interface and classes of the core component: </p>
<ul>
<li><tt>PineappleCore</tt> defines the public interface of the core component. It exposes operations for registration of result listeners and for execution of operations. </li>
<li><tt>CoreImpl</tt> is the implementation of the <tt>PineappleCore</tt> interface. The main class in the core component. </li>
<li><tt>CoreException</tt> is an exception class for signaling errors in the core component.</li>
<li><tt>CoreFactory</tt> implements public factory class for creation of pineapple core component instances. </li></ul>
<div class="section">
<h5>CoreFactory<a name="CoreFactory"></a></h5>
<p>The factory class can be created in two ways:</p>
<ul>
<li>Use the <tt>new</tt> operator.</li>
<li>From the core Spring application context. </li></ul>
<p>If the factory is created using the <tt>new</tt> operator its dependencies isn't injected:</p>
<ul>
<li><tt>uninitializedPineappleCore</tt></li>
<li><tt>uninitializedFileBasedCredentialProvider</tt></li>
<li><tt>runtimeDirectoryResolver</tt></li></ul>
<p>The factory will at runtime validate whether the dependencies are resolved, if not the factory will load the core Spring application context and resolve them by if self.</p>
<p>The factory is idempotent in regard to creation to of core and provider instances since they are defined with <tt>default</tt> scope in the Spring context. </p></div></div>
<div class="section">
<h4>Core administration classes<a name="Core_administration_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.admin</tt> contains public interface and classes for runtime administration of the core component: </p>
<ul>
<li><tt>AdministrationProviderImpl</tt> implements the public interface of the core component administration API, e.g. the <tt>Administration</tt> interface. It exposes operations for accessing the internal repository classes of the core component for runtime configuration. The class also implements the <tt>AdministrationProvider</tt> interface which is used to expose the administration API to plugins. </li></ul></div>
<div class="section">
<h4>Credential handling classes<a name="Credential_handling_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.credential</tt> contains classes used to provide credentials to Pineapple resources. The credentials are used to access and authenticate the application with external resources: </p>
<ul>
<li><tt>ConfigurationInfo</tt> interface to represent information about an credential configuration in the credential provider. </li>
<li><tt>ConfigurationInfoImpl</tt> is the default implementation of the <tt>ConfigurationInfo</tt> interface which is used by the <tt>FileBasedCredentialProviderImpl</tt> class.</li>
<li><tt>EnvironmentInfoImpl</tt> is the default implementation of the <tt>EnvironmentInfo</tt> interface which is used by the <tt>FileBasedCredentialProviderImpl</tt> class.</li>
<li><tt>CredentialInfoImpl</tt> is the default implementation of the <tt>CredentialInfo</tt> interface which is used by the <tt>FileBasedCredentialProviderImpl</tt> class.</li>
<li><tt>CredentialInfoFactory</tt> defines interface for creation of credential info objects which implements the <tt>CredentialInfo</tt> interface. </li>
<li><tt>CredentialConfigurationMarshaller</tt> defines interface for loading and saving credentials from file. Furthermore the marshaller defines methods for mapping loaded models objects from the package <tt>com.alpha.pineapple.model.configuration</tt> into info objects, e.g. <tt>ConfigurationInfo</tt>, <tt>EnvironmentInfo</tt> and <tt>CredentialInfo</tt>. </li>
<li><tt>CredentialConfigurationMarshallerImpl</tt> implements the <tt>CredentialConfigurationMarshaller</tt> interface. </li>
<li><tt>FileBasedCredentialProviderImpl</tt> implements the <tt>CredentialProvider</tt> interface which initializes credentials from a XML file. The provider uses JAXB to load and save data from XML to objects from the package <tt>com.alpha.pineapple.model.configuration</tt>. The actual loading and saving is delegated to the configured credential configuration marshaller.</li>
<li><tt>CredentialsFileNotFoundException</tt> is an exception class for signaling failures during loading of credentials in credential provider.</li></ul>
<p>The package <tt>com.alpha.pineapple.credential.encryption</tt> contains classes used to encrypt passwords stored in the <tt>crendetials.xml</tt> file and keep the passwords encrypted when read into memory:</p>
<ul>
<li><tt>PasswordEncryptingCredentialInfoFactoryImpl</tt> implements the <tt>CredentialInfoFactory</tt> interface. the factory implements creation of credential info objects with encrypted passwords. </li>
<li><tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt> implements the <tt>CredentialConfigurationMarshaller</tt> interface. The marshaller supports loading and saving of credentials to file while encrypting all passwords.</li>
<li><tt>FileBasedPasswordPBEConfigImpl</tt> implements the <tt>PBEConfig</tt> interface which defines a configuration object for a Jasypt <tt>StandardPBEStringEncryptor</tt> encryptor. The configuration object supports loading of a password file defined by the JVM system property <i>pineapple.credentialprovider.password.file</i> to set the encryptor master password.</li></ul>
<div class="section">
<h5>Encrypting credential passwords<a name="Encrypting_credential_passwords"></a></h5>
<p>Credential passwords should be encrypted. The goal of the design is to achieve:</p>
<ul>
<li>All credential passwords stored in memory should be encrypted.</li>
<li>Passwords should only exist decrypted in memory when used by the core component to establish a session to a resource.</li>
<li>All credential passwords stored on disk in the <tt>credentials.xml</tt> file should be encrypted.</li></ul>
<p>The design realizes these use cases to support the encryption requirements: </p><img src="../images/encrypting-credential-passwords.jpg" alt="" />
<p>When <b>Initialize credential provider</b> is performed: The credentials are loaded from the <tt>credentials.xml</tt>:</p>
<ul>
<li>A password without the prefix <i>encrypted:</i> is encrypted and stored in memory encrypted with the prefix.</li>
<li>A password with the prefix <i>encrypted:</i> is read into memory. The password is decrypted to validate that value after the prefix is in fact a encrypted value. If the decryption succeeds then decrypted password is thrown away. If the decryption fails then the value after the prefix is interpreted as a unencrypted password, the password is encrypted and stored encrypted in memory with the prefix.</li>
<li>If an unencrypted password was encountered then the credentials is written back to file:
<ul>
<li>To synchronize the in-memory representation and the file content.</li>
<li>To encrypt the unencrypted password immediately.</li></ul></li></ul>
<p>When <b>Create credential</b> is performed: The credential is created with the password is encrypted with the prefix <i>encrypted:</i> and stored in-memory encrypted. The configuration is saved to synchronize the in-memory representation and the file content. Encryption is handled from <tt>FileBasedCredentialProviderImpl</tt> which delegates the creation of <tt>CredentialInfo</tt> to a <tt>CredentialInfoFactory</tt> where the password is encrypted prior to storing it in the credential info. </p>
<p>When <b>Update credential</b> is performed: The credential is deleted and then a new credential is created. The password is encrypted with the prefix <i>encrypted:</i> and stored in-memory encrypted. The configuration is saved to synchronize the in-memory representation and the file content. Encryption is handled from <tt>FileBasedCredentialProviderImpl</tt> which delegates the creation of <tt>CredentialInfo</tt> to a <tt>CredentialInfoFactory</tt> where the password is encrypted prior to storing it in the credential info. </p>
<p>When <b>Delete credential</b> is performed: The credential is deleted. The configuration is saved to synchronize the in-memory representation and the file content.</p>
<p>When <b>Get credential</b> is performed: Decryption is done by delegating the <tt>Credential</tt> creation to the <tt>CredentialConfigurationMarshaller</tt> in this case the <tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt>. The method is only invoked when the core component creates a session to a resource. </p>
<p>The <tt>FileBasedCredentialProviderImpl</tt> delegates the <b>Load credentials</b> and <b>Save credentials</b> to its configured mashaller which is <tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt>. The marshaller handles the encryption cases described above and then delegates the loading, saving and mapping to the <tt>CredentialConfigurationMarshallerImpl</tt>. The result is that all encryption functionality can be isolated to two classes; <tt>PasswordEncryptingCredentialInfoFactoryImpl</tt> and <tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt>.</p></div>
<div class="section">
<h5>PasswordEncryptingCredentialInfoFactoryImpl<a name="PasswordEncryptingCredentialInfoFactoryImpl"></a></h5>
<p>Factory for creation of credential info objects with encrypted passwords. The factory supports creation of objects which implements the <tt>CredentialInfo</tt> interface. The factory creates objects of the type <tt>CredentialInfoImpl</tt>. When a credential info object is created the password is encrypted and prefixed with <i>encrypted:</i> prefix. </p>
<p>The factory is used by the <tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt> class and the <tt>FileBasedCredentialProviderImpl</tt> class to support encryption of passwords in memory and on disk. </p></div>
<div class="section">
<h5>PasswordEncryptingCredentialConfigurationMarshallerImpl<a name="PasswordEncryptingCredentialConfigurationMarshallerImpl"></a></h5>
<p>The marshaller is the central class in the design to support encryption of credential passwords. </p>
<p>The marshaller delegates the main bulk of load, saving and mapping logic to the <tt>CredentialConfigurationMarshallerImpl</tt> class and only intercepts calls when encryption is required.</p></div>
<div class="section">
<h5>Encrypting the Jasypt master password<a name="Encrypting_the_Jasypt_master_password"></a></h5>
<p>The symmetric encryption functionality used by <tt>PasswordEncryptingCredentialInfoFactoryImpl</tt> and <tt>PasswordEncryptingCredentialConfigurationMarshallerImpl</tt> to encrypt credential passwords is implemented through the usage of the Jasypt string encryptor <tt>StandardPBEStringEncryptor</tt>. </p>
<p>The encryptor is configured to receive its configuration from the configuration object <tt>FileBasedPasswordPBEConfigImpl</tt>. The configuration object implements the Jasypt <tt>PBEConfig</tt> interface which defines a configuration object for a <tt>StandardPBEStringEncryptor</tt> encryptor. </p>
<p>The configuration object implements this algorithm to resolve the password:</p>
<ol style="list-style-type: decimal">
<li>The directory for the credential provider password file is resolved from the runtime directory provider:
<ol style="list-style-type: decimal">
<li>If the system property <a href="./system-properties.html"><tt>pineapple.credentialprovider.password.file</tt></a> is set then its value is interpreted as the location of the file.</li>
<li>If the system property isn't defined then the file is resolved to <tt>${pineapple.home.dir}/conf/credentialprovider.password</tt>.</li></ol></li>
<li>If the password file doesn't exists then the file is created with a random generated password which is created using <tt>UUID.randomUUID()</tt>. The password is written to the file using UTF-8 encoding.</li>
<li>The password is read from the file using UTF-8 encoding and returned.</li></ol></div>
<div class="section">
<h5>Configuration of Jasypt in Spring<a name="Configuration_of_Jasypt_in_Spring"></a></h5>
<p>Encryption of credential passwords are implemented through usage of the Jasypt library. </p>
<p>The symmetric password encryptor <tt>StandardPBEStringEncryptor</tt> is used. The encryptor is configured in the spring configuration file with a fixed salt. The salt is required to be fixed to support usage of the encryptor across JVM restarts.</p>
<p>The password for the encryptor is resolved by the <tt>CredentialProviderPasswordEnvironmentPBEConfigImpl</tt> class which loads the password from an external password file (read the class description below for more details). </p></div></div>
<div class="section">
<h4>Module classes<a name="Module_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.module</tt> contains classes for representation and storage of modules:</p>
<ul>
<li><tt>ModuleInfoImpl</tt> is the default implementation of the <tt>ModuleInfo</tt> interface which is used by the <tt>DirectoryBasedModuleRepositoryImpl</tt> class.</li>
<li><tt>DirectoryBasedModuleRepository</tt> extends the <tt>ModuleRepository</tt> interface for directory based module implementations. </li>
<li><tt>DirectoryBasedModuleRepositoryImpl</tt> implements the <tt>&lt;&lt;&lt;DirectoryBasedModuleRepository</tt> interface for directory based module repository implementations.</li>
<li><tt>ModuleRepositoryInitalizationFailedException</tt> defines exception to signal error during module repository initialization.</li></ul>
<div class="section">
<h5>DirectoryBasedModuleRepositoryImpl <a name="DirectoryBasedModuleRepositoryImpl"></a></h5>
<p>The repository administers a set of available modules resolved from the modules directory. The modules directory is resolved from the runtime directory provider. </p>
<p>The class is defined as a bean in the application context for the core component. The instance created by the the context is not initialized. The repository is initialized by invoking the <tt>initialize()</tt> method. This method can be invoked from clients to refresh to content of the repository.</p></div></div>
<div class="section">
<h4>Resource classes<a name="Resource_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.resource</tt> contains classes for storage of information about resources defined in the environment configuration: </p>
<ul>
<li><tt>ConfigurationInfo</tt> interface to represent information about an environment configuration in the resource repository. </li>
<li><tt>ConfigurationInfoImpl</tt> is the default implementation of the <tt>ConfigurationInfo</tt> interface which is used by the <tt>ResourceRepositoryImpl</tt> class.</li>
<li><tt>EnvironmentInfoImpl</tt> is the default implementation of the <tt>EnvironmentInfo</tt> interface which is used by the <tt>ResourceRepositoryImpl</tt> class.</li>
<li><tt>ResourceInfoImpl</tt> is the default implementation of the <tt>ResourceInfo</tt> interface which is used by the <tt>ResourceRepositoryImpl</tt> class.</li>
<li><tt>ResourceConfigurationMarshaller</tt> interface for loading an environment configuration (as XML) from disk into info objects. And versus visa. </li>
<li><tt>ResourceConfigurationMarshallerImpl</tt> is the default implementation of the <tt>ResourceConfigurationMarshallerImpl</tt> interface which is used by the <tt>ResourceRepositoryImpl</tt> class. </li>
<li><tt>ResourcePropertyInfoImpl</tt> is the default implementation of the <tt>ResourcePropertyInfo</tt> interface which is used by the <tt>ResourceRepositoryImpl</tt> class.</li>
<li><tt>ResourceRepositoryImpl</tt> is the default implementation of the <tt>ResourceRepository</tt> interface.</li></ul>
<div class="section">
<h5>ResourceRepositoryImpl<a name="ResourceRepositoryImpl"></a></h5>
<p>The repository administers the set of configured resources in the environment configuration.</p>
<p>The repository support resolution of resources using a wild card environment. The name of the wild card environment is <b>*</b>. The used algorithm of resolution of a resource is, e.g. <tt>get(E,R)</tt>:</p>
<ul>
<li>if repository contains environment <b>E</b> and the resource <b>R</b> is defined in the environment then <b>E.R</b> is returned. </li>
<li>if repository contains environment <b>*</b> and the resource <b>R</b> is defined in the environment then <b>*.R</b> is returned. </li>
<li>if repository doesn't contain environment <b>E</b> then an exception is thrown.</li>
<li>if repository doesn't contain resource <b>E.R</b> then an exception is thrown.</li></ul></div>
<div class="section">
<h5>ResourceConfigurationMarshallerImpl<a name="ResourceConfigurationMarshallerImpl"></a></h5>
<p>The marshaller supports mapping from the unmarshalled configuration classes to the internal representation using the info objects. It also support mapping from the info classes to the configuration class used for marshalling. </p>
<p>Finally it supports the save operation which enables the repository to save the resource configuration on updates to the repository.</p></div></div>
<div class="section">
<h4>Plugin repository classes<a name="Plugin_repository_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.plugin.repository</tt> contains classes for storage of information about registered plugins: </p>
<ul>
<li><tt>PluginInfo</tt> defines interface for info about a configured plugin. Plugin info's are stored in the plugin repository.</li>
<li><tt>PluginInfoImpl</tt> is the default implementation of the <tt>PluginInfo</tt> interface which is used by the <tt>PluginRepositoryImpl</tt> class.</li>
<li><tt>PluginRuntimeRepository</tt> extends the <tt>PluginRepository</tt> interface from the API project. The interface defines runtime methods for the repository which contains information about all registered plugins resources in the environment configuration. </li>
<li><tt>PluginRepositoryImpl</tt> is the default implementation of the <tt>PluginRuntimeRepository</tt> interface.</li>
<li><tt>PluginNameGeneratorImpl</tt> is a Spring Bean id generator which generates names for plugin candidates during plugin candidate scanning.</li>
<li><tt>SessionNameGeneratorImpl</tt> is a Spring Bean id generator which generates names for session classes during plugin candidate scanning.</li>
<li><tt>OperationNameGeneratorImpl</tt> is a Spring Bean id generator which generates names for operation classes during plugin candidate scanning. </li>
<li><tt>PluginCandidateScanner</tt> defines interface for scanner which implements scanning of plugin candidates in a list of packages.</li>
<li><tt>PluginCandidateScannerImpl</tt> is the default implementation of the <tt>PluginCandidateScanner</tt> interface. </li>
<li><tt>PluginInitializer</tt> defines interface for initializer which can initialize a plugin candidate into a ready-to-use plugin.</li>
<li><tt>PluginInitializerImpl</tt> is the default implementation of the <tt>PluginInitializer</tt> interface. </li></ul>
<div class="section">
<h5>Separation of the plugin repository interface into two parts<a name="Separation_of_the_plugin_repository_interface_into_two_parts"></a></h5>
<p>The overall interface for the plugin repository is split into interfaces, <tt>PluginRepository</tt> and <tt>PluginRuntimeRepository</tt>, to be able to include a public interface (e.g. <tt>PluginRepository</tt>) in the Administration API (exposed through the API project) and define a internal interface for the core core component (e.g. <tt>PluginRuntimeRepository</tt>) which contains implementation specific details for resolution and execution of plugins at runtime. </p>
<p>Inclusion of the implementation specific details (e.g. stuff like OXM marshallers) in the public interface would resulted in the inclusion of Spring Framework interfaces (e.g. again the OXM marshallers) in the API project. This would have bloated the dependency graph for the API project and this was deemed unwise and thus the interface was split into two.</p></div>
<div class="section">
<h5>PluginRepositoryImpl<a name="PluginRepositoryImpl"></a></h5>
<p>The class is defined as a bean in the application context for the core component. The instance created by the the context is not initialized. The repository is initialized by invoking the method: <tt>PluginRepository.initialize( String[] pluginIds );</tt>. The method is invoked in the <tt>InitializePluginActivatorCommand</tt>.</p>
<p>The repository will only scan for plugins candidates in the packages which is defined in the collection of plugin id's supplied as arguments to the <tt>initialize(..)</tt>. The actual scanning is delegated to the <tt>PluginCandidateScannerImpl</tt>. </p>
<p>After a list of plugin candidates have been identified and stored in a application context. Then each candidate is processed in turn by the <tt>PluginInitializerImpl</tt> which attempts to initialize the candidate as a plugin.</p>
<p>The repository support resolution of operations using a wild card operation. The name of the wild card operation is <b>*</b>. The used algorithm of resolution of an operation is, e.g. <tt>get(P,O)</tt>:</p>
<ul>
<li>if repository contains plugin <b>P</b> is defined and operation for <b>O</b> is defined then <b>P.O</b> is returned. </li>
<li>if repository contains plugin <b>P</b> is defined and operation for <b>*</b> is defined then <b>P.*</b> is returned. </li>
<li>if repository doesn't contain plugin <b>P</b> then an exception is thrown.</li>
<li>if repository doesn't contain operation <b>P.O</b> then an exception is thrown.</li></ul></div>
<div class="section">
<h5>PluginNameGeneratorImpl<a name="PluginNameGeneratorImpl"></a></h5>
<p>Implements the <tt>BeanNameGenerator</tt> interface. The class is used by the <tt>PluginCandidateScannerImpl</tt> during scanning of the class path for plugin candidates in the <tt>scanForPlugins(..)</tt> method to generate bean names for plugin candidates. </p>
<p>The class generates names of the form: <i>plugin: package-name</i>.</p></div>
<div class="section">
<h5>PluginCandidateScannerImpl<a name="PluginCandidateScannerImpl"></a></h5>
<p>The class is used by the <tt>PluginRepositoryImpl</tt> to scan the class path for plugin candidates. </p>
<p>The scanner will only scan for plugins candidates in the packages which is defined in the collection of plugin id's supplied as arguments to the <tt>scanForPlugins(..)</tt>. The scanning criteria's is defined as:</p>
<ul>
<li>Scan for classes with the <tt>@Plugin</tt> annotation.</li>
<li>Scan the packages is supplied as arguments to the <tt>initialize(..)</tt> method.</li></ul>
<p>The scanner returns the collection of identified plugin candidates stored as beans in a application context. The bean id's are generated by the <tt>PluginNameGeneratorImpl</tt> class. </p></div>
<div class="section">
<h5>PluginInitializerImpl<a name="PluginInitializerImpl"></a></h5>
<p>The class is used by the <tt>PluginRepositoryImpl</tt> to initialize plugin candidates into ready-to-use plugins.</p>
<p>The initializer initializes plugins from the metadata defined on the <tt>@Plugin</tt>..</p>
<p>The initializer initializes the plugin application context with plugin providers which provides access to the Pineapple runtime system. These providers are initialized:</p>
<ul>
<li>The execution info provider with bean id = &quot;coreExecutionInfoProvider&quot;.</li>
<li>The runtime directory provider with bean id = &quot;coreRuntimeDirectoryProvider&quot;. </li>
<li>The administration provider with bean id = &quot;coreAdminitrationProvider&quot;. </li></ul></div></div>
<div class="section">
<h4>Execution classes<a name="Execution_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.execution</tt> contains classes for storage of information about execution of operation on modules: </p>
<ul>
<li><tt>ExecutioninfoImpl</tt> is the default implementation of the <tt>ExecutionInfo</tt> interface.</li>
<li><tt>ResultRepositoryImpl</tt> is default implementation of the <tt>ResultRepository</tt> interface which creates execution result objects which collect information about execution of operations on modules. The repository also has the role of subject in the observer pattern where interested parties can register themselves for notification when operations are executed. </li>
<li><tt>OperationTaskImpl</tt> is default implementation of the <tt>OperationTask</tt> interface which supports the initialization and <b>synchronous</b> execution of an operation by delegation of requests to a collection of command objects. </li>
<li><tt>AsyncOperationTaskImpl</tt> is implementation of the <tt>OperationTask</tt> interface which supports <b>synchronous</b> execution of an operation.</li>
<li><tt>ExecutionInfoProviderImpl</tt> is default implementation of the <tt>ExecutionInfoProvider</tt> and <tt>ExecutionInfoProviderAdministration</tt> interfaces. The class is injected into plugins. The object is used by plugins to gain access to the execution info object for the current operation. </li>
<li><tt>ExecutionInfoNotFoundException</tt> is exception class used to signal errors in attempts to lookup <tt>ExecutionInfo</tt> in <tt>ExecutionInfoProviderImpl</tt> .</li>
<li><tt>ExecutionContextRepository</tt> defines interface for context repository which defines a central storage of operation context during the execution of a operation. Context are stored for access by plugin providers (such as the execution info provider and the variable substitution provider).</li>
<li><tt>ExecutionContextRepositoryImpl</tt> is default implementation if the <tt>ExecutionContextRepository</tt> interface. The class is used by the <tt>OperationTaksImpl</tt> which stores and removes contexts.</li>
<li><tt>ResourceResolver</tt> defines interface for resolution of target resources. </li>
<li><tt>DefaultResourceResolverImpl</tt> is the default implementation of the <tt>ResourceResolver</tt> interface. Supports resolution of resources from lists and regular expressions.</li>
<li><tt>OperationResolver</tt> defines interface for resolution of target operation. </li>
<li><tt>DefaultOperationResolverImpl</tt> is the default implementation of the <tt>OperationResolver</tt> interface. supports resolution of whether a operation should be restricted from execution of a current model. The resolution of is based on the value of the <i>target-operation</i> attribute on models. </li></ul>
<div class="section">
<h5>ExecutionContextRepositoryImpl<a name="ExecutionContextRepositoryImpl"></a></h5>
<p>Repository for storage of execution contexts. The execution context for an operation is stored and removed from the repository during execution by <tt>OperationTaskImpl</tt>. </p>
<p>The algorithm for looking up a execution context in <tt>get(ExecutionResult)</tt> is:</p>
<ul>
<li>Lookup context using the result object as argument.</li>
<li>If the lookup failed, then inspect whether result object is root. If the result object is root return null.</li>
<li>Get parent result object and invoke <tt>get(..)</tt> with the parent result as argument. </li></ul>
<p>The repository is accessed during execution by the plugin providers:</p>
<ul>
<li>Execution info provider</li>
<li>Variable substitution provider</li></ul></div>
<div class="section">
<h5>ResultRepositoryImpl<a name="ResultRepositoryImpl"></a></h5>
<p>When an operation is started by the core component then the repository is used to create a <tt>ExecutionInfo</tt> meta data object which described the executed operation. In addition to the meta data, the execution info object also contains a reference to the root <tt>ExecutionResult</tt> object which contains the state of the execution.</p>
<p>The result repository implements the role of subscriber in the publish-subscriber pattern. Subscribers are all the registered result listeners, which implements the <tt>ResultListener</tt> interface.</p>
<p>When a execution result changes it state all registered listeners are notified of the event. The notification is done by invoking the <tt>ResultListener.notify(ExecutionResultNotification notification)</tt> on each listener with the state changing result as argument. </p>
<p>Besides notifying all registered listeners, repository also captures the events for the executing operations. The event capture is used by the REST controller in the web application to be able to deliver updated results when polled by a client (e.g. a controlling Pineapple instance).</p>
<p>The repository is implemented with a fixed capacity to limit the amount for stored executions in the repository. The repository has capacity for a fixed number of completed executions and any number of running executions. The fixed number of completed executions is defined by the the hard coded constant <tt>CoreConstants.EXECUTION_HISTORY_CAPACITY</tt> which initially is set to 5. </p></div>
<div class="section">
<h5>AsyncOperationTaskImpl<a name="AsyncOperationTaskImpl"></a></h5>
<p>The implementation of the asynchronous execution is implemented by the usage of the Spring annotation <tt>@Async</tt>:</p>
<div class="source">
<pre>    @Async
    @Override
    public void execute(ExecutionInfo info) {
          operationTask.execute(info);
    }

    @Override
    public ExecutionInfo execute(String operation, String environment, String module) {
          String message = messageProvider.getMessage(&quot;aot.unspported_method&quot;);
          throw new UnsupportedOperationException(message);
    }

    @Override
    public ExecutionInfo executeComposite(String operation, String environment, String module, String description, ExecutionResult result) {
          String message = messageProvider.getMessage(&quot;aot.unspported_method&quot;);
          throw new UnsupportedOperationException(message);
    }
</pre></div>
<p>The configuration of the underlying task executor is defined in the Spring application context <tt>com.alpha.pineapple.core-config.xml</tt> by the <tt>operationExecutor</tt> bean.</p>
<p>The class forwards requests to the <tt>OperationTaskImpl</tt> which implements synchronous execution of a operation.</p>
<p>Only the method <tt>execute(ExecutionInfo info)</tt> support asynchronous execution of an operation. The other two methods defined in the interface throws an <tt>UnsupportedOperationException</tt>.</p></div>
<div class="section">
<h5>ExecutionInfoProviderImpl<a name="ExecutionInfoProviderImpl"></a></h5>
<p>The object implements the interface <tt>ExecutionInfoProvider</tt> is used by plugins to look up runtime info.</p>
<p>The algorithm for looking up up runtime info in the <tt>ExecutionInfoProvider.get(ExecutionResult result)</tt> method is:</p>
<ul>
<li>Lookup up the execution context for the operation in the execution context repository. The result is used as argument. The execution context for an operation is registered in the context by the <tt>OperationTaskImpl</tt>. </li>
<li>Lookup the execution info in the context. The result is used as argument. The execution info for an operation was registered in the context by the <tt>InitializeOperationCommand</tt>.</li>
<li>If the lookup fails then a <tt>ExecutionInfoNotFoundException</tt> is thrown.</li></ul>
<p>The class is made available to plugins through usage of the <tt>@Resource</tt> dependency injection with either the bean or field id &quot;coreExecutionInfoProvider&quot;. The class is made available to the core component through definition in the core component application context. </p></div></div>
<div class="section">
<h4>Scheduled execution classes<a name="Scheduled_execution_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.execution.scheduled</tt> contains the classes which defines the scheduled execution of operations: </p>
<ul>
<li><tt>ScheduledOperationConfigurationMarshaller</tt> defines interface for loading and saving configuration scheduled operations.</li>
<li><tt>ScheduledOperationConfigurationMarshallerImpl</tt> is the default implementation of the <tt>ScheduledOperationConfigurationMarshaller</tt> which support saving and loading the set of scheduled operations (as XML). </li>
<li><tt>ScheduledOperationInfoImpl</tt> is the default implementation of the <tt>ScheduledOperationInfo</tt> interface which defines metadata for a scheduled operation within the Pineapple core. The actual scheduling of the operation is implemented by the <tt>ScheduledOperationRespositoryImpl</tt></li>
<li><tt>ScheduledOperationRespositoryImpl</tt> is the default implementation of the <tt>ScheduledOperationRespository</tt> interface which manages and contains information about all scheduled operations.</li>
<li><tt>ScheduledOperationNotFoundException</tt> is a runtime exception thrown by the repository when queried for an non existing operation.</li>
<li><tt>ScheduledOperationAlreadyExistsException</tt> is a runtime exception thrown by the repository when an operation already is registered with the same ID.</li></ul>
<div class="section">
<h5>ScheduledOperationConfigurationMarshallerImpl<a name="ScheduledOperationConfigurationMarshallerImpl"></a></h5>
<p>Saves and load the set of scheduled operations to the configuration named &quot;scheduled-operations.xml&quot; within the Pineapple configuration directory.</p></div>
<div class="section">
<h5>ScheduledOperationRespositoryImpl<a name="ScheduledOperationRespositoryImpl"></a></h5>
<p>The repository implements scheduling of operations using the Spring <tt>ThreadPoolTaskScheduler</tt>.</p>
<p>The repository uses the <tt>ScheduledOperationConfigurationMarshallerImpl</tt> to load and save the set of scheduled operations.</p></div></div>
<div class="section">
<h4>Trigger execution classes<a name="Trigger_execution_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.execution.trigger</tt> contains the classes which defines the synchronous execution of triggers: </p>
<ul>
<li><tt>OperationTriggerResolver</tt> defines interface for resolution of trigger(s) to execute for a model. The trigger candidate list is resolved versus the expected target operation.</li>
<li><tt>ResultTriggerResolver</tt> defines interface for resolution of trigger(s) to execute for a model. The trigger candidate list is resolved versus the expected execution state.</li>
<li><tt>DefaultOperationTriggerResolverImpl</tt> implements the <tt>OperationTriggerResolver</tt> interface.</li>
<li><tt>DefaultResultTriggerResolverImpl</tt> implements the <tt>ResultTriggerResolver</tt> interface.</li></ul>
<div class="section">
<h5>DefaultOperationTriggerResolverImpl<a name="DefaultOperationTriggerResolverImpl"></a></h5>
<p>Resolves whether a trigger should be executed. The resolution is based on the algorithm:</p>
<ul>
<li>If the value of the <tt>on-target-operation</tt> attribute is null.</li>
<li>If the value of the <tt>on-target-operation</tt> attribute is empty.</li>
<li>If the value of the <tt>on-target-operation</tt> attribute is the wild card value &quot;*&quot;.</li>
<li>If the value of the <tt>on-target-operation</tt> attribute is identical to the operation that the model was invoked with.</li>
<li>If the value of the <tt>on-target-operation</tt> attribute is a list value and one of the values in the list is identical to the operation that the model was invoked with.</li></ul></div>
<div class="section">
<h5>DefaultResultTriggerResolverImpl<a name="DefaultResultTriggerResolverImpl"></a></h5>
<p>Resolves whether a trigger should be executed. The resolution is based on the algorithm:</p>
<ul>
<li>If the value of the <tt>on-result</tt> attribute is null.</li>
<li>If the value of the <tt>on-result</tt> attribute is empty.</li>
<li>If the value of the <tt>on-result</tt> attribute is the wild card value &quot;*&quot;.</li>
<li>If the value of the <tt>on-result</tt> attribute is identical to the result that the model execution concluded with.</li>
<li>If the value of the <tt>on-result</tt> attribute is a list value and one of the values in the list is identical to the result that the model execution concluded with.</li></ul></div></div>
<div class="section">
<h4>Directory resolution<a name="Directory_resolution"></a></h4>
<p>The package <tt>com.alpha.pineapple.io.file</tt> contains helper classes for resolution of directories:</p>
<ul>
<li><tt>DefaultRuntimeDirectoryProviderImpl</tt> implements the <tt>RuntimeDirectoryProvider</tt> interface which is used to resolve the default runtime directories where Pineapple will run from. The runtime directory provider is injected into the application context for each initialized plugin to provide runtime info about the configured of the used directories. </li></ul>
<div class="section">
<h5>DefaultRuntimeDirectoryProviderImpl<a name="DefaultRuntimeDirectoryProviderImpl"></a></h5>
<p>Default implementation of the <tt>RuntimeDirectoryProvider</tt> interface which is used to resolve the default resolve runtime directories where Pineapple will run from.</p>
<p>The class is made available to plugins through usage of the <tt>@Resource</tt> dependency injection with either the bean or field id <tt>coreRuntimeDirectoryProvider</tt>. </p>
<div class="section">
<h6>Resolution of the home directory <a name="Resolution_of_the_home_directory"></a></h6>
<p>The home directory is resolved using the algorithm:</p>
<ol style="list-style-type: decimal">
<li>If the system property <a href="./system-properties.html"><tt>pineapple.home.dir</tt></a> is set then the home directory is resolved to this directory.</li>
<li>If the system property isn't defined then Pineapple will resolve to its home directory to either one of these:
<ul>
<li>On Windows: <tt>C:\Document and Settings\${user.name}\.pineapple</tt> </li>
<li>Others: <tt>${user.home}/.pineapple</tt></li></ul></li></ol>
<p>The operating system is determined on the value of the <tt>os.name</tt> system property. </p>
<p><tt>${user.home}</tt> is the value of the <tt>user.home</tt> system property. </p></div>
<div class="section">
<h6>Resolution of the temp directory<a name="Resolution_of_the_temp_directory"></a></h6>
<p>If the operating system is Windows then temp directory is resolved from the system property <tt>java.io.tempdir</tt> where all short names (e.g. DOS 8.3 format) are attempted to be converted into long directory names. If the conversion fails then the original short name based path is returned. </p></div>
<div class="section">
<h6>Resolution of the credential provider master password file<a name="Resolution_of_the_credential_provider_master_password_file"></a></h6>
<p>The location of the password file is resolved using the algorithm:</p>
<ol style="list-style-type: decimal">
<li>If the system property <a href="./system-properties.html"><tt>pineapple.credentialprovider.password.file</tt></a> is set then its value is interpreted as the location of the file.</li>
<li>If the system property isn't defined then the file is resolved to <tt>${pineapple.home.dir}/conf/credentialprovider.password</tt>.</li></ol></div></div></div>
<div class="section">
<h4>Plugin activation classes<a name="Plugin_activation_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.plugin.activation</tt> contains classes for invocation of plugins at runtime:</p>
<ul>
<li><tt>PluginActivator</tt> defines interface for plugin activator which is used at runtime to provide access to external resources through sessions and operations.</li>
<li><tt>PluginActivatorImpl</tt> implements the <tt>PluginActivator</tt> interface.</li></ul>
<div class="section">
<h5>PluginActivatorImpl<a name="PluginActivatorImpl"></a></h5>
<p>The class is defined as a bean in the application context for the core component. The instance created by the the context is not initialized. The activator is initialized by invoking the method: <tt>PluginActivator.initialize( CredentialProvider provider, ResourceRepository resourceRepository, PluginRepository pluginRepository );</tt>.</p>
<p>The method is invoked in the <tt>InitializePluginActivatorCommand</tt>.</p></div></div>
<div class="section">
<h4>Session handling classes<a name="Session_handling_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.plugin.session</tt> contains classes for handling session management during invocation of plugin operations:</p>
<ul>
<li><tt>SessionHandlerFactory</tt> defines a interface for session handler factories.</li>
<li><tt>RetrySessionHandlerFactoryImpl</tt> defines a factory class for creation of <tt>RetrySessionHandlerImpl</tt> instances.</li>
<li><tt>RetrySessionHandlerImpl</tt> implements the <tt>Operation</tt> interface which is used to decorate plugin operations which support session handling and retry logic.</li></ul>
<div class="section">
<h5>RetrySessionHandlerImpl<a name="RetrySessionHandlerImpl"></a></h5>
<div class="section">
<h6>Session handling<a name="Session_handling"></a></h6>
<p>The purpose of the session handler is to connect the plugin session prior to invoking the operation and to disconnect afterwards. The session handler achieves its goal by proxying all plugin operations which supports input marshalling. Proxying a plugin operation with a session handler is done by the <tt>PluginActivator</tt>.</p></div>
<div class="section">
<h6>Retry logic<a name="Retry_logic"></a></h6>
<p>To support retry logic on a session operations, all sessions are proxied using the <tt>SessionRetryProxyFactoryImpl</tt>.</p></div>
<div class="section">
<h6>Tunneling exceptions<a name="Tunneling_exceptions"></a></h6>
<p>When an exception occurs in the session handler then the exception is caught and rethrown immediately in a <tt>RuntimeException</tt>. The purpose of the runtime exception is to channel the exception to the invoking <tt>InvokePluginsCommand</tt>. The <tt>InvokePluginsCommand</tt> will catch the exception and process the embedded exception appropriately by setting an error message and completing the operation result with the <i>Error</i> state.</p>
<p>The <tt>RetrySessionHandlerImpl</tt> supports tunneling of these exceptions:</p>
<ul>
<li><tt>SessionConnectException</tt> thrown when an error occurs during connecting to a plugin session.</li>
<li><tt>SessionDisconnectException</tt> thrown when an error occurs during disconnecting from a plugin session.</li>
<li><tt>SessionException</tt> thrown when an error occurs during usage of a connected session.</li>
<li><tt>PluginExecutionFailedException</tt> thrown when an error occurs during execution of a plugin.</li>
<li><tt>IllegalArgument</tt> thrown when validation of a method argument fails within some plugin code.</li></ul>
<p><b>Implementation note:</b> The <tt>InvokePluginsCommand</tt> exception clause must mirror these exception to be able to handle them.</p></div></div>
<div class="section">
<h5>Enabling usage of the session handler as a Spring bean<a name="Enabling_usage_of_the_session_handler_as_a_Spring_bean"></a></h5>
<p>Plugin operation classes are proxied at runtime by the <tt>RetrySessionHandlerImpl</tt> class. The session handler class implements session handling for an operation and retry logic.</p>
<p>To enable usage of the <tt>RetrySessionHandlerImpl</tt> as a Spring managed bean for a which a new instance (e.g. a Spring <i>prototype</i> bean) is created every time an operation is proxied, several beans are defined. The beans defined to support the usage of <tt>RetrySessionHandlerImpl</tt> are:</p>
<div class="source">
<pre>&lt;bean id=&quot;unintializedRetrySessionHandler&quot; class=&quot;com.alpha.pineapple.plugin.session.SessionRetryHandlerImpl&quot; scope=&quot;prototype&quot;/&gt;
&lt;bean id=&quot;springRetrySessionHandlerFactory&quot; class=&quot;org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean&quot;&gt;
    &lt;property name=&quot;targetBeanName&quot;&gt;
        &lt;idref local=&quot;unintializedRetrySessionHandler&quot;/&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</pre></div>
<p>The <tt>springRetrySessionHandlerFactory</tt> bean is a factory for creation of Spring managed objects. The factory supports creation of instances of the referenced bean <tt>unintializedSessionHandler</tt>. </p>
<p>The <tt>unintializedRetrySessionHandler</tt> bean is defined to define a target object for the factory. The bean is defined as a prototype. It should NOT be used directly as a dependency.</p></div>
<div class="section">
<h5>Usage of the session handler factory<a name="Usage_of_the_session_handler_factory"></a></h5>
<p>The session handler factory <tt>RetrySessionHandlerFactoryImpl</tt> is used by the <tt>PluginActivatorImpl</tt> to create session handler instances. The factory is referenced through is bean name <tt>retrySessionHandlerFactory</tt>.</p></div></div>
<div class="section">
<h4>Session retry classes<a name="Session_retry_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.plugin.session.retry</tt> contains classes session retry support implemented using the Spring Retry project:</p>
<ul>
<li><tt>SessionRetryListener</tt> extends the Spring Retry <tt>RetryListener</tt> interface to support registration of a execution result to capture any retry information.</li>
<li><tt>SessionRetryListenerImpl</tt> implements the <tt>SessionRetryListener</tt> interface.</li>
<li><tt>SessionRetryProxyFactory</tt> defines interface for for factory which supports creation of object proxies which implements session retry logic.</li>
<li><tt>SessionRetryProxyFactoryImpl</tt> implements the <tt>SessionRetryProxyFactory</tt> interface. The factory supports programmatic creation af a session proxy which implements retry logic using the Spring Retry.</li></ul>
<div class="section">
<h5>SessionRetryListenerImpl<a name="SessionRetryListenerImpl"></a></h5>
<p>The listener class logs method retries and add the information to the registered execution result. The listener is able to differentiate between cause of the retry, e.g. whether it is caused by a connect, usage or disconnect error.</p>
<p>The class is defined as a bean named <tt>sessionRetryListener</tt> in the application context for the core component. The bean is registered with the <tt>RetryTemplate</tt> which implements the retry logic. The bean is registered as part of constructing a session proxy done by the <tt>SessionRetryProxyFactoryImpl</tt> class.</p></div>
<div class="section">
<h5>SessionRetryProxyFactoryImpl<a name="SessionRetryProxyFactoryImpl"></a></h5>
<p>Factory for creation of session retry proxy instances. The factory supports creation of JDK dynamic proxies using the Spring <tt>ProxyFactory</tt>. The proxy factory doesn't support creation of proxies for session classes with NO no-arg constructor (e.g. the defined constructors which requires arguments). </p>
<p>The factory creates the session proxy programmatically by:</p>
<ul>
<li>Creates a <tt>SessionRetryListenerImp</tt> instance and registers the execution result for the operation.</li>
<li>Creates a <tt>RetryTemplate</tt> and registers the session retry listener.</li>
<li>Creates a <tt>RretryOperationsInterceptor</tt> and registers the retry template.</li>
<li>instruments the target session with the <tt>retryOperationsInterceptor</tt> bean.</li></ul></div>
<div class="section">
<h5>Spring configuration of retry support<a name="Spring_configuration_of_retry_support"></a></h5>
<p>The core component application context defines retry support with these beans: </p>
<div class="source">
<pre>&lt;bean id=&quot;sessionRetryProxyFactory&quot; class=&quot;com.alpha.pineapple.plugin.session.retry.SessionRetryProxyFactoryImpl&quot; /&gt;    
&lt;bean id=&quot;sessionRetryListener&quot; class=&quot; com.alpha.pineapple.plugin.session.retry.SessionRetryListenerImpl&quot; scope=&quot;prototype&quot; /&gt;
&lt;bean id=&quot;simpleRetryPolicy&quot; class=&quot;org.springframework.retry.policy.SimpleRetryPolicy&quot;&gt;
    &lt;property name=&quot;maxAttempts&quot; value=&quot;4&quot;/&gt;
&lt;/bean&gt;
&lt;bean id=&quot;exponentialBackOffPolicy&quot; class=&quot;org.springframework.retry.backoff.ExponentialBackOffPolicy&quot; &gt;
    &lt;property name=&quot;initialInterval&quot; value=&quot;100&quot;/&gt;
    &lt;property name=&quot;maxInterval&quot; value=&quot;5000&quot;/&gt;
    &lt;property name=&quot;multiplier&quot; value=&quot;2&quot;/&gt;
&lt;/bean&gt;    
&lt;bean id=&quot;retryTemplate&quot; class=&quot;org.springframework.retry.support.RetryTemplate&quot; scope=&quot;prototype&quot;&gt;
        &lt;property name=&quot;retryPolicy&quot; ref=&quot;simpleRetryPolicy&quot; /&gt;
        &lt;property name=&quot;backOffPolicy&quot; ref=&quot;exponentialBackOffPolicy&quot; /&gt;                
&lt;/bean&gt;
&lt;bean id=&quot;retryOperationsInterceptor&quot; class=&quot;org.springframework.retry.interceptor.RetryOperationsInterceptor&quot; scope=&quot;prototype&quot;&gt;
&lt;/bean&gt;
&lt;bean id=&quot;springRetryTemplateFactory&quot; class=&quot;org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean&quot;&gt;
        &lt;property name=&quot;targetBeanName&quot;&gt;
                &lt;idref local=&quot;retryTemplate&quot;/&gt;
        &lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;sessionRetryListenerFactory&quot; class=&quot;org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean&quot;&gt;
        &lt;property name=&quot;targetBeanName&quot;&gt;
                &lt;idref local=&quot;sessionRetryListener&quot;/&gt;
        &lt;/property&gt;
&lt;/bean&gt;
&lt;bean id=&quot;springRetryOperationsInterceptorFactory&quot; class=&quot;org.springframework.beans.factory.config.ObjectFactoryCreatingFactoryBean&quot;&gt;
        &lt;property name=&quot;targetBeanName&quot;&gt;
                &lt;idref local=&quot;retryOperationsInterceptor&quot;/&gt;
        &lt;/property&gt;
&lt;/bean&gt;
</pre></div>
<p>The defined beans are:</p>
<ul>
<li>The <tt>sessionRetryProxyFactory</tt> bean enables usage of the <tt>sessionRetryProxyFactoryImpl</tt> class as a Spring managed bean.</li>
<li>The <tt>sessionRetryListener</tt> bean enables usage of the <tt>SessionRetryListenerImpl</tt> class as a Spring managed bean.</li>
<li>The <tt>simpleRetryPolicy</tt> bean configures the retry policy for the setup. A <tt>SimpleRetryPolicy</tt> is used which will trigger reinvocation of a failed method with a preset number of attempts. The policy is configured with 4 attempts. This will allow the retry support to capture three succesive exception and then a hopefully successful attempt.</li>
<li>The <tt>exponentialBackOffPolicy</tt> bean defines a back off policy which calculates the pauses between attempts.</li>
<li>The <tt>retryTemplate</tt> bean implements the Spring retry engine. It uses the retry policy and back off policy to directs its behavior. </li>
<li>The <tt>retryOperationsInterceptor</tt> bean defines a AOP advice which is used on proxied classes. The advice intercepts all method invocations, including <tt>toString()</tt>.</li>
<li>The <tt>springRetryTemplateFactory</tt> bean enables programmatic creation of the Spring managed bean <tt>retryTemplate</tt>.</li>
<li>The <tt>sessionRetryListenerFactory</tt> bean enables programmatic creation of the Spring managed bean <tt>sessionRetryListener</tt>.</li>
<li>The <tt>springRetryOperationsInterceptorFactory</tt> bean enables programmatic creation of the Spring managed bean <tt>retryOperationsInterceptor</tt>.</li></ul></div></div>
<div class="section">
<h4>Commands classes<a name="Commands_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.command</tt> contains classes which implements the <tt>org.apache.commons.chain.Command</tt> interface. The commands are implementations of the GOF design pattern and the serve many purposes:</p>
<ul>
<li><tt>CommandFacade</tt> defines interface for usage of commands within the core component.</li>
<li><tt>CommandFacadeImpl</tt> is default implementation of the <tt>CommandFacade</tt> interface. Use commands through this class.</li>
<li><tt>CreateDefaultEnvironmentConfigurationCommand</tt> creates default environment configuration files (resurces.xml and credentails.xml) if none exist and unpacks examples modules into the created modules directory. </li>
<li><tt>CopyExampleModulesCommand</tt> unpacks which copies example modules into the modules directory in a generated default configuration. </li>
<li><tt>InitializeOperationCommand</tt> initializes execution of an operation.</li>
<li><tt>InitializePluginActivatorCommand</tt> initializes the plugin activator class. The plugin activator is initialized with resource implementation info and a credential provider.</li>
<li><tt>InvokePluginsCommand</tt> implements execution of a operation on a module. </li>
<li><tt>InvokeTriggersCommand</tt> implements execution of a triggers defined in a module model. </li>
<li><tt>MarshallJAXBObjectsCommand</tt> can marshall objects to a XML file using JAXB. The root object of the object graph from the context is written to file. The command that the file name defines an absolute path.</li>
<li><tt>UnmarshallJAXBObjectsCommand</tt> can unmarshall objects from an XML file using JAXB. The root object of the unmarshalled objects is stored in the context.</li></ul>
<div class="section">
<h5>InvokePluginsCommand<a name="InvokePluginsCommand"></a></h5>
<div class="section">
<h6>Tunneling exceptions<a name="Tunneling_exceptions"></a></h6>
<p>The command supports capture of tunneled exception thrown in a session handler.</p>
<p>The <tt>InvokePluginsCommand</tt> will catch the exception and process the embedded exception appropriately by setting an error message and completing the operation result with the <i>Error</i> state.</p>
<p>The <tt>InvokePluginsCommand</tt> supports capture of these tunneled exceptions:</p>
<ul>
<li><tt>SessionConnectException</tt> thrown when an error occurs during connecting to a plugin session.</li>
<li><tt>SessionDisconnectException</tt> thrown when an error occurs during disconnecting from a plugin session.</li>
<li><tt>SessionException</tt> thrown when an error occurs during usage of a connected session. s * <tt>PluginExecutionFailedException</tt> thrown when an error occurs during execution of a plugin.</li>
<li><tt>IllegalArgument</tt> thrown when validation of a method argument fails within some plugin code.</li></ul></div>
<div class="section">
<h6>Executing triggers <a name="Executing_triggers"></a></h6>
<p>The command delegates execution of triggers to the <tt>InvokeTriggersCommand</tt>.</p></div></div>
<div class="section">
<h5>InvokeTriggersCommand<a name="InvokeTriggersCommand"></a></h5>
<p>The command is used by the <tt>InvokePluginsCommand</tt> to execute trigger after execution of a module model.</p>
<p>The command resolves which triggers to execute from the candidate list using the resolvers <tt>DefaultOperationTriggerResolverImpl</tt> and <tt>DefaultResultTriggerResolverImpl</tt>.</p></div></div>
<div class="section">
<h4>Variable substitution classes<a name="Variable_substitution_classes"></a></h4>
<p>The package <tt>com.alpha.pineapple.substitution</tt> contains classes for variable substitution in files and models: </p>
<ul>
<li><tt>VariableSubstitutionProviderImpl</tt> implements the <tt>VariableSubstitutionProvider</tt> interface and provides functionality for variable substitution of artifacts (e.g. text and files) in plugins. When the provider substitutes the content of an artifact then a substitution result is added to the supplied parent result. If substitution process fails then an exception is thrown but the failures will also be reflected in the validation execution result (and its children). </li>
<li><tt>VariableResolver</tt> defines interface for runtime resolution of variables.</li>
<li><tt>DefaultVariableResolverImpl</tt> implements the <tt>VariableResolver</tt> interface which support variable substitution using the Commons <tt>StrSubstitutor</tt>.</li>
<li><tt>ModelVariableSubstitutor</tt> defines interface for runtime resolution of variables in loaded models. Variable substitution is supported through proxying the model and intercepting all calls which returns strings. </li>
<li><tt>ModelVariableSubstitutorImpl</tt> implements the <tt>ModelVariableSubstitutor</tt> interface.</li></ul>
<p>The package <tt>com.alpha.pineapple.substitution.proxy</tt> contains classes for proxying a unmarshalled model object graph to support variable substitution of models:</p>
<ul>
<li><tt>VariableSubstitutedProxyFactory</tt> defines interface for factory which supports creation of object proxies which supports variable substitution.</li>
<li><tt>VariableSubstitutedProxyFactoryImpl</tt> implements the <tt>VariableSubstitutedProxyFactory</tt> interface.</li>
<li><tt>VariableSubstitutionInterceptor</tt> implements the <tt>MethodInterceptor</tt> interface. This class is a Spring AOP advice which the created proxies are configured to invoke whenever at method is invoked.</li></ul>
<p>The package <tt>com.alpha.pineapple.substitution.variables</tt> contains classes for collecting variables from different sources which constitutes the input to the variable substitution process: </p>
<ul>
<li><tt>Variables</tt> defines interface for set of variables intended for usage in variable substitution.</li>
<li><tt>DefaultVariablesImpl</tt> implements the <tt>Variables</tt> interface.</li>
<li><tt>VariablesBuilder</tt> defines interface for variables builder which can build a variables object used for variable substitution.</li>
<li><tt>NullVariablesBuilderImpl</tt> implements the <tt>VariablesBuilder</tt> interface which returns an empty variables object.</li>
<li><tt>ResourceVariablesBuilder</tt> extends the <tt>VariablesBuilder</tt> interface to support initialization of a model <tt>Resource</tt> as input.</li>
<li><tt>ResourceVariablesBuilderImpl</tt> implements the <tt>ResourceVariablesBuilder</tt> interface which returns a variables object which contains the variables defined in a <tt>Resource</tt> instance. </li>
<li><tt>ModelVariablesBuilder</tt> extends the <tt>VariablesBuilder</tt> interface to support initialization of model as input.</li>
<li><tt>ModelVariablesBuilderImpl</tt> implements the <tt>ModelVariablesBuilder</tt> interface which returns a variables object which contains the variables defined in a <tt>Model</tt> instance. </li>
<li><tt>ModuleDescriptorVariablesBuilder</tt> extends the <tt>VariablesBuilder</tt> interface to support initialization of module descriptor as input.</li>
<li><tt>ModuleDescriptorVariablesBuilderImpl</tt> implements the <tt>ModuleDescriptorVariablesBuilder</tt> interface which returns a variables object which contains the variables defined in a <tt>Module</tt> instance. </li>
<li><tt>CompositeVariablesBuilder</tt> extends the <tt>VariablesBuilder</tt> interface to support initialization of variable builders to setup the composite.</li>
<li><tt>CompositeVariablesBuilderImpl</tt> implements the <tt>CompositeVariablesBuilder</tt> interface builds build variables from any number of variable builders. </li></ul>
<p>Variable builders are registered by name in the order of their precedence, i.e. the variables defined by the first registered builder takes precedence of the variables defined in the secondly registered builder. When building the variables instance, then variables from the first registered builder are added first, then variables from the second registered builder are added afterwards. </p>
<p>If a builder defines a variable which is already defined through the processing of an earlier builder (maybe with the same value or not) then it ignored, e.g. a variable takes presence from the order of which the builders are registered. </p>
<p>Builders are added by name. When the variables instance is built then all variables in a builder will also be registered with the builder name as a prefix. Example: If a builder is registered with the name &quot;model&quot; and it defines two variables v1=a and v2=b. Then the building will result in the registration of four variables: model.v1=a, v1=a, model.v2=b and v2=b. Prefixed variables are processed for all builder builders prior to processing non-prefixed variables. This is ensure prefixed variables takes precedence over non preficed variables.</p>
<div class="section">
<h5>ModelVariableSubstitutorImpl<a name="ModelVariableSubstitutorImpl"></a></h5>
<p>Implements the <tt>ModelVariableSubstitutor</tt> interface and provides the variable substitution capabilities in models.</p>
<p>The main idea behind the variable substitution is to proxy the object graph which represents the marshalled XML model and to intercept all calls to the object graph:</p>
<ul>
<li>Calls which returns a <tt>String</tt> are processed for variables.</li>
<li>Calls which return a non-immutable object, instead returns a proxy.</li>
<li>Calls which return an immutable object are ignored, i.e the immutable eobject is returned.</li>
<li>Calls which return an primitive are ignored, i.e the primitive is returned.</li></ul>
<p>The responsibility of the <tt>ModelVariableSubstitutorImpl</tt> is to:</p>
<ul>
<li>Assemble the variable builders support lookup of variables defined in module descriptors, the model and in the resource properties:
<ul>
<li>Variables defined in the module descriptor are handled by an instance of the <tt>ModuleDescriptorVariablesBuilder</tt> </li>
<li>Variables defined in the model are handled by an instance of the <tt>ModelVariablesBuilder</tt> </li>
<li>Variables defined in the session resource properties are handled by an instance of the <tt>SessionVariablesBuilder</tt></li></ul></li>
<li>Initialize the proxying of the model by initializing the proxy factory <tt>VariableSubstitutedProxyFactory</tt>.</li></ul></div>
<div class="section">
<h5>VariableSubstitutionInterceptor<a name="VariableSubstitutionInterceptor"></a></h5>
<p>This class is a Spring AOP advice. It it used by the proxy factory <tt>VariableSubstitutedProxyFactoryImpl</tt> to intercept all method calls to objects which are proxied by JDK dynamic proxies. </p>
<p>When it intercepts a method it implements the algorithm:</p>
<ul>
<li>If the return type of the invoked method is a <tt>String</tt> then:
<ul>
<li>Invoke the object and get the returned string.</li>
<li>Process the string for variables.</li>
<li>Return the string.</li></ul></li>
<li>Otherwise:
<ul>
<li>Invoke the object and get the returned object. </li>
<li>Decorate the returned result with a new proxy, using the proxy factory to create to proxy, the and return the proxy.</li></ul></li></ul></div>
<div class="section">
<h5>CglibVariableSubstitutionInterceptorImpl<a name="CglibVariableSubstitutionInterceptorImpl"></a></h5>
<p>This class is a Spring CGLIB AOP advice. It it used by the proxy factory <tt>VariableSubstitutedProxyFactoryImpl</tt> to intercept all method calls to objects which are proxied by JDK dynamic proxies. </p>
<p>It implements the same algorithm as <tt>VariableSubstitutionInterceptor</tt> for variable processing. </p></div>
<div class="section">
<h5>VariableSubstitutedProxyFactoryImpl<a name="VariableSubstitutedProxyFactoryImpl"></a></h5>
<p>Factory for creation of proxy instances depending on the implementation of the target class which should be proxied. </p>
<p>The factory implements the algorithm:</p>
<ul>
<li>If the target object is null then return null.</li>
<li>If the target object is a string then process the string for variables and return the processed string.</li>
<li>If the target object is immutable then return the target object unchanged.</li>
<li>If the target object is a primitive then return the target object unchanged.</li>
<li>If the target object is a private class then create a JDK dynamic proxy using the Spring <tt>ProxyFactory</tt>.</li>
<li>Otherwise create a dynamic proxy using CGLIB. The actual creation of the proxy is done using <i>Objenesis</i> library to handle the case where the class doesn't have a no-arg constructor (e.g. the defined constructors which requires arguments). <i>Objenesis</i> is used since it supports object creation while the bypassing constructor(s). </li></ul></div></div>
<div class="section">
<h4>Helper classes<a name="Helper_classes"></a></h4>
<p>The package <tt>com.alpha.javautils</tt> contains generic helper classes:</p>
<ul>
<li><tt>ReflectionHelper</tt></li>
<li><tt>FileUtils</tt></li>
<li><tt>ConversionFailedException</tt> defines exception class for signaling errors during conversion of values.</li></ul>
<div class="section">
<h5>ReflectionHelper <a name="ReflectionHelper"></a></h5>
<p>Provides helper functions for reflection based operations:</p>
<ul>
<li><tt>createObject(..)</tt> which can instantiate objects using reflection, which take a single String as argument in the constructor.</li></ul></div>
<div class="section">
<h5>FileUtils<a name="FileUtils"></a></h5>
<p>Provides helper functions for file operations such as:</p>
<ul>
<li>Conversion of Windows directory names from the short DOS 8.3 format into long file names. </li></ul></div></div></div>
<div class="section">
<h3>Unit test of the project<a name="Unit_test_of_the_project"></a></h3>
<p>Commonly used constants in the unit tests are defined in the class <tt>com.alpha.testutils.CoreTestConstants</tt>.</p>
<div class="section">
<h4>Helper classes<a name="Helper_classes"></a></h4>
<p>Helper classes:</p>
<ul>
<li><tt>com.alpha.testutils.ObjectMotherResourceRepository</tt> </li>
<li><tt>com.alpha.testutils.ObjectMotherCredentialProvider</tt> </li></ul>
<div class="section">
<h5>ObjectMotherResourceRepository<a name="ObjectMotherResourceRepository"></a></h5>
<p>Implementation of the ObjectMother pattern, provides helper functions for using resources repository in unit tests.</p></div>
<div class="section">
<h5>ObjectMotherCredentialProvider <a name="ObjectMotherCredentialProvider"></a></h5>
<p>Implementation of the ObjectMother pattern, provides helper functions using credentials providers in unit tests.</p></div></div>
<div class="section">
<h4>Test files <a name="Test_files"></a></h4>
<p>The file <tt>src/test/resources/resources.xml</tt> contains and environment configuration file which defines a resource using the <tt>TestResource</tt>:</p>
<div class="source">
<pre>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;resources&gt;
        &lt;test-resource&gt;
          &lt;identifier&gt;test-resource-resourceidentifier&lt;/identifier&gt;
          &lt;credential-identifier&gt;test-resource-credentialidentifier&lt;/credential-identifier&gt;
                  &lt;plugin&gt;com.alpha.pineapple.resource.test.TestFactoryImpl&lt;/plugin&gt;
        &lt;/test-resource&gt;
      &lt;/resources&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt;

</pre></div>
<div class="section">
<h5>test-archive-on-classpath.jar<a name="test-archive-on-classpath.jar"></a></h5>
<p>A JAR file containing a single example module. Used to test the <tt>CreateDefaultEnvironmentConfigurationCommand</tt> and <tt>UnpackArchiveCommand</tt> classes. </p></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2017.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

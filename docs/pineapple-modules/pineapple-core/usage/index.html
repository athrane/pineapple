<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 14 Apr 2017
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20170414" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple core component - Usage of the core component</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple core component</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple modules">
        Pineapple modules</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple core component">
        Pineapple core component</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Usage of the core component</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 14 Apr 2017</li> 
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-fusion-middleware-installation-plugin/index.html" title="Fusion Middleware Installation">
          <i class="none"></i>
        Fusion Middleware Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic Installation">
          <i class="none"></i>
        WebLogic Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic Scripting Tool (WLST)">
          <i class="none"></i>
        WebLogic Scripting Tool (WLST)</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">
          <i class="none"></i>
        WebLogic JMX</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog">
          <i class="none"></i>
        The Pineapple Project Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://pineapple.dev.java.net" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section">
<h2>Usage of the core component<a name="Usage_of_the_core_component"></a></h2>
<div class="section">
<h3>Introduction<a name="Introduction"></a></h3>
<div class="section">
<h4>Role of the core component<a name="Role_of_the_core_component"></a></h4>
<p>The core component is the entry point into Pineapple. The core component is invoked by Pineapple clients such as Maven plugins, command line interface or web applications. The core component is used by creating an instance and then invoking operations which triggers the execution of zero or more plugins. </p>
<p>The core component implements these public methods:</p>
<ul>
<li>A method which starts the asynchronous execution of operations.</li>
<li>Methods for registration of result listeners.</li>
<li>A method for retrieving the set of registered result listeners.</li>
<li>A method removal of a registered result listener.</li>
<li>A method for accessing the administration API.</li></ul></div>
<div class="section">
<h4>Getting access to the core component<a name="Getting_access_to_the_core_component"></a></h4>
<p>The get access to the core component, add a Maven dependency in the client project which need access to the core component. The dependency is versioned, so select the appropriate version:</p>
<div class="source">
<pre>  &lt;dependency&gt;
    &lt;groupId&gt;com.alpha.pineapple&lt;/groupId&gt;
    &lt;artifactId&gt;pineapple-core&lt;/artifactId&gt;  
    &lt;version&gt;1.0&lt;/version&gt;      
  &lt;/dependency&gt;
</pre></div></div></div>
<div class="section">
<h3>Creating the core component with default settings<a name="Creating_the_core_component_with_default_settings"></a></h3>
<p>An instance of the core component is created using the factory <tt>com.alpha.pineapple.CoreFactory</tt> which provides methods for creating instances. The easiest way to create an instance is to invoke the method <tt>createCore()</tt> with no parameters. The method creates an instance with default settings:</p>
<ul>
<li>resources are loaded from <tt>${user.home}/.pineapple/conf/resources.xml</tt>. </li>
<li>credentials are loaded from <tt>${user.home}/.pineapple/conf/credentials.xml</tt>.</li></ul>
<p>Both the <tt>resources.xml</tt> and the <tt>credentials.xml</tt> file must adhere to the <a href="../../../usage/configuration-environment.html">environment configuration schema.</a> </p>
<p><a href="../examples/create-core-default-settings.html">Look here for an example of how to create the core component with default settings.</a></p></div>
<div class="section">
<h3>Creating the core component with a custom credential provider <a name="Creating_the_core_component_with_a_custom_credential_provider"></a></h3>
<div class="section">
<h4>Purpose of a credential provider <a name="Purpose_of_a_credential_provider"></a></h4>
<p>The purpose of a credential provider is to deliver security credentials to the core component on request. The provided credentials are used to access resources defined in the environment configuration.</p></div>
<div class="section">
<h4>Implementation of credential providers<a name="Implementation_of_credential_providers"></a></h4>
<p>A credential provider implements the <tt>com.alpha.pineapple.credential.CredentialProvider</tt> interface which is defined in the pineapple-api project.</p>
<p>The <tt>get(..)</tt> method is invoked by the core component when it requests a <tt>Credential</tt> object for a resource in a specific environment. The <tt>com.alpha.pineapple.model.configuration.Credential</tt> object is defined in the pineapple-api project.</p>
<p>The package <tt>com.alpha.pineapple.credential</tt> in the pineapple-core project contains implementations which can be used by clients:</p>
<ul>
<li><tt>FileBasedCredentialProviderImpl</tt> which can load credentials from an XML file which adheres to the environment configuration schema. It is <b>recommended</b> to use this implementation as it provides schema support. </li></ul>
<p>Otherwise the client is free to provide its own implementation.</p></div>
<div class="section">
<h4>Invoking the factory<a name="Invoking_the_factory"></a></h4>
<p>To create the core component with a custom credential provider invoke the method <tt>createCore(CredentialProvider provider)</tt> on the <tt>CoreFactory</tt>. The settings are:</p>
<ul>
<li>resources are loaded from the default location at <tt>${user.home}/.pineapple/conf/resources.xml</tt>. </li>
<li>credentials are requested from the custom provider (and possibly loaded from an alternate location if a file based provider is used).</li></ul>
<p>The <tt>resources.xml</tt> file must adhere to the <a href="../../../usage/configuration-environment.html">environment configuration schema.</a></p>
<p><a href="../examples/create-core-custom-provider.html">Look here for an example of how to create the core component with a custom provider.</a></p></div></div>
<div class="section">
<h3>Creating the core component which loads resources from an alternate location<a name="Creating_the_core_component_which_loads_resources_from_an_alternate_location"></a></h3>
<p>To create the core component with a custom credential provider and a alternative location for the resources file invoke the method <tt>createCore(CredentialProvider provider, File resources )</tt> on the <tt>CoreFactory</tt>. The settings are:</p>
<ul>
<li>resources are loaded from an alternate location which are specified by the <tt>File</tt> object in the second argumen to the factory method. </li>
<li>credentials are requested from the custom provider (and possibly loaded from an alternate location if a file based provider is used). </li></ul>
<p>The resources file must adhere to the <a href="../../../usage/configuration-environment.html">environment configuration schema.</a></p>
<p><a href="../examples/create-core-alternate-resource-location.html">Look here for an example of how to create the core component which loads resources from an alternate location.</a></p></div>
<div class="section">
<h3>Executing operations <a name="Executing_operations"></a></h3>
<p>The core component implements the interface <tt>com.alpha.pineapple.PineappleCore</tt> which defines a single method for execution of operations:</p>
<div class="source">
<pre>        
  public interface PineappleCore
  {
    ExecutionInfo executeOperation( String operation, String environment, String module );  
    
    // remaining methods here    
  }    
                
</pre></div>
<p>To execute an operation, invoke the method <tt>execute(..)</tt> with the arguments:</p>
<ul>
<li>operation</li>
<li>environment </li>
<li>module </li></ul>
<div class="section">
<h4>Execution is asynchronous <a name="Execution_is_asynchronous"></a></h4>
<p>The <tt>execute(..)</tt> method is asynchronous and will return a initialized <tt>ExecutionInfo</tt> object which contains a <tt>ExecutonResult</tt> object which reflects the state of the executing operation. </p></div></div>
<div class="section">
<h3>Register result listeners<a name="Register_result_listeners"></a></h3>
<div class="section">
<h4>Observing the outcome of execution of operations<a name="Observing_the_outcome_of_execution_of_operations"></a></h4>
<p>The core component implements the <i>observer</i> pattern to provide a facility for clients to be notified in real time of how the execution of an operation proceeds. </p>
<p>The core component has the role of <i>subject</i> in the observer pattern. To support the role, it provides the <tt>addListener( ResultListener listener )</tt> method which should be used by observers to register themselves. The core component contain logic which notifies all registered observers during execution of an operation.</p>
<p>Clients should implement objects with the role of <i>observer</i> and register them with the core component to be notified of how the execution an operation proceeds. The client should use the feedback to provide appropriate feedback to the user. An example is the <tt>pineapple-application-war</tt> project which registers one observer:</p>
<ul>
<li><tt>com.alpha.pineapple.report.basichtml.BasicHtmlReportGeneratorImpl</tt> which listens for notifications and produces a HTML report when the execution of an operation is complete. The <tt>BasicHtmlReportGeneratorImpl</tt> is the main class in the <tt>pineapple-basic-html-report-generator</tt> project.</li></ul>
<p>An observer must implement the <tt>com.alpha.pineapple.execution.ResultListener</tt> interface:</p>
<div class="source">
<pre>
public interface ResultListener {

  void notify(ExecutionResultNotification notification);
}

</pre></div>
<p><a href="../examples/register-listener.html">Look here for an example of implement and register a result listener with the core component.</a> </p></div>
<div class="section">
<h4>Using execution results to track the execution of an operation <a name="Using_execution_results_to_track_the_execution_of_an_operation"></a></h4>
<p>When Pineapple start execution of an operation then it internally builds a hierarchy of execution result objects which documents the execution of the operation. Execution result object implements the <tt>ExecutionResult</tt> interface. As the execution proceeds new execution results object are created and added to the hierarchy. When an execution path is completed the tracking execution result object has it state updated and it execution time stored. </p>
<div class="section">
<h5>Supported states for execution result objects <a name="Supported_states_for_execution_result_objects"></a></h5>
<p>The execution result object support these life cycle states:</p>
<ul>
<li><i>executing</i> - the initial state when the execution result is created.</li>
<li><i>success</i> - the execution completed as expected. </li>
<li><i>failure</i> - the execution completed with an expected failure. This state is used is tests to report an failed assertion. </li>
<li><i>error</i> - the execution completed with an unexpected error. This state is used is report an runtime error.</li>
<li><i>computed</i> - the execution result is requested to compute is state based on the results of its children. Computation will result in one of the states: <i>success</i>, <i>failure</i>, <i>error</i> based on these prioritized rules:
<ul>
<li>If any of the children has state <i>error</i> then the state is computed as <i>error</i>. </li>
<li>If any of the children has state <i>failed</i> then the state is computed as <i>failed</i>. </li>
<li>The state is computed as <i>success</i>.</li></ul></li></ul></div>
<div class="section">
<h5>Execution result objects are mutable<a name="Execution_result_objects_are_mutable"></a></h5>
<p>The state of an execution result object is mutable during execution of an operation. The state of an execution object changes as a result of the execution, a least it will change state from <i>executing</i> to either <i>success</i>, <i>failure</i> or <i>error</i>. </p></div>
<div class="section">
<h5>State is propagated up in the hierarchy<a name="State_is_propagated_up_in_the_hierarchy"></a></h5>
<p>The state of execution results in the hierarchy are propagated up, in such a way that the state of an execution always reflects the aggregated state of it children. </p></div></div>
<div class="section">
<h4>Notification of observers<a name="Notification_of_observers"></a></h4>
<p>Each time an execution result object changes it state, all registered observers are notified of the change.The notification is implemented by invoking <tt>notify(ExecutionResultNotification notification)</tt> on the each registered observer.</p>
<p>The argument is a notification object which contains:</p>
<ul>
<li>Execution result object which have changed state. </li>
<li>The new recorded state of the execution result object.</li></ul>
<p>To capture the state when listeners are notified the state is recorded separately in the notification. Since the state of an execution result is mutable, the recorded state in the notification might not match the state of the execution result since its state can have changed since the creation of the notification and the notification of the observers.</p>
<p>An observer can query the the execution result about its new state and additional info. </p>
<p><a href="../../../pineapple-reporting-projects/pineapple-basic-html-report-generator/examples/invoke-generator.html">Look here for an example of how to register and invoke the report generator to create a report.</a> </p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2017.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 02 Oct 2016
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20161002" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple Docker plugin - Usage</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple Docker plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple plugin projects">
        Pineapple plugin projects</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple Docker plugin">
        Pineapple Docker plugin</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Usage</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 02 Oct 2016</li> 
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-jrockit-installation-plugin/index.html" title="JRockit Installation">
          <i class="none"></i>
        JRockit Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-fusion-middleware-installation-plugin/index.html" title="Fusion Middleware Installation">
          <i class="none"></i>
        Fusion Middleware Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic Installation">
          <i class="none"></i>
        WebLogic Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic Deployment">
          <i class="none"></i>
        WebLogic Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic Scripting Tool (WLST)">
          <i class="none"></i>
        WebLogic Scripting Tool (WLST)</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">
          <i class="none"></i>
        WebLogic JMX</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog">
          <i class="none"></i>
        The Pineapple Project Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://pineapple.java.net" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section">
<h2>Introduction<a name="Introduction"></a></h2>
<div class="section">
<h3>Overview<a name="Overview"></a></h3>
<div class="section">
<h4>Invoking the plugin<a name="Invoking_the_plugin"></a></h4>
<p>The plugin is invoked by the component when the core component is used by one of the Pineapple clients. To trigger invocation by the core component the plugin needs to be configured. </p></div>
<div class="section">
<h4>Configuration<a name="Configuration"></a></h4><img src="../images/configure-plugin.jpg" alt="" />
<p>Two steps are needed to configure the plugin:</p>
<ol style="list-style-type: decimal">
<li><a href="#Define_resource">Define resource:</a> Define resource which enables usage of the the plugin. The resource enables usage by:
<ul>
<li>Definition of connectivity information used by the Docker plugin to connect to the remote Docker daemon modeled by the resource.</li>
<li>Definition of a mapping between the resource ID (e.g. some user defined key referenced from models) and the plugin ID (e.g. the Java package name which implements the plugin: <tt>com.alpha.pineapple.plugin.docker</tt>.</li></ul></li>
<li><a href="#Define_the_module_model">Define the module model</a> and add content to the model by defining a set of directives which are executed at the targeted resource(s). The directives are executed in sequence when the plugin is invoked with the model. The model is defined using the <a href="#The_docker_plugin_schema">The Docker plugin schema</a>.</li></ol>
<p>For more info about configuration of plugins:</p>
<ul>
<li>For info about <b>resources</b> and <b>credentials</b> read the <a href="../../../usage/configuration-environment.html">Environment configuration</a> document.</li>
<li>For info about <b>modules</b> and <b>module models</b> read the <a href="../../../usage/configuration-modules.html">Modules configuration</a> document.</li></ul></div>
<div class="section">
<h4>Supported operations by the plugin <a name="Supported_operations_by_the_plugin"></a></h4>
<p>The plugin supports the operations:</p>
<ul>
<li><b>test</b></li>
<li><b>create-report</b> </li>
<li><b>deploy-configuration</b> </li>
<li><b>undeploy-configuration</b> </li></ul>
<p>For more information about the default operations, refer to the <a href="../../../usage/operations.html">Operation and workflow reference.</a></p></div>
<div class="section">
<h4>Execution of the test operation<a name="Execution_of_the_test_operation"></a></h4>
<p>When invoked with this operation the plugin will traverse the module model and validate that the Docker entities (e.g. images and containers) defined in the model exists at the targeted Docker host:</p>
<ul>
<li><b>Container</b>: For each named container element defined in the model, the corresponding container is tested in the Docker host. If no container exist with designated name then the test case for the container fails. The <i>actual</i> runtime state of the container is validated against the <i>expected</i> runtime state defined in the model.</li></ul></div>
<div class="section">
<h4>Execution of the create-report operation<a name="Execution_of_the_create-report_operation"></a></h4>
<p>When invoked with this operation the plugin will ignore the module model, but create a report that lists all defined images and containers at the targeted Docker host.</p></div>
<div class="section">
<h4>Execution of the deploy-configuration operation<a name="Execution_of_the_deploy-configuration_operation"></a></h4>
<p>When invoked with this operation the plugin will traverse the module model and create all the Docker entities (e.g. images and containers) defined in the model:</p>
<ul>
<li><b>Container</b>: A named container is created from every container element defined in the model. If the container exists then the container creation is skipped and marked as successful - because the goal of ensuring existence of the named container is achieved. Since Docker doesn't support update of existing containers, then any existing container isn't updated to match the container configuration defined in the model.</li>
<li><b>Image</b>: An image is pulled for every image element defined in the model. If the image exists in the Docker host then the image creation is skipped and marked as successful - because the goal of ensuring availability of the image in the Docker host is achieved. The consequence is that the image isn't updated even if a newer version exists in the used repository.</li>
<li><b>Tagged image</b>: A tagged image is created for every tagged image element defined in the model. If the tagged image exists in the Docker host then the image tagging is skipped and marked as successful - because the goal of ensuring availability of the image in the Docker host is achieved. The consequence is that the image isn't updated even if a newer version of the source image exists in the used repository.</li>
<li><b>Image from Dockerfile</b>: An image is created for every image-from-Dockerfile element defined in the model. If the image exists in the Docker host then the image creation is skipped and marked as successful - because the goal of ensuring availability of the image in the Docker host is achieved. The consequence is that the image isn't updated even if the Dockerfile is updated or a newer version exists of the source image used by the Dockerfile.</li></ul>
<p>The result of this operation should be that the subsequent execution of the <b>test</b> operation should result in a 100% success (Otherwise you have found a bug in the plugin). </p></div>
<div class="section">
<h4>Execution of the undeploy-configuration operation<a name="Execution_of_the_undeploy-configuration_operation"></a></h4>
<p>When invoked with this operation the plugin will traverse the module model and delete all the Docker entities (e.g. images and containers) defined in the model at the target Docker host: </p>
<ul>
<li><b>Container</b>: For each named container element defined in the model, the corresponding container is deleted in the Docker host. If no container exist with designated name then the deletion is skipped and marked as successful - because the goal of ensuring that the named container doens't exist is achieved. If the targeted container is running then it stopped prior to deletion. If the targeted container is paused, then it is unpaused (i.e. started) and then stopped prior to deletion. </li>
<li><b>Image</b>: For each image element defined in the model, the corresponding image is deleted in the Docker host. If no image exist with designated name then the deletion is skipped and marked as successful - because the goal of ensuring that the image doens't exist is achieved. If one or more containers exists, which are based on the image targeted for deletion, then the deletion fails.</li>
<li><b>Tagged image</b>: Same semantics as supported for image.</li>
<li><b>Image from Dockerfile</b>: Same semantics as supported for image.</li></ul>
<p>The result of this operation should be that the subsequent execution of the <b>test</b> operation should result in a lot of failures since none of the resources should exist. </p></div></div>
<div class="section">
<h3><a name="Define_resource">Define resource</a></h3>
<p>The purpose of defining a resource for this plugin is twofold:</p>
<ul>
<li>Define a mapping between the resource ID and the plugin ID. The resource ID is the user defined key which is referenced from module models which are targeting the resource. The plugin ID is the Java package name which implements the plugin: <tt>com.alpha.pineapple.plugin.docker</tt>.</li>
<li>Define connectivity information used by the Docker plugin to connect to the remote Docker daemon.</li></ul>
<p>To define a new resource, add a <tt>resource</tt> element to the target environment in the configuration file <tt>${pineapple.home.dir}/conf/resources.xml</tt>:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;linux-vagrant&quot; &gt;
      &lt;resources&gt;
        &lt;resource id=&quot;docker-node&quot; plugin-id=&quot;com.alpha.pineapple.plugin.docker&quot; /&gt;
          &lt;property value=&quot;192.168.34.10&quot; key=&quot;host&quot;/&gt;
          &lt;property value=&quot;8082&quot; key=&quot;port&quot;/&gt;                   
          &lt;property value=&quot;1000&quot; key=&quot;timeout&quot;/&gt;                                                                
        &lt;/resource&gt;
      &lt;/resources&gt;
    &lt;/environment&gt;                                                              
  &lt;/environments&gt;
&lt;/configuration&gt;        
</pre></div>
<p>For all the details about configuration of environments and resources, please visit the <a href="../../../usage/configuration-environment.html">Environment Configuration Reference</a>. </p>
<p>The semantics of the resource element is:</p>
<div class="section">
<h4>The <tt>id</tt> attribute<a name="The_id_attribute"></a></h4>
<p>Identifies the resource uniquely in the current environment. This ID is referenced from models which intends to use the plugin. </p></div>
<div class="section">
<h4>The <tt>plugin-id</tt> element<a name="The_plugin-id_element"></a></h4>
<p>The plugin ID defines the name of the Java package which implements the plugin. The plugin ID for this plugin is: <tt>com.alpha.pineapple.plugin.docker</tt>.</p></div>
<div class="section">
<h4>The <tt>property</tt> attributes(s)<a name="The_property_attributess"></a></h4>
<p>Mandatory properties used by the plugin:</p>
<ul>
<li><tt>host</tt> - Host name of the remote Docker daemon whose REST services are invoked to execute commands.</li>
<li><tt>port</tt> - Port number on the remote Docker daemon.</li>
<li><tt>timeout</tt> - Connection timeout in milli seconds.</li></ul></div></div>
<div class="section">
<h3><a name="Define_the_module_model">Define the module model</a></h3><img src="../images/module-directory-layout.jpg" alt="" />
<p>A <b><a href="../../../usage/configuration-modules.html">module</a></b> defines the input used by Pineapple to execute operations. A module is defined by a directory layout. Part of a module is the <b>model(s)</b> which defines what happens when the module is invoked. A model is put together by one or more sub models from different plugins. Each plugin defines its own schema for its particular model </p>
<div class="section">
<h4><a name="The_docker_plugin_schema">The docker plugin schema</a> </h4>
<p>This plugin defines a schema named <b>The Docker plugin schema</b> which defines the <tt>http://pineapple.dev.java.net/ns/plugin/docker_1_0</tt> namespace. For more information about where the schema can be found, refer to the <a href="../../../usage/schemas-plugins.html">Schema locations for plugins page.</a> </p></div>
<div class="section">
<h4>Name and location of the the module model file <a name="Name_and_location_of_the_the_module_model_file"></a></h4>
<p>The list of commands which should be executed when the plugin is invoked are defined in the module model files which are located at <tt>${module-dir}/models/${environment}.xml</tt> where:</p>
<ul>
<li><tt>${module-dir}</tt> is the module root directory which identifies the module with a unique name and version. </li>
<li><tt>${environment}.xml</tt> is a module model file for a target environment, with <tt>${environment}</tt> substituted with the environment name, e.g. <tt>linux-vagrant.xml</tt> for an environment named <tt>linux-vagrant</tt>. </li></ul>
<p>If the model file doesn't exist for an environment where the agent should be used, then create the model file and name it after the target environment, e.g. <tt>linux-vagrant.xml</tt> for an environment named <tt>linux-vagrant</tt>.</p></div>
<div class="section">
<h4>The module model configuration schema<a name="The_module_model_configuration_schema"></a></h4>
<p>Module model files are defined using the <b>module model configuration schema</b> which defines the <tt>http://pineapple.dev.java.net/ns/module_model_1_0</tt> namespace. Since module model files contain elements from multiple namespace all the elements and attributes should be qualified. The header and root element should be defined as (look in the <a href="../../../usage/configuration-modules.html">Modules configuration</a> document for more details):</p>
<p>This example shows definition of the minimal model file for <tt>linux-vagrant</tt>: </p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot; /&gt;
</pre></div></div>
<div class="section">
<h4>Adding the plugin schema to the model<a name="Adding_the_plugin_schema_to_the_model"></a></h4>
<p>The next step is to include the <a href="#The_docker_plugin_schema">The Docker plugin schema</a> to get access to the entities defined by the schema:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:dkp=&quot;http://pineapple.dev.java.net/ns/plugin/docker_1_0&quot; /&gt;
</pre></div>
<p>Now we have a minimal module model file with three namespaces:</p>
<ul>
<li><b>xs:</b> The basic XMLSchema schema which is only used in the root element of the document.</li>
<li><b>mmd:</b> The module model schema which is used to define the skeleton of a model file.</li>
<li><b>dkp:</b> The Docker plugin schema which is used to define docker resources.</li></ul></div>
<div class="section">
<h4>Defining the model which targets resources<a name="Defining_the_model_which_targets_resources"></a></h4>
<p>Add a new <tt>model</tt> stanza with a <tt>target-resource</tt> attribute. The value of the <tt>target-resource</tt> should match the id of the resource which was defined previously in the section <a href="#Define_resource">Define resource</a>, e.g. <tt>docker-node</tt>:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:dkp=&quot;http://pineapple.dev.java.net/ns/plugin/docker_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;docker-node&quot;&gt;             
    &lt;mmd:content /&gt;                             
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div>
<p>Add content to the model which uses the plugin through the <tt>docker-node</tt> reference:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:dkp=&quot;http://pineapple.dev.java.net/ns/plugin/docker_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;docker-node&quot;&gt;             
    &lt;mmd:content&gt;
      &lt;dkp:docker&gt;
      &lt;/dkp:docker&gt;                     
    &lt;/mmd:content&gt;                                                                                                                                                                              
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div></div></div>
<div class="section">
<h3><a name="Define_Docker_entities_the_module_model">Define Docker entities the module model</a> </h3>
<p>Define a sequence of entities which should be processed when Pineapple is invoked with the model:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:dkp=&quot;http://pineapple.dev.java.net/ns/plugin/docker_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;docker-node&quot;&gt;             
    &lt;mmd:content&gt;
      &lt;dkp:docker&gt;
        &lt;dkp:image repository=&quot;centos&quot; tag=&quot;latest&quot; /&gt;
        &lt;dkp:taggedImage&gt;
          &lt;dkp:sourceImage repository=&quot;centos&quot; tag=&quot;latest&quot; /&gt;
          &lt;dkp:targetImage repository=&quot;pineapple/centos&quot; tag=&quot;latest&quot; /&gt;
        &lt;dkp:taggedImage&gt;
      &lt;/dkp:docker&gt;                     
    &lt;/mmd:content&gt;
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div>
<div class="section">
<h4>Image <a name="Image"></a></h4>
<p>Defines a Docker image and supports its creation and deletion. An image is defined through a Docker repository and image tag:</p>
<div class="source">
<pre>  &lt;dkp:image repository=&quot;centos&quot; tag=&quot;latest&quot; /&gt;
</pre></div>
<p>Operation semantics:</p>
<ul>
<li><b>deploy-configuration</b>: Create Docker image. The image is created by pulling it from the used registry. If an image already exists in the Docker host then the image creation is skipped and marked as successful, the consequence is that the image isn't updated even if a newer version exists at the used repository.</li>
<li><b>undeploy-configuration</b>: Delete Docker image. If no image exist with designated name then the deletion is skipped and marked as successful. If one or more containers exists, which are based on the image targeted for deletion, then the deletion fails.</li>
<li><b>create-report</b>: Creates report which lists the defined Docker images and containers.</li></ul>
<p>The semantics of the attributes are:</p>
<div class="section">
<h5><tt>repository</tt> attribute <a name="repository_attribute"></a></h5>
<p>Mandatory attribute. Defines the repository where the image is create from.</p>
<p>Example of official repository name is <i>ubuntu</i> which holds Ubuntu images. Example of user repository (which has the name format user/repo) is <i>mrpono/pineapple</i>.</p></div>
<div class="section">
<h5><tt>tag</tt> attribute <a name="tag_attribute"></a></h5>
<p>Optional attribute. Defines the image tag. Default value is <i>latest</i>.</p>
<p>Example of image tags are: latest and 12.10.</p></div></div>
<div class="section">
<h4>Tagged image <a name="Tagged_image"></a></h4>
<p>Defines a tagged Docker image and supports its creation and deletion:</p>
<div class="source">
<pre>  &lt;dkp:taggedImage&gt;
    &lt;dkp:sourceImage repository=&quot;centos&quot; tag=&quot;latest&quot; /&gt;
    &lt;dkp:targetImage repository=&quot;pineapple/centos&quot; tag=&quot;latest&quot; /&gt;
  &lt;dkp:taggedImage&gt;
</pre></div>
<p>Operation semantics:</p>
<ul>
<li><b>deploy-configuration</b>: Create tagged Docker image from an existing image. The <i>source</i> image defines the existing image from which the tagged image is created. The source image must exist otherwise the creation of the tagged image fails. The <i>target</i> image defines the created image. If the <i>source</i> image already exists in the Docker host then the image tagging is skipped and marked as successful. The consequence is that the image isn't updated even if a newer version of the source image exists in the used repository. </li>
<li><b>undeploy-configuration</b>: Delete Docker image. The <i>target</i> image defines the image which is deleted if it exists. The <i>source</i> image is ignored during deletion. If the <i>target</i> image doesn't exists then the deletion is skipped and marked as successful. If one or more containers exists, which are based on the <i>target</i> image, then the deletion fails.</li>
<li><b>create-report</b>: Creates report which lists the defined Docker images and containers.</li></ul>
<p>The semantics of the elements and attributes are:</p>
<div class="section">
<h5><tt>source-image</tt> element <a name="source-image_element"></a></h5>
<p>Mandatory attribute. Defines the source image where the tagged image is created from.</p></div>
<div class="section">
<h5><tt>source-image.repository</tt> attribute <a name="source-image.repository_attribute"></a></h5>
<p>Mandatory attribute. Defines the repository where the tagged image is create from.</p>
<p>Example of official repository name is <i>ubuntu</i> which holds Ubuntu images. Example of user repository (which has the name format user/repo) is <i>mrpono/pineapple</i>.</p></div>
<div class="section">
<h5><tt>source-image.tag</tt> attribute <a name="source-image.tag_attribute"></a></h5>
<p>Optional attribute. Defines the tag of the source image. Default value is <i>latest</i>.</p>
<p>Example of image tags are: latest and 12.10. </p></div>
<div class="section">
<h5><tt>target-image</tt> element <a name="target-image_element"></a></h5>
<p>Mandatory attribute. Defines the tagged target image.</p></div>
<div class="section">
<h5><tt>target-image.repository</tt> attribute <a name="target-image.repository_attribute"></a></h5>
<p>Mandatory attribute. Defines the repository for the tagged image.</p>
<p>Example of official repository name is <i>ubuntu</i> which holds Ubuntu images. Example of user repository (which has the name format user/repo) is <i>mrpono/pineapple</i>.</p></div>
<div class="section">
<h5><tt>target-image.tag</tt> attribute <a name="target-image.tag_attribute"></a></h5>
<p>Optional attribute. Defines the tag of the tagged image.</p>
<p>Example of image tags are: latest and 12.10.</p></div></div>
<div class="section">
<h4>Image from Dockerfile<a name="Image_from_Dockerfile"></a></h4>
<p>Defines a tagged Docker image and supports its creation and deletion from a Dockerfile:</p>
<div class="source">
<pre>   &lt;dkp:image-from-dockerfile source-directory=&quot;modulepath:dockersrc&quot; pull-image=&quot;false&quot; &gt;
     &lt;dkp:target-image repository=&quot;pineapple/httpd&quot; tag=&quot;1.0&quot; /&gt;
   &lt;/dkp:image-from-dockerfile&gt;
</pre></div>
<p>Operation semantics:</p>
<ul>
<li><b>deploy-configuration</b>: Create a TAR archive from a source directory which contains a Dockerfile. Create tagged Docker image from the TAR archive (using the Dockerfile and other resources within). The <i>target</i> image defines the created image. If the image already exists in the Docker host then the image creation is skipped and marked as successful The consequence is that the image isn't updated even if the Dockerfile is updated or a newer version exists of the source image used by the Dockerfile.</li>
<li><b>undeploy-configuration</b>: Delete the tagged Docker image. The <i>target</i> image defines the image which is deleted if it exists. If the <i>target</i> image doesn't exists then the deletion is skipped and marked as successful. If one or more containers exists, which are based on the image targeted for deletion, then the deletion fails.</li>
<li><b>create-report</b>: Creates report which lists the defined Docker images and containers.</li></ul>
<p>The semantics of the elements and attributes are:</p>
<div class="section">
<h5><tt>source-directory</tt> element <a name="source-directory_element"></a></h5>
<p>Mandatory attribute. Defines source directory which must contain a Dockerfile in the root. The source directory can contain other file resources referenced and used by the Dockerfile. Other file resources will be packed into a TAR archive along with the Dockerfile and uploaded to the Docker daemon to be used at input for creation of the image.</p>
<p>The element supports the usage of the <tt>modulepath:</tt> prefix which is resolved to the absolute directory where the model is defined. </p></div>
<div class="section">
<h5><tt>target-image</tt> element <a name="target-image_element"></a></h5>
<p>Mandatory attribute. Defines the tagged target image.</p></div>
<div class="section">
<h5><tt>target-image.repository</tt> attribute <a name="target-image.repository_attribute"></a></h5>
<p>Mandatory attribute. Defines the repository for the tagged image.</p>
<p>Example of official repository name is <i>ubuntu</i> which holds Ubuntu images. Example of user repository (which has the name format user/repo) is <i>mrpono/pineapple</i>.</p></div>
<div class="section">
<h5><tt>target-image.tag</tt> attribute <a name="target-image.tag_attribute"></a></h5>
<p>Optional attribute which is currently ignored. Defines the tag of the tagged image. Tagged image will be created with <i>latest</i> tag. </p></div>
<div class="section">
<h5><tt>pull-image</tt> element <a name="pull-image_element"></a></h5>
<p>Optional attribute. Defines whether a new source image used in the DOckerfile should be pulled from docker hub even if a older local copy exist. Default value is <i>false</i>.</p></div></div>
<div class="section">
<h4>Container<a name="Container"></a></h4>
<p>Defines a named Docker container and supports its creation and deletion:</p>
<div class="source">
<pre>  &lt;dkp:container name=&quot;alpha01&quot; &gt;
    &lt;dkp:image repository=&quot;pineapple/httpd&quot; tag=&quot;1.0&quot; /&gt;   
    &lt;dkp:configuration&gt;
      &lt;dkp:exposed-ports&gt;
        &lt;dkp:port value=&quot;8080&quot; type=&quot;tcp&quot; /&gt;
      &lt;/dkp:exposed-ports&gt;
    &lt;/dkp:configuration&gt;
  &lt;/dkp:container&gt;
</pre></div>
<p>Operation semantics:</p>
<ul>
<li><b>test</b>: Tests the Docker container at the host with the definition in the model. The <i>name</i> defines the name of the container which is tested. If no container with designated name exists then the test case is skipped as failed. The <i>actual</i> runtime state of the container is validated against the <i>expected</i> runtime state defined in the model.</li>
<li><b>deploy-configuration</b>: Create a named container. The <i>name</i> attribute defines the name of the created container. The name must be unique within the Docker daemon. The name is used to rename the Docker container as part of its creation. If a container with designated name already exists then the creation is skipped as successful. and the existing container isn't updated to reflect the container configuration in the model. The <i>state</i> attribute defines the target state of container as part of its creation, i.e. whether the container should be created, started, stopped, or paused. The <i>image</i> element defines the image from which the container is created.</li>
<li><b>undeploy-configuration</b>: Delete the Docker container. The <i>name</i> defines the name of the container which is deleted. If no container exist with designated name then the deletion is skipped and marked as successful. If the container is running then it is stopped prior to deletion. If the container is paused then it is unpaused and stopped prior to deletion. </li>
<li><b>create-report</b>: Creates report which lists the defined Docker images and containers.</li></ul>
<p>The semantics of the elements and attributes are:</p>
<div class="section">
<h5><tt>name</tt> attribute <a name="name_attribute"></a></h5>
<p>Mandatory attribute. Defines the name of container. The name of the container must be unique within the Docker daemon.</p>
<p>By default containers are primarily identified by an ID in Docker, but since Pineapple is stateless, there is no way for Pineapple to maintain the container ID across invocation of a model. Usage of a container name solves that problem.</p></div>
<div class="section">
<h5><tt>state</tt> attribute <a name="state_attribute"></a></h5>
<p>Optional attribute. Defines which state the container should enter as part of its creation, i.e then the model is invoked with the <i>deploy-configuration</i> operation. The default value is <i>running</i>, e.g. the container created and started.</p>
<p>The supported states are:</p>
<ul>
<li><i>running</i> - container is started and running.</li>
<li><i>paused</i> - container is paused from running. </li>
<li><i>stopped</i> - container is stopped. </li></ul>
<p>When the model is invoked with a <i>undeploy-configuration</i> operation then a container handled a bit differently depending on its state:</p>
<ul>
<li>If the container is <i>running</i> then container is stopped and then deleted.</li>
<li>If the container is <i>stopped</i> then container is deleted. </li>
<li>If the container is <i>paused</i> then container is un-paused (i.e. started), stopped and then deleted. </li></ul></div>
<div class="section">
<h5><tt>image</tt> element <a name="image_element"></a></h5>
<p>Mandatory element. Defines the image that the container is created from.</p></div>
<div class="section">
<h5><tt>image.repository</tt> attribute <a name="image.repository_attribute"></a></h5>
<p>Mandatory attribute. Defines the repository for the image.</p>
<p>Example of official repository name is <i>ubuntu</i> which holds Ubuntu images. Example of user repository (which has the name format user/repo) is <i>mrpono/pineapple</i>.</p></div>
<div class="section">
<h5><tt>image.tag</tt> attribute <a name="image.tag_attribute"></a></h5>
<p>Optional attribute. Defines the tag of the image. Default value is <i>latest</i>.</p></div>
<div class="section">
<h5><tt>configuration</tt> element <a name="configuration_element"></a></h5>
<p>Optional element. Supports detailed (embedded) configuration of the container. </p></div>
<div class="section">
<h5><tt>configuration.ref</tt> attribute <a name="configuration.ref_attribute"></a></h5>
<p>Optional attribute. Defines reference to reusable container configuration in model. The purpose of supporting referenced container configurations it to enable reuse of container properties which is defined for multiple container within a model, and thus reducing the amount of XML:</p>
<div class="source">
<pre>  &lt;dkp:container-configuration id=&quot;my-container-config&quot;&gt;
    &lt;dkp:exposed-ports&gt;
      &lt;dkp:port value=&quot;8080&quot; type=&quot;tcp&quot; /&gt;
    &lt;/dkp:exposed-ports&gt;
  &lt;/dkp:container-configuration&gt;            

  &lt;dkp:container name=&quot;alpha02&quot; &gt;
    &lt;dkp:image repository=&quot;pineapple/httpd&quot; tag=&quot;1.0&quot; /&gt;   
      &lt;dkp:configuration ref=&quot;my-container-config&quot; /&gt;
  &lt;/dkp:container&gt;
</pre></div>
<p>A referenced container configuration is defined using the <tt>container-configuration</tt> element.</p>
<p>If a reference isn't valid, i.e. the referenced container configuration doesn't exist within the model, then the reference is just ignored.</p>
<p>The container configuration within the container takes precedence over a refereced container configuration. Example #1: If property A is defined with value V within the container and property A is also defined in a referenced configuration with value R, then the value of A is resolved to V when the container is created.</p>
<p>Example #2: If property A isn't defined within the container and property A is defined in a referenced configuration with value R, then the value of A is resolved to R when the container is created.</p>
<p>Example #3: If property A isn't defined within the container and the reference to the referenced configuration is invalid, then the value of A is resolved to the default value D when the container is created.</p></div>
<div class="section">
<h5>Docker specfic attributes<a name="Docker_specfic_attributes"></a></h5>
<p>Optional attributes. The container configuration supports these Docker properties defined as attributes on the <tt>configuration</tt> element with simple types:</p>
<ul>
<li><tt>attach-stderr</tt>. Type is boolean, default value during container creation is <tt>true</tt>.</li>
<li><tt>attach-stdin</tt>. Type is boolean, default value during container creation is <tt>true</tt>.</li>
<li><tt>attach-stdout</tt>. Type is boolean. default value during container creation is <tt>true</tt>.</li>
<li><tt>domainname</tt>. Type is string, , default value during container creation is the empty string. </li>
<li><tt>hostname</tt>. Type is string, default value during container creation is the empty string.</li>
<li><tt>mac-address</tt>. Type is string.</li>
<li><tt>network-disabled</tt>. Type is boolean, , default value during container creation is <tt>false</tt>.</li>
<li><tt>open-stdin</tt>. Type is boolean, default value during container creation is <tt>true</tt>.</li>
<li><tt>stdin-once</tt>. Type is boolean, default value during container creation is <tt>false</tt>.</li>
<li><tt>tty</tt>. Type is boolean, default value during container creation is <tt>true</tt>.</li>
<li><tt>user</tt>. Type is string, default value during container creation is the empty string.</li>
<li><tt>working-dir</tt>. Type is string, , default value during container creation is the empty string.</li></ul>
<p>The container configuration supports these Docker container properties as object based structures:</p>
<ul>
<li><tt>cmd</tt>. List of commands.</li>
<li><tt>env</tt>. List of environment variables.</li>
<li><tt>entrypoint</tt>. List of inital commands.</li>
<li><tt>exposed-ports</tt>. List of exposed ports.</li>
<li><tt>host-config</tt>. Container host configuration as an object.</li>
<li><tt>labels</tt>. List of container labels.</li>
<li><tt>on-build</tt> List of On build commands.</li>
<li><tt>volumes</tt>. List of mounted volumes.</li></ul>
<p>These properties are described in detail below.</p></div>
<div class="section">
<h5><tt>configuration.cmd</tt> element <a name="configuration.cmd_element"></a></h5>
<p>Optional element. Defines a command to run specified as a string or an array of strings. The command is specificed as a string. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:cmd&gt;date&lt;/dkp:cmd&gt;
  &lt;/dkp:container&gt;            
</pre></div>
<p>Multiple commands (e.g. parameters) are defined within the same <tt>cmd</tt> element with a space in between:</p>
<div class="source">
<pre>  &lt;dkp:configuration&gt;
    &lt;dkp:cmd&gt;/bin/sh date&lt;/dkp:cmd&gt;  
  &lt;/dkp:configuration&gt;
</pre></div></div>
<div class="section">
<h5><tt>configuration.entrypoint</tt> element <a name="configuration.entrypoint_element"></a></h5>
<p>Optional element. Defines the default command to execute at runtime, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:entrypoint&gt;/bin/bash&lt;/dkp:entrypoint&gt;
  &lt;/dkp:container&gt;            
</pre></div>
<p>Multiple commands (e.g. parameters) are defined within the same <tt>entrypoint</tt> element with a space in between:</p>
<div class="source">
<pre>  &lt;dkp:configuration&gt;
    &lt;dkp:entrypoint&gt;/bin/sh date&lt;/dkp:entrypoint&gt;  
  &lt;/dkp:configuration&gt;
</pre></div></div>
<div class="section">
<h5><tt>configuration.env</tt> element <a name="configuration.env_element"></a></h5>
<p>Optional element. Defines a list of environment variables defined within the container. Each variable is defined with a <tt>variable</tt> element. A variable element defines a mandatory <tt>name</tt> attribute for the variable name and a mandatory <tt>value</tt> attribute for the variable value.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:env&gt;
      &lt;dkp:variable name=&quot;PATH&quot; value=&quot;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot; /&gt;         
    &lt;/dkp:env&gt;
  &lt;/dkp:container&gt;            
</pre></div></div>
<div class="section">
<h5><tt>configuration.exposed-ports</tt> element <a name="configuration.exposed-ports_element"></a></h5>
<p>Optional element. Defines list of TCP and UDP ports exposed by the container. Each exposed port is defined with a <tt>port</tt> element. A port element defines a mandatory <tt>value</tt> attribute. Legal values are integers between 1 to 65535. A port element defines a mandatory <tt>type</tt> attribute. Legal values are <i>tcp</i> or <i>udp</i>.</p>
<p>If two ports with identical port numbers are added to the model, then only the first port is registered.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:exposed-ports&gt;
      &lt;dkp:port value=&quot;8080&quot; type=&quot;tcp&quot; /&gt;
    &lt;/dkp:exposed-ports&gt;
  &lt;/dkp:container&gt;            
</pre></div></div>
<div class="section">
<h5><tt>configuration.labels</tt> element <a name="configuration.labels_element"></a></h5>
<p>Optional element. Defines list of labels to register with the container. Each label is defined with a <tt>label</tt> element. A label element defines a mandatory <tt>key</tt> attribute for the label key and a mandatory <tt>value</tt> attribute for the label value.</p>
<p>If two labels with identical keys are added to the model, then only the first label is registered.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:labels&gt;
      &lt;dkp:label key=&quot;com.example.vendor&quot; value=&quot;Acme&quot; /&gt;
      &lt;dkp:label key=&quot;com.example.license&quot; value=&quot;GPL&quot; /&gt;
      &lt;dkp:label key=&quot;com.example.version&quot; value=&quot;1.0&quot; /&gt;
    &lt;/dkp:labels&gt;
  &lt;/dkp:container&gt;            
</pre></div></div>
<div class="section">
<h5><tt>configuration.on-build</tt> element <a name="configuration.on-build_element"></a></h5>
<p>Optional element.</p>
<p>Defines the command to be executed at a later time, when the image is used as the base for another build (see the <a class="externalLink" href="https://docs.docker.com/reference/builder/#onbuild">Docker ONBUILD command reference</a>). The command is specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:on-build&gt;ADD . /app/src&lt;/dkp:on-build&gt;
  &lt;/dkp:container&gt;            
</pre></div>
<p>Multiple commands (e.g. parameters) are defined within the same <tt>on-build</tt> element with a space in between.</p></div>
<div class="section">
<h5><tt>configuration.volumes</tt> element <a name="configuration.volumes_element"></a></h5>
<p>Optional element. Defines list of volumes mounted by the container. Each volume is defined with a <tt>volume</tt> element. A volume element defines a mandatory <tt>mountpoint</tt> attribute. Legal values are string based path expressions.</p>
<p>If two volumes with identical mountpoints are added to the model, then only the first volume is registered.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:volumes&gt;
      &lt;dkp:volume mountpoint=&quot;/tmp&quot; /&gt;
      &lt;dkp:volume mountpoint=&quot;/opt&quot; /&gt;
    &lt;/dkp:volumes&gt;
  &lt;/dkp:container&gt;            
</pre></div></div>
<div class="section">
<h5><tt>configuration.host-config</tt> element <a name="configuration.host-config_element"></a></h5>
<p>Optional element. Defines the host specific container configuration. The host configuration is defined with a <tt>host-config</tt> element. The host configuration contains properties and objects.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:host-config&gt;      
      &lt;dkp:restart-policy maximum-retry-count=&quot;5&quot; name=&quot;on-failure&quot; /&gt;
      &lt;dkp:port-bindings&gt;
        &lt;dkp:bind container-port=&quot;8080&quot; container-type=&quot;tcp&quot; host-port=&quot;8080&quot; /&gt;
      &lt;dkp:port-bindings&gt;
    &lt;/dkp:host-config&gt;
  &lt;/dkp:container&gt;            
</pre></div>
<p>The host config element supports these Docker properties defined as attributes:</p>
<ul>
<li><tt>binds</tt>. List of container volume bindings.</li>
<li><tt>cpu-shares</tt>. Type is long, default value during container creation is 0.</li>
<li><tt>cpu-period</tt>. Type is long, default value during container creation is 0.</li>
<li><tt>cpuset-cpus</tt>. Type is string, default value during container creation is the empty string.</li>
<li><tt>cpuset-mems</tt> Type is string, default value during container creation is the empty string.</li>
<li><tt>dns</tt>. List of DNS servers for the container to use.</li>
<li><tt>dns-search</tt> List of DNS search domains.</li>
<li><tt>extra-hosts</tt>. List of hostnames/IP mappings to add to the container&#x2019;s <i>/etc/hosts file</i>.</li>
<li><tt>group-add</tt>. List of additional groups that the container process will run as.</li>
<li><tt>links</tt>. List of container network links that the container will create to other containers.</li>
<li><tt>memory</tt>. Type is long, default value during container creation is 0.</li>
<li><tt>memory-swap</tt> Type is long, , default value during container creation is 0.</li>
<li><tt>security-opt</tt>. List of string values to customize labels for MLS systems, such as SELinux.</li>
<li><tt>volumes-from</tt>. List of volumes to take from other container.</li></ul>
<p>The host config element supports these Docker container properties as object based structures:</p>
<ul>
<li><tt>port-bindings</tt>. Map of port bindings.</li>
<li><tt>restart-policy</tt>. Container restart policy as an object.</li></ul>
<p>These properties are described in detail below.</p></div>
<div class="section">
<h5><tt>configuration.host-config.binds</tt> element <a name="configuration.host-config.binds_element"></a></h5>
<p>TODO: Complete documentation.</p>
<p>Optional element. Defines the XXXX, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre> TODO: add example.  
</pre></div>
<p>Multiple commands (e.g. XXX) are defined within the same <tt>binds</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.dns</tt> element <a name="configuration.host-config.dns_element"></a></h5>
<p>Optional element. Defines the list of DNS servers for the container to use, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre>  &lt;dkp:host-config&gt;      
    &lt;dkp:dns&gt;8.8.8.8 and 8.8.4.4&lt;/dkp:dns&gt;              
  &lt;/dkp:host-config&gt;
</pre></div>
<p>Multiple servers are defined within the same <tt>dns</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.dns-search</tt> element <a name="configuration.host-config.dns-search_element"></a></h5>
<p>TODO: Complete documentation.</p>
<p>Optional element. Defines the list of DNS search domains for the container to use, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre> TODO: add example.  
</pre></div>
<p>Multiple domains are defined within the same <tt>dns-search</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.extra-hosts</tt> element <a name="configuration.host-config.extra-hosts_element"></a></h5>
<p>TODO: Complete documentation.</p>
<p>Optional element. Defines the list of host names/IP mappings to add to the container&#x2019;s <i>/etc/hosts file</i>, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre> TODO: add example.  
</pre></div>
<p>Multiple host names are defined within the same <tt>extra-hosts</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.group-add</tt> element <a name="configuration.host-config.group-add_element"></a></h5>
<p>TODO: Complete documentation.</p>
<p>Optional element. Defines the list of additional groups that the container process will run as, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<div class="source">
<pre> TODO: add example.  
</pre></div>
<p>Multiple host names are defined within the same <tt>group-add</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.links</tt> element <a name="configuration.host-config.links_element"></a></h5>
<p>Optional element. Defines the list of container network links that the container will create to other containers, specified as a string or an array of strings. Each space in the string is interpreted as a separator and will result in interpretation of the string as an array.</p>
<p>A link is defined by a <i>container-name</i>:<i>dns</i>: </p>
<ul>
<li>The <i>container-name</i> defines the name of the target container that the defining container should be able to initiate and communicate with.</li>
<li>the <i>dns</i> part defines an alias that is added to the defining containers <i>/etc/hosts file</i> file and can then be resolved internally within the defining container.</li></ul>
<div class="source">
<pre> &lt;dkp:host-config&gt;      
  &lt;dkp:links&gt;backend01:httpd1 backend02:httpd2 backend03:httpd3 backend04:httpd4&lt;/dkp:links&gt;              
&lt;/dkp:host-config&gt;
</pre></div>
<p>Multiple links are defined within the same <tt>links</tt> element with a space in between. </p></div>
<div class="section">
<h5><tt>configuration.host-config.security-opt</tt> element <a name="configuration.host-config.security-opt_element"></a></h5>
<p>TODO: Complete documentation. <tt>security-opt</tt> defines list of string values to customize labels for MLS systems, such as SELinux.</p></div>
<div class="section">
<h5><tt>configuration.host-config.volumes-from</tt> element <a name="configuration.host-config.volumes-from_element"></a></h5>
<p>TODO: Complete documentation. <tt>volumes-from</tt> defines list of volumes to take from other container.</p></div>
<div class="section">
<h5><tt>configuration.host-config.port-bindings</tt> element <a name="configuration.host-config.port-bindings_element"></a></h5>
<p>Optional element. Defines the list of port bindings for the container. Binds (and exposes) container ports at the host. A binding is defined with a <tt>bind</tt> element.</p>
<p>A bind element defines a mandatory <tt>container-port</tt> attribute which defines the container port which should be bound and exposed to the host. Legal values are 1 to 65535. A bind element defines a mandatory <tt>host-port</tt> attribute which defines to which host port the container port should be bound Legal values are 1 to 65535. A bind element defines a mandatory <tt>type</tt> attribute which defines type of the bound container port. Legal values are <i>tcp</i> or <i>udp</i>. </p>
<p>If two bindings with identical container ports are added to the model, then only the first binding is registered.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:host-config&gt;      
      &lt;dkp:port-bindings&gt;
        &lt;dkp:bind container-port=&quot;8080&quot; host-port=&quot;8080&quot; type=&quot;tcp&quot; /&gt;
      &lt;dkp:port-bindings&gt;
    &lt;/dkp:host-config&gt;
  &lt;/dkp:container&gt;            
</pre></div></div>
<div class="section">
<h5><tt>configuration.host-config.restart-policy</tt> element <a name="configuration.host-config.restart-policy_element"></a></h5>
<p>Optional element. Defines the restart policy for the container. The policy is defined with a <tt>restart-policy</tt> element. The policy defines a mandatory <tt>maximum-retry-count</tt> attribute which defines the number of times to retry before giving up. Legal values are 0 to 1000000. The policy defines a mandatory <tt>name</tt> attribute which defines the used policy. Legal values are <i>always</i> or <i>on-failure</i>.</p>
<div class="source">
<pre>  &lt;dkp:container&gt;
    &lt;dkp:host-config&gt;      
      &lt;dkp:restart-policy maximum-retry-count=&quot;5&quot; name=&quot;on-failure&quot; /&gt;
    &lt;/dkp:host-config&gt;
  &lt;/dkp:container&gt;            
</pre></div></div></div>
<div class="section">
<h4>Referenced container configuration<a name="Referenced_container_configuration"></a></h4>
<p>Defines a named Docker container configuration which can be referenced from containers within the model during creation:</p>
<div class="source">
<pre>  &lt;dkp:container-configuration id=&quot;my-container-config&quot;&gt;
    &lt;dkp:exposed-ports&gt;
      &lt;dkp:port value=&quot;8080&quot; type=&quot;tcp&quot; /&gt;
    &lt;/dkp:exposed-ports&gt;
  &lt;/dkp:container-configuration&gt;            

  &lt;dkp:container name=&quot;alpha02&quot; &gt;
    &lt;dkp:image repository=&quot;pineapple/httpd&quot; tag=&quot;1.0&quot; /&gt;   
      &lt;dkp:configuration ref=&quot;my-container-config&quot; /&gt;
  &lt;/dkp:container&gt;
</pre></div>
<p>Operation semantics:</p>
<ul>
<li><b>test</b>: NOP.</li>
<li><b>create-report</b>: NOP.</li>
<li><b>deploy-configuration</b>: If referenced by a container then the values in the container configuration are used as input to resolve the values for the created container.</li>
<li><b>undeploy-configuration</b>: NOP.</li></ul>
<p>The semantics of the elements and attributes are:</p>
<div class="section">
<h5><tt>id</tt> attribute <a name="id_attribute"></a></h5>
<p>Mandatory attribute. Defines unique ID for the container configuration within the model.</p></div>
<div class="section">
<h5>Docker specfic attributes and properties<a name="Docker_specfic_attributes_and_properties"></a></h5>
<p>The container configuration supports all standard Docker container attributes and properties as described above.</p></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2016.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

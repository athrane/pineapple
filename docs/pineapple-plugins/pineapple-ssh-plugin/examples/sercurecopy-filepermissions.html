<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\apt/examples\sercurecopy-filepermissions.apt at 22 Dec 2018
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20181222" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple SSH plugin &#x2013; How-to: Set file permissions and ownership for file copy</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script type="text/javascript" src="../js/apache-maven-fluido-1.7.min.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28287414-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Pineapple SSH plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="../../../index.html" title="Pineapple Home">Pineapple Home</a><span class="divider">/</span></li>
      <li class=""><a href="../../index.html" title="Pineapple plugin projects">Pineapple plugin projects</a><span class="divider">/</span></li>
      <li class=""><a href="../index.html" title="Pineapple SSH plugin">Pineapple SSH plugin</a><span class="divider">/</span></li>
    <li class="active ">How-to: Set file permissions and ownership for file copy</li>
        <li id="publishDate" class="pull-right">Last Published: 22 Dec 2018</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Overview</li>
    <li><a href="../../../index.html" title="Home"><span class="none"></span>Home</a></li>
    <li><a href="../../../usage/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../../../usage/index.html" title="For Users"><span class="none"></span>For Users</a></li>
    <li><a href="../../../development/index.html" title="For Developers"><span class="none"></span>For Developers</a></li>
    <li><a href="../../../usage/terms.html" title="Terms and Conditions"><span class="none"></span>Terms and Conditions</a></li>
      <li class="nav-header">Clients</li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application"><span class="none"></span>Standalone Web Application</a></li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application"><span class="none"></span>Deployable Web Application</a></li>
    <li><a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin"><span class="none"></span>Maven Plugin</a></li>
      <li class="nav-header">Plugins</li>
    <li><a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent"><span class="none"></span>Agent</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution"><span class="none"></span>Composite Execution</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH"><span class="none"></span>SSH</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker"><span class="none"></span>Docker</a></li>
    <li><a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test"><span class="none"></span>Infrastructure Test</a></li>
      <li class="nav-header">API's</li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST"><span class="none"></span>REST</a></li>
    <li><a href="../../../development/plugin-framework.html" title="Plugin Framework"><span class="none"></span>Plugin Framework</a></li>
      <li class="nav-header">Additional Information</li>
    <li><a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog"><span class="none"></span>The Pineapple Project Blog</a></li>
    <li><a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog"><span class="none"></span>Pineapple Exception Trail Blog</a></li>
      <li class="nav-header">Project Tools</li>
    <li><a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li><a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code"><span class="none"></span>Source Code</a></li>
    <li><a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker"><span class="none"></span>Issue Tracker</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
</ul>
          <hr />
          <div id="poweredBy">
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <div class="g-plusone" data-href="https://pineapple.java.net" data-size="tall" ></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="How-to:_Set_file_permissions_and_ownership_for_file_copy"></a>How-to: Set file permissions and ownership for file copy</h2>
<div class="section">
<h3><a name="Overview"></a>Overview</h3>
<p>This example illustrates how file permissions can be set when using the remote file copy command in the SSH plugin.</p>
<div class="section">
<h4><a name="Setting_the_file_permissions"></a>Setting the file permissions</h4>
<p>The <tt>copy-to</tt> command contain the optional attribute <tt>chmod</tt>. The value of the attribute sets the file permissions of the destination file. The value is defined using an octal representation of OGW (e.g. owner, group and world). In this example the file <tt>create-docker-user.sh</tt> is copied to the remote <tt>/tmp</tt> directory and the file permission is set to 775:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; &gt;
    &lt;mmd:variables&gt;
      &lt;mmd:variable key=&quot;create-user-script&quot; value=&quot;create-docker-user.sh&quot; /&gt;          
    &lt;/mmd:variables&gt;
        
      &lt;mmd:model target-resource=&quot;ssh-ci-node&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Create and add Docker user to sudoers&quot; &gt;
        &lt;mmd:content&gt;
        &lt;shp:ssh&gt;
          &lt;shp:copy-to source=&quot;modulepath:bin/${create-user-script}&quot; destination=&quot;/tmp/${create-user-script}&quot; chmod=&quot;775&quot; /&gt;
          &lt;shp:execute command=&quot;sudo /tmp/${create-user-script}&quot; /&gt;            
        &lt;/shp:ssh&gt;                      
      &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;
</pre></div></div>
<div class="section">
<h4><a name="Setting_the_file_ownership"></a>Setting the file ownership</h4>
<p>The <tt>copy-to</tt> command contain the optional attribute <tt>chown</tt>. The value of the attribute sets the ownership of the destination file. The value is defined using the user identifier (defined as a integer). In this example the file <tt>create-docker-user.sh</tt> is copied to the remote <tt>/tmp</tt> directory and the file ownership is set to 512:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; &gt;
    &lt;mmd:variables&gt;
      &lt;mmd:variable key=&quot;create-user-script&quot; value=&quot;create-docker-user.sh&quot; /&gt;          
    &lt;/mmd:variables&gt;
        
      &lt;mmd:model target-resource=&quot;ssh-ci-node&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Create and add Docker user to sudoers&quot; &gt;
        &lt;mmd:content&gt;
        &lt;shp:ssh&gt;
          &lt;shp:copy-to source=&quot;modulepath:bin/${create-user-script}&quot; destination=&quot;/tmp/${create-user-script}&quot; chown=&quot;512&quot; /&gt;
          &lt;shp:execute command=&quot;sudo /tmp/${create-user-script}&quot; /&gt;            
        &lt;/shp:ssh&gt;                      
      &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;
</pre></div></div>
<div class="section">
<h4><a name="Setting_the_group_ownership"></a>Setting the group ownership</h4>
<p>The <tt>copy-to</tt> command contain the optional attribute <tt>chgrp</tt>. The value of the attribute sets the group ownership of the destination file. The value is defined using the group identifier (defined as a integer). In this example the file <tt>create-docker-user.sh</tt> is copied to the remote <tt>/tmp</tt> directory and the group ownership is set to 513:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; &gt;
    &lt;mmd:variables&gt;
      &lt;mmd:variable key=&quot;create-user-script&quot; value=&quot;create-docker-user.sh&quot; /&gt;          
    &lt;/mmd:variables&gt;
        
      &lt;mmd:model target-resource=&quot;ssh-ci-node&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Create and add Docker user to sudoers&quot; &gt;
        &lt;mmd:content&gt;
        &lt;shp:ssh&gt;
          &lt;shp:copy-to source=&quot;modulepath:bin/${create-user-script}&quot; destination=&quot;/tmp/${create-user-script}&quot; chgrp=&quot;513&quot; /&gt;
          &lt;shp:execute command=&quot;sudo /tmp/${create-user-script}&quot; /&gt;            
        &lt;/shp:ssh&gt;                      
      &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;

</pre></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
Copyright (C) 2007-2017 Allan Thrane Andersen. All Rights Reserved.
        </div>
      </div>
    </footer>
  </body>
</html>

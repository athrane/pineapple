<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 04-13-17
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20170413" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple test utilities - How-to: Write integration tests in Pineapple</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple test utilities</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple test projects">
        Pineapple test projects</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple test utilities">
        Pineapple test utilities</a>
        </li>
      <li class="divider ">/</li>
        <li class="">How-to: Write integration tests in Pineapple</li>
        
                
                    
      
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-fusion-middleware-installation-plugin/index.html" title="Fusion Middleware Installation">
          <i class="none"></i>
        Fusion Middleware Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic Installation">
          <i class="none"></i>
        WebLogic Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic Deployment">
          <i class="none"></i>
        WebLogic Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic Scripting Tool (WLST)">
          <i class="none"></i>
        WebLogic Scripting Tool (WLST)</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">
          <i class="none"></i>
        WebLogic JMX</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog">
          <i class="none"></i>
        The Pineapple Project Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">Overview</li>
                                
      <li>
    
                          <a href="../index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                  
      <li>
    
                          <a href="../usage.html" title="Usage">
          <i class="none"></i>
        Usage</a>
            </li>
                                                                                                        
      <li>
    
                          <a href="../realization/index.html" title="Realization">
          <i class="icon-chevron-right"></i>
        Realization</a>
                  </li>
                  
      <li>
    
                          <a href="../faq.html" title="FAQ">
          <i class="none"></i>
        FAQ</a>
            </li>
                                        <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                <div id="lastPublished">
        <span id="publishDate">Last Published: 04-13-17</span>
              </div>
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="http://pineapple.java.net/pineapple-test-projects/pineapple-test-utils/" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section">
<h2>How-to: Write integration tests in Pineapple<a name="How-to:_Write_integration_tests_in_Pineapple"></a></h2>
<p>To write integration test do:</p>
<ul>
<li>Add Maven dependencies to the project</li>
<li>Write tests. </li>
<li>Inspect log files.</li></ul>
<div class="section">
<h3>Add Maven dependencies to the project <a name="Add_Maven_dependencies_to_the_project"></a></h3>
<div class="section">
<h4>Add Spring-test dependency<a name="Add_Spring-test_dependency"></a></h4>
<p>The Spring-test jar gives access to:</p>
<ul>
<li>The <tt>@RunWith</tt> annotation.</li>
<li>The <tt>@ContextConfiguration</tt> annotation.</li></ul>
<p>To use the Spring framework test facilities, add the Maven dependency to the project POM:</p>
<div class="source">
<pre>  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;org.springframework.test&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;             
  &lt;/dependency&gt;                                 
</pre></div>
<p>Version information is located in the <tt>pineapple-project/pom.xml</tt>. The dependency is scoped as <tt>test</tt> as it should only be available in the test phase.</p></div>
<div class="section">
<h4>Add JSR-250 annotations <a name="Add_JSR-250_annotations"></a></h4>
<p>The JSR-250 annotations gives access to:</p>
<ul>
<li>The <tt>@Resource</tt> annotation which is used to field injection in Spring. </li></ul>
<p>Add the Maven dependency to the project POM:</p>
<div class="source">
<pre>  &lt;dependency&gt;
    &lt;groupId&gt;javax.annotation&lt;/groupId&gt;
    &lt;artifactId&gt;jsr250-api&lt;/artifactId&gt;
        &lt;scope&gt;test&lt;/scope&gt;    
  &lt;/dependency&gt;         
</pre></div>
<p>Version information is located in the <tt>pineapple-project/pom.xml</tt>. The dependency is scoped as <tt>test</tt> as it should only be avaiable in the test pahse. </p></div>
<div class="section">
<h4>Example: pineapple-infrastructure-test-plugin dependencies<a name="Example:_pineapple-infrastructure-test-plugin_dependencies"></a></h4>
<div class="source">
<pre>
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;
        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
        &lt;parent&gt;
                &lt;groupId&gt;com.alpha.pineapple&lt;/groupId&gt;
                &lt;artifactId&gt;pineapple-modules&lt;/artifactId&gt;
                &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
        &lt;/parent&gt;
        &lt;artifactId&gt;pineapple-infrastructure-test-plugin&lt;/artifactId&gt;
        &lt;packaging&gt;jar&lt;/packaging&gt;
        &lt;name&gt;Pineapple infrastructure test plugin&lt;/name&gt;
        &lt;url&gt;http://maven.apache.org&lt;/url&gt;
        &lt;dependencies&gt;
                &lt;!-- pineapple internal dependencies --&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;${pom.groupId}&lt;/groupId&gt;
                        &lt;artifactId&gt;pineapple-api&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;${pom.groupId}&lt;/groupId&gt;
                        &lt;artifactId&gt;pineapple-commands-api&lt;/artifactId&gt;                                         
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;${pom.groupId}&lt;/groupId&gt;
                        &lt;artifactId&gt;pineapple-test-utils&lt;/artifactId&gt;
                        &lt;scope&gt;test&lt;/scope&gt;                                                                     
                &lt;/dependency&gt;                                                                                                           
                &lt;!-- external dependencies --&gt;
                &lt;!-- junit-dep version is used to be able to import hamcrest 1.2  --&gt;                           
                &lt;dependency&gt;
                        &lt;groupId&gt;junit&lt;/groupId&gt;
                        &lt;artifactId&gt;junit-dep&lt;/artifactId&gt;
                        &lt;scope&gt;test&lt;/scope&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;org.easymock&lt;/groupId&gt;  
                        &lt;artifactId&gt;easymock&lt;/artifactId&gt;  
                        &lt;scope&gt;test&lt;/scope&gt;             
                &lt;/dependency&gt;   
                &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework&lt;/groupId&gt; 
                        &lt;artifactId&gt;org.springframework.test&lt;/artifactId&gt; 
                        &lt;scope&gt;test&lt;/scope&gt;
                &lt;/dependency&gt;                   
                &lt;!-- required due to jaxb marshaller declaration --&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;                  
                        &lt;artifactId&gt;org.springframework.oxm&lt;/artifactId&gt; 
                        &lt;scope&gt;test&lt;/scope&gt;
                &lt;/dependency&gt;   
                &lt;dependency&gt;
                        &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                        &lt;artifactId&gt;jetty-server&lt;/artifactId&gt;
                        &lt;scope&gt;test&lt;/scope&gt;                                                             
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                        &lt;artifactId&gt;jetty-servlet&lt;/artifactId&gt;
                        &lt;scope&gt;test&lt;/scope&gt;                                                             
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;org.eclipse.jetty&lt;/groupId&gt;
                        &lt;artifactId&gt;jetty-webapp&lt;/artifactId&gt;
                        &lt;scope&gt;test&lt;/scope&gt;                                                             
                &lt;/dependency&gt;                                                                                                                                                                                   
                &lt;dependency&gt;
                        &lt;groupId&gt;log4j&lt;/groupId&gt;
                        &lt;artifactId&gt;log4j&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;commons-httpclient&lt;/groupId&gt;
                        &lt;artifactId&gt;commons-httpclient&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;commons-lang&lt;/groupId&gt;
                        &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;commons-net&lt;/groupId&gt;
                        &lt;artifactId&gt;commons-net&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;!-- provides access to @resource annotation  --&gt;
                &lt;dependency&gt;
                &lt;groupId&gt;javax.annotation&lt;/groupId&gt;
                &lt;artifactId&gt;jsr250-api&lt;/artifactId&gt;             
                &lt;/dependency&gt;
                &lt;!-- provides access to Spring I18N support --&gt;         
                &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                        &lt;artifactId&gt;org.springframework.core&lt;/artifactId&gt;
                &lt;/dependency&gt;                   
                &lt;dependency&gt;
                        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
                        &lt;artifactId&gt;org.springframework.context&lt;/artifactId&gt;
                &lt;/dependency&gt;                                                           
                &lt;!-- provides access to org.hamcrest matching library  --&gt;                      
                &lt;dependency&gt;
                        &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
                        &lt;artifactId&gt;hamcrest-core&lt;/artifactId&gt;
                &lt;/dependency&gt;
                &lt;dependency&gt;
                        &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;
                        &lt;artifactId&gt;hamcrest-library&lt;/artifactId&gt;
                &lt;/dependency&gt;   
                &lt;dependency&gt;
                        &lt;groupId&gt;htmlcleaner&lt;/groupId&gt;
                        &lt;artifactId&gt;htmlcleaner&lt;/artifactId&gt;
                &lt;/dependency&gt;                                                                                                                                                                                                                                                                                                                                                                           
        &lt;/dependencies&gt; 
</pre></div></div></div>
<div class="section">
<h3>Write tests<a name="Write_tests"></a></h3>
<div class="section">
<h4>Locate the classes in test source folder<a name="Locate_the_classes_in_test_source_folder"></a></h4>
<p>The integration test cases are placed in the <tt>src/test/java</tt> folder. </p>
<p>Integration tests are located in same folders as the unit tests. The tests are separated by the used naming convention, as shown in the next section. </p></div>
<div class="section">
<h4>Postfix the class names with <tt>IntegrationTest</tt><a name="Postfix_the_class_names_with_IntegrationTest"></a></h4>
<p>Test classes are named <tt>XxxIntegrationTest</tt> where <tt>Xxx</tt> is the name of the class which is integration tested. </p>
<p>Example: The integration test class for the class <tt>TestDeployedConfiguration</tt> should be named <tt>TestDeployedConfigurationIntegrationTest</tt>.</p></div>
<div class="section">
<h4>Configure the class to be run with the Spring JUnit class runner<a name="Configure_the_class_to_be_run_with_the_Spring_JUnit_class_runner"></a></h4>
<p>Annotate the class with the <tt>@RunWith( SpringJUnit4ClassRunner.class )</tt> Spring annotation to configure the class to be run with the Spring JUnit class runner.</p>
<p>Example: The integration class <tt>TestDeployedConfigurationIntegrationTest</tt> in the <tt>pineapple-weblogic-jmx-plugin-integration-test</tt> project is configured with: </p>
<ul>
<li><tt>@RunWith( SpringJUnit4ClassRunner.class )</tt> to configure class to be run with Spring Junit test runner.</li></ul></div>
<div class="section">
<h4>Configure the class to be run with the proper context configuration <a name="Configure_the_class_to_be_run_with_the_proper_context_configuration"></a></h4>
<p>Annotate the class with the <tt>@ContextConfiguration( locations = <a name="asome-app-config-config.xml"> &quot;/some-app-config-config.xml&quot; </a> )</tt> Spring annotation to configure the Spring JUnit class runner to load the application context from the designated location(s). </p>
<p>Example: The integration class <tt>TestDeployedConfigurationIntegrationTest</tt> in the <tt>pineapple-weblogic-jmx-plugin-integration-test</tt> project is configured with: </p>
<ul>
<li><tt>@ContextConfiguration( locations = <a name="acom.alpha.pineapple.plugin.weblogic.jmx-config.xml"> &quot;/com.alpha.pineapple.plugin.weblogic.jmx-config.xml&quot; </a> )</tt> to load the application context from the <tt>src/main/resources directory</tt> from the <tt>pineapple-weblogic-jmx-plugin</tt> project. <b>Please notice:</b> The integration test uses the Spring application context file which is used to configure the project. 
<div class="source">
<pre>package com.alpha.pineapple.plugin.weblogic.jmx.operation;

import ...;

/**
 * Integration test for the &lt;code&gt;TestDeployedConfiguration&lt;/code&gt; class.  
 */
@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( locations = { &quot;/com.alpha.pineapple.plugin.weblogic.jmx-config.xml&quot; } )
public class TestDeployedConfigurationIntegrationTest
{
        // class content goes here... 
}               
</pre></div></li></ul></div>
<div class="section">
<h4>Use annotation based dependency injection to get the class under test<a name="Use_annotation_based_dependency_injection_to_get_the_class_under_test"></a></h4>
<p>An instance of the class under test, should be obtained by using the annotation based dependency injection mechanism in Spring. To enable it: </p>
<ul>
<li>Define a field in the integration test class with the object under test and annotate it with the <tt>@Resource</tt> annotation. </li>
<li>Define a bean in the application context file, with an id matching the field name.</li></ul>
<p>When the tests is run Spring will initialize the field with the bean defined in the application context file.</p>
<p>Example: The integration class <tt>TestDeployedConfigurationIntegrationTest</tt> in the <tt>pineapple-weblogic-jmx-plugin-integration-test</tt> project, is implemented with the field <tt>TestDeployedConfiguration operation;</tt> which is annotated with the <tt>@Resource</tt> annotation:</p>
<div class="source">
<pre>package com.alpha.pineapple.plugin.weblogic.jmx.operation;

import ...;

/**
 * Integration test for the &lt;code&gt;TestDeployedConfiguration&lt;/code&gt; class.  
 */
@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( locations = { &quot;/com.alpha.pineapple.plugin.weblogic.jmx-config.xml&quot; } )
public class TestDeployedConfigurationIntegrationTest
{
    /**
     * Object under test.
     */
    @Resource
    TestDeployedConfiguration testDeployedConfiguration;
        
        // remaining class content goes here...
}               
</pre></div>
<p>The bean is defined in the application context file for the <tt>pineapple-weblogic-jmx-plugin</tt> project:</p>
<div class="source">
<pre>&lt;bean id=&quot;testDeployedConfiguration&quot; class=&quot;com.alpha.pineapple.plugin.weblogic.jmx.operation.TestDeployedConfiguration&quot; /&gt;
</pre></div></div>
<div class="section">
<h4>Use the test context configuration to test classes which uses plugin providers<a name="Use_the_test_context_configuration_to_test_classes_which_uses_plugin_providers"></a></h4>
<p>The plugin framework defines two plugin providers which can provide a plugin with useful information at runtime:</p>
<ul>
<li>An operation can gain access to a <tt>ExecutionInfo</tt> object which contains runtime information about the operation</li>
<li>An operation can gain access to a <tt>RuntimeDirectoryProvider</tt> object which contains runtime information about which runtime directories Pineapple is using.</li></ul>
<p>The providers are injected into the plugin application context as beans when Pineapple is initialized. During integration test of classes in an plugin project which uses these providers, the provider beans must be present in the plugin application context or the test will fail due to dependency injection errors.</p>
<p>The solution is to use the <i>test context configuration</i> named <tt>com.alpha.pineapple.testutils-config.xml</tt> which is defined in the the <tt>pineapple-test-utils</tt> project. </p>
<p>The test context configuration contains bean definitions of the plugin provider whose implementations are uninitialized <i>EasyMock</i> objects:</p>
<div class="source">
<pre>
&lt;!-- definition of MOCK runtime directory provider --&gt;
&lt;bean id=&quot;runtimeDirectoryProvider&quot; class=&quot;org.easymock.EasyMock&quot; factory-method=&quot;createMock&quot;&gt;
        &lt;constructor-arg value=&quot;com.alpha.pineapple.io.file.RuntimeDirectoryProvider&quot;/&gt;
&lt;/bean&gt;

&lt;!-- definition of MOCK execution info provider --&gt;
&lt;bean id=&quot;executionInfoProvider&quot; class=&quot;org.easymock.EasyMock&quot; factory-method=&quot;createMock&quot;&gt;
        &lt;constructor-arg value=&quot;com.alpha.pineapple.execution.ExecutionInfoProvider&quot;/&gt;
&lt;/bean&gt;
</pre></div>
<p>To use <i>test context configuration</i> follow these steps:</p>
<ol style="list-style-type: decimal">
<li>Add a Maven dependency to the <tt>pineapple-test-utils</tt> project.</li>
<li>Add the <tt>com.alpha.pineapple.testutils-config.xml</tt> to the <tt>@ContextConfiguration</tt> annotation for the integration test case which required the presence of the provider classes. Example:
<div class="source">
<pre>package com.alpha.pineapple.plugin.weblogic.jmx.operation;

import ...;

/**
 * Integration test for the &lt;code&gt;TestDeployedConfiguration&lt;/code&gt; class.  
 */
@RunWith( SpringJUnit4ClassRunner.class )
@ContextConfiguration( locations = { &quot;/com.alpha.pineapple.testutils-config.xml&quot;, &quot;/com.alpha.pineapple.plugin.weblogic.jmx-config.xml&quot; } )
public class TestDeployedConfigurationIntegrationTest
{
        // class content goes here... 
}               
</pre></div></li>
<li>Add a field in the test class to inject the provider to able to initialize it. Example:
<div class="source">
<pre>public class TestDeployedConfigurationIntegrationTest
{

    /**
     * Mock Runtime directory provider.
     */
    @Resource
    RuntimeDirectoryProvider coreRuntimeDirectoryProvider;
 
}               
</pre></div></li>
<li>Initialize the mock providers. The mock providers are now defined and injected into the classes in the plugin application context. But as mocks they are not initialized. They will not return any values when invoked. To complete the initialization add a field to the integration test to get the mock injected into the integration test class and then complete initialization of the mock provider in the <tt>setup()</tt> method and/or individual test methods. <tt>Please notice:</tt> the providers should reset between each test method by invoking:
<div class="source">
<pre>@Before
public void setUp() throws Exception {

        // reset plugin provider
        EasyMock.reset(coreRuntimeDirectoryProvider);
        
        // more stuff here        
}       
</pre></div></li></ol></div></div>
<div class="section">
<h3>Inspect log files<a name="Inspect_log_files"></a></h3>
<p>If the projects doesn't define any <tt>log4j.properties&gt;&gt; in &lt;&lt;&lt;src/java/resources/log4.properties</tt> then the <tt>pineapple-test-utils</tt> project contains a log4j configuration file defined in the directory <tt>src/java/resources/log4.properties</tt> for use by dependent projects as part of their test configuration. </p>
<p>The test configuration configures Log4j to write log files to <tt>${user.home}/.pineapple/logs/pineapple-.log</tt>.</p></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2017.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\apt/usage\configuration-environment.apt at 03 Mar 2019
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20190303" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple Project &#x2013; Environment Configuration Reference</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script type="text/javascript" src="../js/apache-maven-fluido-1.7.min.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28287414-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Pineapple Project</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="../index.html" title="Pineapple Home">Pineapple Home</a><span class="divider">/</span></li>
    <li class="active ">Environment Configuration Reference</li>
        <li id="publishDate" class="pull-right">Last Published: 03 Mar 2019</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Overview</li>
    <li><a href="../index.html" title="Home"><span class="none"></span>Home</a></li>
    <li><a href="../usage/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../usage/index.html" title="For Users"><span class="none"></span>For Users</a></li>
    <li><a href="../development/index.html" title="For Developers"><span class="none"></span>For Developers</a></li>
    <li><a href="../usage/terms.html" title="Terms and Conditions"><span class="none"></span>Terms and Conditions</a></li>
      <li class="nav-header">Clients</li>
    <li><a href="../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application"><span class="none"></span>Standalone Web Application</a></li>
    <li><a href="../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application"><span class="none"></span>Deployable Web Application</a></li>
    <li><a href="../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin"><span class="none"></span>Maven Plugin</a></li>
      <li class="nav-header">Plugins</li>
    <li><a href="../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent"><span class="none"></span>Agent</a></li>
    <li><a href="../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution"><span class="none"></span>Composite Execution</a></li>
    <li><a href="../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH"><span class="none"></span>SSH</a></li>
    <li><a href="../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker"><span class="none"></span>Docker</a></li>
    <li><a href="../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test"><span class="none"></span>Infrastructure Test</a></li>
      <li class="nav-header">API's</li>
    <li><a href="../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST"><span class="none"></span>REST</a></li>
    <li><a href="../development/plugin-framework.html" title="Plugin Framework"><span class="none"></span>Plugin Framework</a></li>
      <li class="nav-header">Additional Information</li>
    <li><a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog"><span class="none"></span>The Pineapple Project Blog</a></li>
    <li><a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog"><span class="none"></span>Pineapple Exception Trail Blog</a></li>
      <li class="nav-header">Project Tools</li>
    <li><a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li><a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code"><span class="none"></span>Source Code</a></li>
    <li><a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker"><span class="none"></span>Issue Tracker</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
</ul>
          <hr />
          <div id="poweredBy">
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <div class="g-plusone" data-href="https://athrane.github.io/pineapple/" data-size="tall" ></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="Environment_Configuration_Reference"></a>Environment Configuration Reference</h2>
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Resource_overview">Resource overview</a></li>
<li><a href="#Security_credentials_overview">Security credentials overview</a></li>
<li><a href="#Environment_configuration_details">Environment configuration details </a></li>
<li><a href="#Wildcard_environment_for_resources">Wildcard environment for resources</a></li></ul>
<div class="section">
<h3><a name="Introduction"></a>Introduction</h3>
<div class="section">
<h4><a name="Purpose_of_environment_configuration"></a>Purpose of environment configuration</h4>
<p>The environment configuration defines a model of all the manageable entities which can be used by Pineapple, either as target for testing, information retrieval or configuration.</p></div>
<div class="section">
<h4><a name="Entities_defined_in_the_environment_configuration"></a>Entities defined in the environment configuration</h4>
<p>Two types of entities are defined in the environment configuration:</p>
<ul>
<li><b>Resources</b> - manageable entities.</li>
<li><b>Security Credentials</b> - security information to access resources.</li></ul></div>
<div class="section">
<h4><a name="The_environment_configuration_schema"></a>The environment configuration schema</h4>
<p>The resource and security credential are defined in the <b>environment configuration schema</b>. The schema defines the namespace <tt>http://pineapple.dev.java.net/ns/environment_1_0</tt> </p>
<p>For more information about environment configuration schema, refer to the <a href="/schemas.html">Schema location page.</a></p>
<div class="section">
<h5><a name="Element_and_attribute_qualification"></a>Element and attribute qualification </h5>
<p>The schema is defined with:</p>
<ul>
<li>elementFormDefault=&quot;qualified&quot; </li>
<li>attributeFormDefault=&quot;unqualified&quot;</li></ul>
<p>The environment configuration documents using the schema will only use a single namespace and hence there is no need for qualified attributes. </p></div></div>
<div class="section">
<h4><a name="Two_configuration_files_but_a_single_schema"></a>Two configuration files but a single schema</h4><img src="../images/runtime-directory-structure.png" alt="" />
<p>The environment configuration is split into the two files <tt>resources.xml</tt> and <tt>credentials.xml</tt>. Resources are defined in <tt>resources.xml</tt> and security credentials are defined in <tt>credentials.xml</tt>. The reason why the Pineapple uses two file for environment configuration is to decouple security information from resource definitions. So that security information in time can come in different and more protected forms than it is the case with Pineapple in its current incarnation. Both files must adhere to the same schema, so technically there is no problems with defining credentials in <tt>resources.xml</tt> and verse visa. Pineapple will ignore credentials defined in <tt>resources.xml</tt> and ignore resources defined in <tt>credentials.xml</tt>. </p></div></div>
<div class="section">
<h3><a name="Resource_overview"></a>Resource overview</h3>
<p>The notion of a resource is one of the three central concepts in Pineapple (plugins and modules being the other two). A resource is any manageable entity which is part of the JEE platform that the tool is used to manage. A resource can be anything as long as there can be written an API to interface the thing and manage it. Examples are: operating systems, FTP-servers, JEE containers, load balancers.. </p>
<div class="section">
<h4><a name="A_resource_is_defined_by_four_attributes"></a>A resource is defined by four attributes</h4>
<p>A resource is defined by four attributes:</p>
<ul>
<li><b>id:</b> identifies the resource within an environment and is used to reference the resource from modules. </li>
<li><b>credential-id-reference:</b> defines a reference to the security credential should be used to access the resource.</li>
<li><b>plugin-id:</b> Defines the plugin id of the plugin which implements functionality to interface the resource.</li>
<li><b>properties:</b> plugin specific properties to connect to the resource. </li></ul></div>
<div class="section">
<h4><a name="Resources_are_defined_in_resource.xml"></a>Resources are defined in <tt>resource.xml</tt></h4>
<p>Resources are by default defined in a file named <tt>resources.xml</tt> which must adhere to the <b>environment configuration schema</b> whose content is described in the details section below. The file is by default located in the directory <tt>${pineapple.home.dir}/conf</tt> which by default is resolved to <tt>${user.home}/.pineapple/conf</tt>. </p>
<p>If needed then consult the documentation for the specific Pineapple clients for information about changing the name and location of the file. </p></div>
<div class="section">
<h4><a name="Resource_are_grouped_by_environment"></a>Resource are grouped by environment </h4>
<p>The resources are grouped by environment as a similar resources often will exist in multiple computing environments. An example could be an administration server for a WebLogic domain, where multiple domains can exists for different purposes, i.e. development, test, QA and production. </p></div>
<div class="section">
<h4><a name="Purpose_of_a_resource"></a>Purpose of a resource</h4>
<p>Definition of a resource achieves these goals: </p>
<ul>
<li>The resource is usable from any modules.</li>
<li>Defines information to access the resource </li>
<li>Security information is decoupled from the resource</li>
<li>Decoupling of platform specific information from modules</li>
<li>The resource is bound to a plugin </li></ul>
<div class="section">
<h5><a name="The_resource_is_usable_from_modules"></a>The resource is usable from modules</h5>
<p>The <b>resource id</b> is a unique identification of the resource (in the environment it's defined in). The resource identifier is then accessible from any module (again on a per environment basis).</p>
<p><b>Example:</b> Definition of a resource which defines a WebLogic administration server (in a QA environment) with the id &quot;qa-deployment&quot; makes the the server accessible from any module which can use the server by referring to its resource id.</p></div>
<div class="section">
<h5><a name="Defines_information_to_access_the_resource"></a>Defines information to access the resource</h5>
<p>The <b>properties</b> defines additional properties which is used by Pineapple and the plugin to actually access the resource.</p>
<p><b>Example:</b> Some specific information is required to access the server described the example above. Information like protocols, URL's and ports. These bits of information are stored in the properties attribute of a resource.</p></div>
<div class="section">
<h5><a name="Security_information_is_decoupled_from_the_resource"></a>Security information is decoupled from the resource</h5>
<p>Not all information needed to access the resource is stored in the <b>properties</b> attribute. Security information is decoupled from the resource and stored in a separate security credential.</p>
<p>The <b>credential-id-reference</b> refers to the credential which contains the user and password used to access the resource. Security credentials is the other type of entity which is defined in the environment configuration and it is described below. </p></div>
<div class="section">
<h5><a name="Decoupling_of_platform_specific_information_from_modules"></a>Decoupling of platform specific information from modules </h5>
<p>Definition of the server in the example above results in a decoupling of platform specific information about servers ( URL's, ports, user/passwords) from the modules.</p>
<p>A module which contains an application can refer to its target administration server for deployment using only the resource id. All the specifics are defined in the referenced resource. </p>
<p>The result is that platform specific information about servers can be concentrated in one place - the environment configuration.</p></div>
<div class="section">
<h5><a name="The_resource_is_bound_to_a_plugin"></a>The resource is bound to a plugin </h5>
<p>The <b>plugin id</b> attribute in the resource binds the resource to the plugin. At runtime Pineapple uses the plugin id attribute to activate and delegate execution to the plugin with the module model as input.</p>
<p><b>Example:</b> The WebLogic administration server defined above must be mapped to a plugin which can handle operations on this kind of resource. The operations on the server could either be control of the server (start/stop), configuration of the server (using JMX or WLST) or deployment of applications (using JMX, JSR88 or a WebLogic specific tool like welogic.Deployer). Here are already ideas for six different plugins: weblogic-control, weblogic-config-with-jmx, weblogic-config-with-wlst, weblogic-deployment-with-jmx, weblogic-deployment-with-jsr88 and weblogic-deployment-with-wlsdeploy.</p>
<p>The task during definition of a resource is to select the appropriate plugin for the resource. In the example it would be appropriate to select one of the weblogic-deployment-with-XX plugins as the resource is used for deployment of applications.</p>
<p>The plugin attribute contains the plugin id for the used plugin. Plugins are identified by an id which is identical to the root Java package in which plugin is implemented. Pineapple uses the plugin id run time to activate the designated plugin and delegate all the actual work to the plugin. For information on plugin id's, refer to the <a href="../development/plugin-framework.html">Plugin framework reference.</a> </p></div></div></div>
<div class="section">
<h3><a name="Security_credentials_overview"></a>Security credentials overview</h3>
<p>A security credential defines security information used to access a resource.</p>
<div class="section">
<h4><a name="A_credential_is_defined_by_three_attributes"></a>A credential is defined by three attributes</h4>
<ul>
<li><b>id:</b> identifies the credential within an environment and is used to reference the credential from resources definition (described in the the previous section). </li>
<li><b>user:</b> defines user name used to access resource. </li>
<li><b>password:</b> defines password used to access resource.</li></ul></div>
<div class="section">
<h4><a name="Security_credentials_are_defined_in_credentials.xml"></a>Security credentials are defined in <tt>credentials.xml</tt></h4>
<p>Security credentials are by default defined in a file named <tt>credentials.xml</tt> which must adhere to the <b>environment configuration schema</b> whose content is is described in the details section below. The file is by default located in the directory <tt>${pineapple.home.dir}/conf</tt> which by default is resolved to <tt>${user.home}/.pineapple/conf</tt>.</p>
<p>If needed then consult the documentation for the specific Pineapple clients for information about changing the name and location of the file. </p></div>
<div class="section">
<h4><a name="Security_credentials_are_grouped_by_environment"></a>Security credentials are grouped by environment </h4>
<p>The credentials are grouped by environment as a similar resource often will in multiple computing environments hopefully requires different user/password to access the resource. </p></div>
<div class="section">
<h4><a name="Purpose_of_a_credential"></a>Purpose of a credential</h4>
<p>Definition of a credential achieves these goals: </p>
<ul>
<li>The credential is usable from any resource.</li>
<li>Security information is decoupled from the resource</li></ul>
<div class="section">
<h5><a name="The_credential_is_usable_from_any_resource"></a>The credential is usable from any resource</h5>
<p>The <b>id</b> is a unique identification of the credential (in the environment it's defined in). The credential identifier is then accessible from any resource (again on a per environment basis).</p>
<p>If the same security information is used to access different resources then it is possible for multiple resources to reference the same credential.</p>
<p><b>Example:</b> TODO: write..</p></div>
<div class="section">
<h5><a name="Security_information_is_decoupled_from_the_resource"></a>Security information is decoupled from the resource</h5>
<p>The security information is decoupled from the resources so that they in time can come in different and more protected forms than it is the case with Pineapple in its current incarnation. </p></div></div></div>
<div class="section">
<h3><a name="Environment_configuration_details"></a>Environment configuration details </h3>
<p>This section is a detailed description of how to define environment configuration files which adheres to the <b>environment configuration schema</b>.</p>
<div class="section">
<h4><a name="The_minimal_configuration_file"></a>The minimal configuration file</h4>
<p>The minimal file for <tt>resources.xml</tt> and <tt>credentials.xml</tt> looks like:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot; /&gt;

</pre></div>
<p>The <tt>?xml</tt> element defines an XML file with UTF-8 encoding. </p>
<p>The top level element for a environment configuration file is <tt>configuration</tt>. The element contains attributes which defines the used XML schema.</p>
<p>Usage of the environment configuration schema as the main schema is defined with the <tt>xmlns</tt> attribute:</p>
<div class="source"><pre class="prettyprint linenums">  xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0
</pre></div>
<p>Inclusion of the XML-Schema schema with namespace <tt>xsi</tt> is defined by:</p>
<div class="source"><pre class="prettyprint linenums">  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</pre></div>
<p>Specification of the schema location for the environment configuration schema is defined by:</p>
<div class="source"><pre class="prettyprint linenums">  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;
</pre></div></div>
<div class="section">
<h4><a name="Defining_environments"></a>Defining environments </h4>
<p>All resources and credentials are placed in a environment:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local-development&quot; description=&quot;my local development environment&quot; &gt;
      &lt;credentials/&gt;
      &lt;resources/&gt;
    &lt;/environment&gt;    
  &lt;/environments&gt;      
&lt;/configuration&gt; 
</pre></div>
<ul>
<li>The <tt>environments</tt> element is a container for <tt>environment</tt> elements.</li>
<li>The <tt>environment</tt> element defines a single environment. </li>
<li>The <tt>id</tt> attribute defines a unique identifier for the environment. It must be unique with in the file.</li>
<li>The <tt>description</tt> attribute describes the environment. The description is optional.</li>
<li>The <tt>credentials</tt> element is a container for credentials. Credentials is optional. </li>
<li>The <tt>resources</tt> element is a container for resources. Resources is optional. </li></ul>
<p>Example with six environments:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;

  &lt;environments&gt;
    &lt;environment id =&quot;Workstation&quot; /&gt;
    &lt;environment id=&quot;Development-1&quot; /&gt;
    &lt;environment id=&quot;Test-1&quot; /&gt;
    &lt;environment id=&quot;Test-2&quot; /&gt;    
    &lt;environment id=&quot;QA-1&quot; /&gt;
    &lt;environment id=&quot;Production-1&quot; &gt;
    &lt;environment id=&quot;Production-2&quot; &gt;
  &lt;/environments&gt;  
&lt;/configuration&gt; 
</pre></div></div>
<div class="section">
<h4><a name="Defining_resources"></a>Defining resources </h4>
<p>Resources are defined in the <b>resources</b> container element belonging to an environment: </p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;

  &lt;environments&gt;
    &lt;environment id=&quot;local-development&quot; description=&quot;my local development environment&quot; &gt;
      &lt;resources&gt;
        &lt;resource id=&quot;weblogic-deployment&quot; 
                  credential-id-ref=&quot;weblogic-deployment-credential&quot; 
                  plugin-id=&quot;com.alpha.pineapple.plugin.weblogic.deployment&quot; &gt;
                        &lt;property key=&quot;adminserver-protocol&quot; value=&quot;t3&quot; /&gt;
                        &lt;property key=&quot;adminserver-listenaddress&quot; value=&quot;127.0.0.1&quot; /&gt;
                        &lt;property key=&quot;adminserver-listenport&quot; value=&quot;7001&quot; /&gt;
       &lt;/resource&gt;              
      &lt;resources&gt;      
    &lt;/environment&gt;    
  &lt;/environments&gt;  
&lt;/configuration&gt; 
</pre></div>
<ul>
<li>The <tt>resource</tt> element defines a resource. </li>
<li>The <tt>id</tt> attribute defines a unique identifier for the resource. It must be unique within the environment. </li>
<li>The <tt>credential-id-ref</tt> attribute defines a references to the used credential. The attribute can be <b>optional</b> depending on whether the used plugin requires credentials to create a session. The referenced credential must be defined in the <tt>credentials.xml</tt> and in the same environment as the resource. </li>
<li>The <tt>plugin-id</tt> attributes defines the plugin id for the used plugin. </li>
<li>The <tt>property</tt> element defines a single property. Each property is defined with a <tt>key</tt> attribute and one <b>value</b> attribute. </li></ul></div>
<div class="section">
<h4><a name="Defining_security_credentials"></a>Defining security credentials </h4>
<p>Credentials are defined in the <b>credentials</b> container element belonging to an environment:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;

  &lt;environments&gt;
    &lt;environment id=&quot;local-development&quot; description=&quot;my local development environment&quot; &gt;
      &lt;credentials&gt;
        &lt;credential id=&quot;weblogic-deployment-credential&quot; user=&quot;weblogic&quot; password=&quot;weblogic&quot; /&gt;                          
      &lt;credentials&gt;      
    &lt;/environment&gt;    
  &lt;/environments&gt;  
&lt;/configuration&gt; 
</pre></div>
<ul>
<li>The <tt>credential</tt> element defines a security credential. </li>
<li>The <tt>identifier</tt> attribute defines a unique identifier for the credential. It must be unique within the environment. </li>
<li>The <tt>user</tt> attribute defines the user name.</li>
<li>The <tt>password</tt> attribute defines the password.</li></ul></div>
<div class="section">
<h4><a name="Referencing_credentials_from_resources"></a>Referencing credentials from resources</h4>
<p>Resources defined in <tt>resources.xml</tt> must reference a credential which is defined in <tt>credentials.xml</tt>:</p><img src="../images/resource-credential-ref.jpg" alt="" />
<p>Or shown in XML:</p>
<div class="source"><pre class="prettyprint linenums">&lt;!-- credential.xml: --&gt;

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;
  &lt;environments&gt;
    &lt;environment id=&quot;local-development&quot; description=&quot;my local development environment&quot; &gt;
      &lt;credentials&gt;
        &lt;credential id=&quot;weblogic-deployment-credential&quot; user=&quot;weblogic&quot; password=&quot;weblogic&quot; /&gt;                          
      &lt;credentials&gt;      
    &lt;/environment&gt;    
  &lt;/environments&gt;  
&lt;/configuration&gt; 

&lt;!-- resource.xml: --&gt;

&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;
  &lt;environments&gt;
    &lt;environment id=&quot;local-development&quot; description=&quot;my local development environment&quot; &gt;
      &lt;resources&gt;
        &lt;resource id=&quot;weblogic-deployment&quot; 
                  credential-id-ref=&quot;weblogic-deployment-credential&quot; 
                  plugin-id=&quot;com.alpha.pineapple.plugin.weblogic.deployment&quot; &gt;
                        &lt;property key=&quot;adminserver-protocol&quot; value=&quot;t3&quot; /&gt;
                        &lt;property key=&quot;adminserver-listenaddress&quot; value=&quot;127.0.0.1&quot; /&gt;
                        &lt;property key=&quot;adminserver-listenport&quot; value=&quot;7001&quot; /&gt;
       &lt;/resource&gt;              
      &lt;resources&gt;      
    &lt;/environment&gt;    
  &lt;/environments&gt;  
&lt;/configuration&gt; 
</pre></div>
<p>The <tt>resource</tt> in the <tt>resource.xml</tt> defines a references to a credential with the <tt>credential-id-ref</tt> attribute: </p>
<div class="source"><pre class="prettyprint linenums">  &lt;resource id=&quot;weblogic-deployment&quot; 
            credential-id-ref=&quot;weblogic-deployment-credential&quot; 
            plugin-id=&quot;com.alpha.pineapple.plugin.weblogic.deployment&quot; &gt;
</pre></div>
<p>The value of the <tt>credential-id-ref</tt> attribute must credential must be defined in the <tt>credentials.xml</tt> in the same environment as the resource is defined in. </p></div></div>
<div class="section">
<h3><a name="Wildcard_environment_for_resources"></a>Wildcard environment for resources</h3>
<p>The wildcard environment is supported for configuration of resources. It is not supported for credentials. </p>
<div class="section">
<h4><a name="Purposes_of_the_wildcard_environment"></a>Purposes of the wildcard environment</h4>
<p>The purposes are:</p>
<ul>
<li>Support for refactoring of common identical resource definitons into a single resource definiton.</li>
<li>Support usage of resources in non-existing environments. A resource defined in the wildcard environment is per definition defined for all (future) environments. </li></ul></div>
<div class="section">
<h4><a name="Name_of_the_wildcard_environment"></a>Name of the wildcard environment</h4>
<p>The wildcard environment for resources can be defined using the name <b>*</b>. </p></div>
<div class="section">
<h4><a name="How_a_resource_is_resolved_using_the_the_wildcardenvironment"></a>How a resource is resolved using the the wildcardenvironment</h4>
<p>The general idea for resolution of a resource <b>E.R</b> using the wildcard environment is that Pineapple will first try to resolve the resource <b>R</b> in enviromment <b>E</b>. If the resource doesn't exist then Pineapple will tryg to resolve the <b>R</b> in enviromment <b>*</b>. </p>
<p>Resolution rules:</p>
<table border="1" class="table table-striped">
<tr class="a">
<td align="left">Environment E</td>
<td align="left">Resource E.R</td>
<td align="left">Environment *</td>
<td align="left">Resource *.R</td>
<td align="left">Result</td></tr>
<tr class="b">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">Error: E.R not found</td></tr>
<tr class="a">
<td align="left">1</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">Error: E.R not found</td></tr>
<tr class="b">
<td align="left">1</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">0</td>
<td align="left">E.R</td></tr>
<tr class="a">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">Error: E.R not found</td></tr>
<tr class="b">
<td align="left">1</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">Error: E.R not found</td></tr>
<tr class="a">
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">0</td>
<td align="left">E.R</td></tr>
<tr class="b">
<td align="left">0</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">*.R</td></tr>
<tr class="a">
<td align="left">1</td>
<td align="left">0</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">*.R</td></tr>
<tr class="b">
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">1</td>
<td align="left">E.R</td></tr></table></div>
<div class="section">
<h4><a name="Example_of_using_the_wildcard_environment"></a>Example of using the wildcard environment</h4>
<p>This example shows a <tt>resources.xml</tt> with two environments each defining a resource named <tt>infrastructure-test</tt>:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;

  &lt;environments&gt;
    &lt;environment description=&quot;...&quot; id=&quot;windows-default&quot;&gt;
      &lt;resources&gt;
        &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.net&quot; id=&quot;infrastructure-test&quot;/&gt;
        ....
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;/environment&gt;
    &lt;environment description=&quot;...&quot; id=&quot;linux-default&quot;&gt;
      &lt;resources&gt;
        &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.net&quot; id=&quot;infrastructure-test&quot;/&gt;
        ....
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;  
&lt;/configuration&gt; 
</pre></div>
<p>The common resource definition <tt>infrastructure-test</tt> can be refactored into the wildcard environment. The result is that the resource <tt>infrastructure-test</tt> is supported all other environments (including in two defined environments):</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0 
                      http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;

  &lt;environments&gt;
    &lt;environment description=&quot;Wildcard environment.&quot; id=&quot;*&quot;&gt;
      &lt;resources&gt;
        &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.net&quot; id=&quot;infrastructure-test&quot;/&gt;
        ....
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;/environment&gt;

    &lt;environment description=&quot;...&quot; id=&quot;windows-default&quot;&gt;
      &lt;resources&gt;
        ....
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;/environment&gt;
    &lt;environment description=&quot;...&quot; id=&quot;linux-default&quot;&gt;
      &lt;resources&gt;
        ....
      &lt;/resource&gt;
    &lt;/resources&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt; 
</pre></div></div>
<div class="section">
<h4><a name="Resolution_of_credential_references_for_resources_defined_in_the_wildcard_environment"></a>Resolution of credential references for resources defined in the wildcard environment</h4>
<p>If a resource defined in the wildward environment defines a credential reference, through the <tt>credential-id-ref</tt> attribute then credental will be resolved to the credential defined in the environment which the operation is invoked with.</p></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
Copyright (C) 2007-2017 Allan Thrane Andersen. All Rights Reserved.
        </div>
      </div>
    </footer>
  </body>
</html>

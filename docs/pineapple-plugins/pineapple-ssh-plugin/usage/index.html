<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 30 Mar 2018
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20180330" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple SSH plugin - Usage</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple SSH plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple plugin projects">
        Pineapple plugin projects</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple SSH plugin">
        Pineapple SSH plugin</a>
        </li>
      <li class="divider ">/</li>
        <li class="">Usage</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 30 Mar 2018</li> 
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker">
          <i class="none"></i>
        Docker</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog">
          <i class="none"></i>
        The Pineapple Project Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://pineapple.java.net" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section">
<h2>Introduction<a name="Introduction"></a></h2>
<div class="section">
<h3>Overview<a name="Overview"></a></h3>
<div class="section">
<h4>Invoking the plugin<a name="Invoking_the_plugin"></a></h4>
<p>The plugin is invoked by the core component when the core component is used by one of the Pineapple clients. To trigger invocation by the core component the plugin needs to be configured. </p></div>
<div class="section">
<h4>Configuration<a name="Configuration"></a></h4><img src="../images/configure-plugin3.jpg" alt="" />
<p>Three steps are needed to configure the plugin:</p>
<ol style="list-style-type: decimal">
<li><a href="#Define_resource">Define resource:</a> Define resource which enables usage of the the plugin. The resource enables usage by:
<ul>
<li>Definition of connectivity information used by SSH to connect to the remote host modeled by the resource.</li>
<li>Definition of a mapping between the resource ID (e.g. some user defined key referenced from models) and the plugin ID (e.g. the Java package name which implements the plugin: <tt>com.alpha.pineapple.plugin.ssh</tt>.</li></ul></li>
<li><a href="#Define_credential">Define credential:</a> Define user name and password for the remote host in a credential. The security information in the credential is accessed from the resource and used for authentication when the remote host is accessed by the plugin.</li>
<li><a href="#Define_the_module_model">Define the module model</a> and add content to the model by defining a list SSH command which is executed at the remote host(s) targeted by the defined resource(s). The SSH command in the model are executed in sequence when the plugin is invoked with the model. The model is defined using the <a href="#The_ssh_plugin_schema">The SSH plugin schema</a>.</li></ol>
<p>For more info about configuration of plugins:</p>
<ul>
<li>For info about <b>resources</b> and <b>credentials</b> read the <a href="../../../usage/configuration-environment.html">Environment configuration</a> document.</li>
<li>For info about <b>modules</b> and <b>module models</b> read the <a href="../../../usage/configuration-modules.html">Modules configuration</a> document.</li></ul></div>
<div class="section">
<h4>Supported operations by the plugin <a name="Supported_operations_by_the_plugin"></a></h4>
<p>The plugin supports any operations.</p></div>
<div class="section">
<h4>Execution of an operation<a name="Execution_of_an_operation"></a></h4>
<p>When the plugin is invoked with an operation (e.g. <i>deploy-configuration</i>) and a module model which defines a list of SSH commands the plugin will iterate over the list and execute them in sequence. The supported commands are:</p>
<ul>
<li><b>Execute shell command at remote host</b>. A a single OS command or a shell script is execution at remote host.</li>
<li><b>Secure file copy to host</b>. A single file is copied from Pineapple to a remote host.</li>
<li><b>Test equals</b>. Extension of the execution shell command which executes a shell command or script and then validates whether the returned output from standard out is equal to the expected value.</li>
<li><b>Test contains</b>. Extension of the execution shell command which executes a shell command or script and then validates whether the returned output from standard out contains the expected value.</li></ul></div></div>
<div class="section">
<h3><a name="Define_resource">Define resource</a></h3>
<p>The purpose of defining a resource for this plugin is twofold:</p>
<ul>
<li>Define a mapping between the resource ID and the plugin ID. The resource ID is the user defined key which is referenced from module models which are targeting the resource. The plugin ID is the Java package name which implements the plugin: <tt>com.alpha.pineapple.plugin.ssh</tt>.</li>
<li>Define connectivity information used by the plugin to connect to the remote SSH daemon.</li></ul>
<p>To define a new resource, add a <tt>resource</tt> element to the target environment in the configuration file <tt>${pineapple.home.dir}/conf/resources.xml</tt>:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local&quot; &gt;
      &lt;resources&gt;
        &lt;resource id=&quot;vagrant-ssh&quot; credential-id-ref=&quot;vagrant-ssh&quot; plugin-id=&quot;com.alpha.pineapple.plugin.ssh&quot; /&gt;                  
          &lt;property value=&quot;127.0.0.1&quot; key=&quot;host&quot;/&gt;                              
          &lt;property value=&quot;2222&quot; key=&quot;port&quot;/&gt;                   
          &lt;property value=&quot;1000&quot; key=&quot;timeout&quot;/&gt;                                                                
        &lt;/resource&gt;
      &lt;/resources&gt;
    &lt;/environment&gt;                                                              
  &lt;/environments&gt;
&lt;/configuration&gt;        
</pre></div>
<p>The semantics of the resource element is:</p>
<div class="section">
<h4>The <tt>id</tt> attribute<a name="The_id_attribute"></a></h4>
<p>Identifies the resource uniquely in the current environment. This ID is referenced from models which intends to use the plugin. </p></div>
<div class="section">
<h4>The <tt>credential-ref-id</tt> attribute<a name="The_credential-ref-id_attribute"></a></h4>
<p>Id for the credential which is used to lookup user name and password for this resource.</p>
<p><b>Please notice:</b> The plugin only support authentication using user/password. Authentication using a certificate isn't supported (yet). </p></div>
<div class="section">
<h4>The <tt>plugin-id</tt> element<a name="The_plugin-id_element"></a></h4>
<p>The plugin ID defines the name of the Java package which implements the plugin. The plugin ID for this plugin is: <tt>com.alpha.pineapple.plugin.ssh</tt>.</p></div>
<div class="section">
<h4>The <tt>property</tt> attributes(s)<a name="The_property_attributess"></a></h4>
<p>Mandatory properties used by the plugin:</p>
<ul>
<li><tt>host</tt> - Host name of the host which is accessed using SSH.</li>
<li><tt>port</tt> - Port number on host used to access it with SSH.</li>
<li><tt>timeout</tt> - Connection timeout in milli seconds.</li></ul></div></div>
<div class="section">
<h3><a name="Define_credential">Define credential</a> </h3>
<p>A <b>credential</b> defines authentication information used to access a protected resource. The remote host accessed by using SSH is protected by a user-id/password. So a credential needs to be defined.</p>
<div class="section">
<h4>The credentials.xml file<a name="The_credentials.xml_file"></a></h4>
<p>The credentials are by default defined in the file <tt>${pineapple.home.dir}/conf/credentials.xml</tt>.</p>
<p>The credentials file is also defined using the <b>environment configuration schema</b> which defines the <tt>http://pineapple.dev.java.net/ns/environment_1_0</tt> namespace. Since credential files only contain elements from a single namespace all the elements and attributes are unqualified. The header and root element should be defined as (look in the <a href="../../../usage/configuration-environment.html">Environment configuration</a> document for more details):</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; /&gt;
</pre></div></div>
<div class="section">
<h4>Credentials are grouped by environment <a name="Credentials_are_grouped_by_environment"></a></h4>
<p>Credentials are grouped by environment the same way as resources are. If the required environment doesn't exists in the credential files, then define it, and add the credential to it. </p>
<p>Add a new <tt>environment</tt> sub element with the id <tt>linux-default</tt> to the <tt>environments</tt> element in the credential file: </p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local&quot; /&gt;          
  &lt;/environments&gt;       
&lt;/configuration&gt;
</pre></div></div>
<div class="section">
<h4>Definition of the credential<a name="Definition_of_the_credential"></a></h4>
<p>Add a new <tt>credential</tt> to the environment: </p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local&quot;&gt;
      &lt;credentials&gt;
        &lt;credential id=&quot;vagrant-ssh&quot; user=&quot;vagrant&quot; password=&quot;vagrant&quot; /&gt;
      &lt;/credentials&gt;
    &lt;/environment&gt;              
  &lt;/environments&gt;       
&lt;/configuration&gt;
</pre></div>
<p>The semantics of the credential elements is explained in the next sub sections:</p></div>
<div class="section">
<h4>The <tt>id</tt> attribute<a name="The_id_attribute"></a></h4>
<p>Id of the credential in the current environment. </p>
<p>Notice: The example id <tt>vagrant-ssh</tt> is referenced from the resource example defined in the previous section. </p></div>
<div class="section">
<h4>The <tt>user</tt> attribute<a name="The_user_attribute"></a></h4>
<p>User name used to authenticate the resource.</p>
<p>The user must be authenticated by the SSH server.</p></div>
<div class="section">
<h4>The <tt>password</tt> attribute<a name="The_password_attribute"></a></h4>
<p>Password used to authenticate the resource. </p></div></div>
<div class="section">
<h3><a name="Define_the_module_model">Define the module model</a></h3><img src="../images/module-directory-layout.jpg" alt="" />
<p>A <b><a href="../../../usage/configuration-modules.html">module</a></b> defines the input used by Pineapple to execute operations. A module is defined by a directory layout. Part of a module is the <b>model(s)</b> which defines what happens when the module is invoked. A model is put together by one or more sub models from different plugins. Each plugin defines its own schema for its particular model </p>
<div class="section">
<h4><a name="The_SSH_plugin_schema">The SSH plugin schema</a> </h4>
<p>This plugin defines a schema named <b>The SSH plugin schema</b> which defines the <tt>http://pineapple.dev.java.net/ns/plugin/ssh_1_0</tt> namespace. For more information about where the schema can be found, refer to the <a href="../../../usage/schemas-plugins.html">Schema locations for plugins page.</a> </p></div>
<div class="section">
<h4>Name and location of the the module model file <a name="Name_and_location_of_the_the_module_model_file"></a></h4>
<p>The list of SSH commands (e.g. copy-from and execute) which should be executed when the plugin is invoked are defined in the module model files which are located at <tt>${module-dir}/models/${environment}.xml</tt> where:</p>
<ul>
<li><tt>${module-dir}</tt> is the module root directory which identifies the module with a unique name and version. </li>
<li><tt>${environment}.xml</tt> is a module model file for a target environment, with <tt>${environment}</tt> substituted with the environment name, e.g. <tt>local.xml</tt> for an environment named <tt>local</tt>. </li></ul>
<p>If the model file doesn't exist for an environment where the SSH commands should be run, then create the model file and name it after the target environment, e.g. <tt>local.xml</tt> for an environment named <tt>local</tt>.</p></div>
<div class="section">
<h4>The module model configuration schema<a name="The_module_model_configuration_schema"></a></h4>
<p>Module model files are defined using the <b>module model configuration schema</b> which defines the <tt>http://pineapple.dev.java.net/ns/module_model_1_0</tt> namespace. Since module model files contain elements from multiple namespace all the elements and attributes should be qualified. The header and root element should be defined as (look in the <a href="../../../usage/configuration-modules.html">Modules configuration</a> document for more details):</p>
<p>This example shows definition of the minimal model file for <tt>local:</tt> </p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot; /&gt;
</pre></div></div>
<div class="section">
<h4>Adding the plugin schema to the model<a name="Adding_the_plugin_schema_to_the_model"></a></h4>
<p>The next step is to include the <a href="#The_ssh_plugin_schema">The SSH plugin schema</a> to get access to the entities defined by the schema:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; /&gt;
</pre></div>
<p>Now we have a minimal module model file with three namespaces:</p>
<ul>
<li><b>xs:</b> The basic XMLSchema schema which is only used in the root element of the document.</li>
<li><b>mmd:</b> The module model schema which is used to define the skeleton of a model file.</li>
<li><b>shp:</b> The SSH plugin schema which is used to define remote SSH commands.</li></ul></div>
<div class="section">
<h4>Defining the model which targets resources<a name="Defining_the_model_which_targets_resources"></a></h4>
<p>Add a new <tt>model</tt> with a <tt>target-resource</tt> attribute. The value of the <tt>target-resource</tt> should match the id of the resource which was defined previously in the section <a href="#Define_resource">Define resource</a>, e.g. <tt>vagrant-ssh</tt>:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;vagrant-ssh&quot;&gt;             
    &lt;mmd:content /&gt;                             
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div>
<p>Add content to the model which uses the plugin through the <tt>vagrant-ssh</tt> reference:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;vagrant-ssh&quot;&gt;             
    &lt;mmd:content&gt;
      &lt;shp:ssh&gt;
      &lt;/shp:ssh&gt;      
    &lt;/mmd:content&gt;                                                                                                                                                                              
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div></div></div>
<div class="section">
<h3><a name="Define_SSH_commands_in_the_module_model">Define SSH commands in the module model</a> </h3>
<p>Define a sequence of SSH commands which should be executed when Pineapple is invoked with the model:</p>
<div class="source">
<pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; /&gt;
  
  &lt;mmd:model target-resource=&quot;vagrant-ssh&quot;&gt;             
    &lt;mmd:content&gt;
      &lt;shp:ssh&gt;
        &lt;shp:copy-to source=&quot;modulepath:bin/apt.conf&quot; destination=&quot;/tmp/apt.conf&quot;/&gt;
        &lt;shp:execute command=&quot;sudo cp /tmp/apt.conf /etc/apt/apt.conf.d/99my-apt-conf&quot; /&gt;                               
        &lt;shp:execute command=&quot;sudo apt-get install unzip&quot; /&gt;
        &lt;shp:execute command=&quot;sudo apt-get install chkconfig&quot; /&gt;
                                        
        &lt;!-- total memory --&gt;
        &lt;shp:assert-contains command=&quot;grep MemTotal /proc/meminfo&quot; expected-value=&quot;132154992&quot; /&gt;

        &lt;!-- kernel swappiness --&gt;
        &lt;shp:assert-equals command=&quot;cat /proc/sys/vm/swappiness&quot; expected-value=&quot;0&quot; /&gt;
        
      &lt;/shp:ssh&gt;      
    &lt;/mmd:content&gt;                                                                                                                                                                              
  &lt;/mmd:model&gt;
&lt;/mmd:models&gt;    
</pre></div>
<div class="section">
<h4>copy-to command<a name="copy-to_command"></a></h4>
<p>The <tt>copy-to</tt> command copies a single file from the node where Pineapple is running to a remote host defined in the targeted resource.</p>
<p>The <tt>source</tt> attribute defines the path on the Pineapple node where the source file canbe found. The command support the usage of the <tt>modulepath:</tt> prefix in the source attribute which is resolved to the absolute directory where the model is defined.</p>
<p>The <tt>destination</tt> attribute defines the path on the remote host accessed with SSH where the file should be copied.</p>
<p>The optional <tt>chmod</tt> attribute defines the file permissions for the remote file. The value is the octal representation of OGW (e.g. owner, group and world).</p>
<p>The optional <tt>chown</tt> attribute defines the user ownership of the remote file. The value is the identifier (UID) of the new owner.</p>
<p>The optional <tt>chgrp</tt> attribute defines the the group ownership of the remote file. The value is the identifier (UID) of the new owner.</p>
<p>The optional <tt>substitute-variables</tt> boolean attribute defines if variable substitution should be peformed on the source file prior to copying it to the remote host. If enabled then Pineapple will validate that the file exists and that it isn't larger than 1 MB which is the default maximum size for files processed in this manner. The restriction is imposed to avoid processing large binary files by accident. The default value is <tt>true</tt>, e.g. variable substitution is enabled by default.</p></div>
<div class="section">
<h4>execute command <a name="execute_command"></a></h4>
<p>The <tt>execute</tt> command execute a single shell command on the remote host defined in the targeted resource.</p>
<p>The <tt>command</tt> attribute defines the shell command or script to execute. The output of the command in the form of standard out, error out and the shell return code are reported back. </p></div>
<div class="section">
<h4>assert-contains command <a name="assert-contains_command"></a></h4>
<p>The <tt>assert-contains</tt> command execute a single shell command on the remote host defined in the targeted resource. The returned output in standard out is then asserted with an expected value. If the output <b>contains</b> the expected value then the test succeeds.</p>
<p>The <tt>command</tt> attribute defines the shell command or script to execute. The output of the command in the form of standard out, error out and the shell return code are reported back. </p>
<p>The <tt>expected-value</tt> attribute defines the expected value which must be present in the returned standard out output for the test to succeed. </p></div>
<div class="section">
<h4>assert-equals command <a name="assert-equals_command"></a></h4>
<p>The <tt>assert-equals</tt> command execute a single shell command on the remote host defined in the targeted resource. The returned output in standard out is then asserted with an expected value. If the output <b>is equal</b> (e.g. a string comparison) to the expected value then the command succeeds.</p>
<p>The <tt>command</tt> attribute defines the shell command or script to execute. The output of the command in the form of standard out, error out and the shell return code are reported back. </p>
<p>The <tt>expected-value</tt> attribute defines the expected value which must be equal to the returned standard out output for the test to succeed. </p></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2018.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">










<html>
  <head>
    <title>Pineapple project - Management data design</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
          <meta name="author" content="Allan Thrane Andersen" />
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
      </head>
  <body class="composite">
    <!-- TODO: move this into JavaScript to patch the skin
      <div class="xright">  </div>
    -->
    <div id="leftColumn">
      <div id="navcolumn">
             <dl class=navgroup>
        <dt>Project tools</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../servlets/ProjectMemberList">Membership</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectNewsList">Announcements</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectForumView">Discussion forums</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectMailingListList">Mailing lists</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectDocumentList">Documents and files</a>
        </li>
              
    <li class="none">
              <a href="../source/browse/pineapple/">Subversion</a>
        </li>
              
    <li class="none">
              <a href="../servlets/ProjectIssues">Issue tracker</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Project overview</dt>
        <dd><ul>
              
    <li class="none">
              <a href="../index.html">Introduction</a>
        </li>
              
    <li class="none">
              <a href="../usage´/index.html">For users</a>
        </li>
              
    <li class="none">
              <a href="../development/index.html">For developers</a>
        </li>
              
    <li class="none">
              <a href="../faq.html">FAQ</a>
        </li>
          </ul></dd>
    </dl>
      <dl class=navgroup>
        <dt>Project Documentation</dt>
        <dd><ul>
              
                
              
      
              
        <li class="collapsed">
              <a href="../project-info.html">Project Information</a>
              </li>
              
                
              
      
              
        <li class="collapsed">
              <a href="../project-reports.html">Project Reports</a>
              </li>
          </ul></dd>
    </dl>
        </div>
      <script>
        // replace the java.net project tools with the navigation bar from Maven.
        // also get rid of "Get Involved" thingie too, while we are at it
        var pt = document.getElementById("projecttools");
        var nv = document.getElementById("navcolumn");
        
        while(pt.previousSibling!=null)
          pt.parentNode.removeChild(pt.previousSibling);
        
        pt.parentNode.insertBefore(nv,pt);
        pt.parentNode.removeChild(pt);
      </script>
      <script>
        // kill "description" h3 bar
        var ld = document.getElementById("longdescription");
        if(ld!=null) {
          for( n=ld.firstChild; n!=null; n=n.nextSibling ) {
            if(n.nodeType==1 && n.innerHTML=="Description" ) {
              n.parentNode.removeChild(n);
              break;
            }
          }
        }
      </script>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <div class="section"><h2>Management data</h2>
<p><i>TODO TODO: Correct APT rendering so that XML examples are shown correct, i.e. brackets are rendered instead of being interpreted as &lt;italic</i>
 text. Use PPT: alpha.pineapple-pineapple-unit-1.0.ppt as source for correct rendering.&gt;</p>
<p><b>Management data</b>
 defines the directory and file layout used by Pineapple to execute management operations.</p>
<p>Pineapple should at some point support two methods to access management data :</p>
<ul><li>Reading the exploded project data from a directory</li>
<li>Reading the packed project data from a Maven 2.x repository. (TODO: implement this) </li>
</ul>
<div class="section"><h3>Management directory layout</h3>
<div class="source"><pre>&lt;root&gt;
 |-- &lt;name&gt;-&lt;version&gt;
 |       |-- app
 |       |   `-- dummy.txt
 |       |-- plan
 |       `-- properties
  </pre>
</div>
<div class="section"><h4>Modules-root-directory</h4>
<p>Default location is: ${user.home}.pineapple\modules.</p>
</div>
<div class="section"><h4>Runtime root directory &lt;root&gt;</h4>
<ul><li>Can be anywhere.</li>
<li>Example locations:<ul><li>c:\deployments </li>
<li>${user.home}.pineapple\modules</li>
</ul>
</li>
</ul>
</div>
<div class="section"><h4>Management directory</h4>
<p><b>Location:</b>
 &lt;root&gt;/&lt;name&gt;-&lt;version&gt;</p>
<p>The name of the directory identifies the management data with a unique name and version.</p>
<p>Management data identifer: &lt;name&gt;-&lt;version&gt; </p>
</div>
<div class="section"><h4>Application binaries directory</h4>
<p><b>Location:</b>
 &lt;root&gt;/&lt;name&gt;-&lt;version&gt;/&lt;app&gt;</p>
<p>If the management data contains a deployable application binaries then they are placed in the <tt>app</tt>
 directory.</p>
<p>Examples of deployable application binaries are: WAR, JAR, EAR, RAR..</p>
<p>TODO: make reference to WebLogic split directory layout.</p>
</div>
<div class="section"><h4>Configuration file directory</h4>
<p><b>Location:</b>
 &lt;root&gt;/&lt;name&gt;-&lt;version&gt;/&lt;properties&gt; </p>
<p>The <tt>properties</tt>
 directory contains a configuration file for each environment where the management data should be used.</p>
<p>An <b>environment</b>
 is an computing environment within an organization. An example of environments could be development, test, AQ and production environments for a J2EE platform.</p>
<p>To support migration of an application from development, test, AQ and production the tool supports multiple configurations of the same application. </p>
<div class="section"><h5>Content of a configuration file</h5>
<p>Configuration files are stored as XML files.</p>
<p>TODO: describe to content of the property files...</p>
</div>
<div class="section"><h5>common.xml</h5>
<p>TODO: describe the requirement of a common.xml</p>
</div>
</div>
<div class="section"><h4>Deployment plan directory </h4>
<p><b>Location:</b>
 &lt;root&gt;/&lt;name&gt;-&lt;version&gt;/&lt;plan&gt;</p>
<p>If the project contains a deployable application binary which uses a deployment plan then the plans are placed in the <tt>plan</tt>
 directory.</p>
<p>TODO: make reference to WebLogic split directory layout. </p>
</div>
</div>
<div class="section"><h3>Configuration file layout </h3>
<p>Configuration file for a single environment where the PU should be used. Example:</p>
<div class="source"><pre>&lt;configuration&gt;
    &lt;environment&gt;
        &lt;identifier&gt;localdomain&lt;/identifier&gt;
        &lt;description&gt;Weblogic domain …&lt;/description&gt;
        &lt;resources&gt;
            &lt;resource identifier=&quot;wls-edit&quot; type=&quot;jmx&quot; &gt;        
                &lt;DomainMBean &gt;
                    &lt;Name&gt;localdomain&lt;/Name&gt; 
                    &lt;VirtualHostMBean&gt;
                        &lt;Name&gt;good-internal-vh&lt;/Name&gt; 
                    &lt;/VirtualHostMBean&gt;
                &lt;/DomainMBean&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;environment&gt;
&lt;/configuration&gt;        </pre>
</div>
<p><i>configuration</i>
:</p>
<ul><li>Root element given from Commons XMLConfiguration.</li>
</ul>
<p><i>configuration</i>
/<i>environment</i>
:</p>
<ul><li>Defines settings for a single environment.</li>
<li>A PUC only support definition of a single environment, as each environment will be defined in a separate configuration file.</li>
<li>Environment is identified by ../<i>environment</i>
/<i>identifier</i>
</li>
<li>Environment is described by ../<i>environment</i>
/<i>description</i>
</li>
<li>Settings for usage of specific resources are defined by elements ../<i>environment</i>
/<i>resources/&lt;resource</i>
<ul><li>A single resource is identified by the attributes identifier and type (TODO: change this to use elements instead)</li>
<li>Sub-elements for <i>resource</i>
 is specific to the type of resource.</li>
</ul>
</li>
</ul>
<p><i>configuration</i>
/<i>templates</i>
:</p>
<ul><li>Defines templates which is a facility for reuse of configuration data.</li>
<li>A template is defined by the element ../<i>templates</i>
/<i>template</i>
</li>
</ul>
</div>
<div class="section"><h3>Support for templates in PUC </h3>
<p>Templates is a mechanism to reuse configuration data in a PUC file.</p>
<p>A template is defined by ../<i>templates</i>
/<i>template</i>
</p>
<p>A template is identified by the attribute named identifer.</p>
<p>Templates are defined in the location which correspond to the XPath: /templates/templates[@identifer=’<i>name</i>
’] </p>
<p>The value of the attribute named identifier must be unique within the PUC.</p>
<p>Example:</p>
<div class="source"><pre>&lt;configuration&gt;
    &lt;templates&gt;
            &lt;template identifer=&quot;server-mbean-template&quot; &gt;
            &lt; content …..&gt;
        &lt;/template&gt;
    &lt;/templates&gt;
    &lt;environment&gt;
       …
             &lt;ServerMBean use-template=”server-mbean-template” &gt;
                  …
             &lt;/ServerMBean&gt;
    &lt;environment&gt;
&lt;/configuration&gt;</pre>
</div>
<p>A template can define arguments. The template values are inserted into the template body when the template is applied to an invoking element.</p>
<p>Definition of arguments:</p>
<ul><li>By adding the meta-data attribute named arguments to an <i>template</i>
 element.</li>
<li>The value of the attribute must be a comma separated list of arguments names.</li>
<li>The value of the arguments are substituted into the template body at run time when it is applied. </li>
</ul>
<p>Usage of arguments in the template body:</p>
<ul><li>The runtime values of arguments can be used as part of a computed value.</li>
</ul>
<p>Computed values:</p>
<ul><li>An element within a template body can use the meta data attribute <i>value</i>
 to instruct Pineapple that the value of the element should be computed when the template is applied.</li>
<li>The value of the attribute can be a combination of static text, any arguments defined by the template (used in any number and order, or not at all). </li>
<li>The name of an used argument in a computed value must be enclosed by $<a name="argument-name"><i>argument-name</i>
</a>
.</li>
<li>The element with the compute-value attribute should not be defined with an element value.</li>
</ul>
<p>The invoking element must supply a list of argument values. The argument value must match the argument names defined in the template:</p>
<ul><li>Each argument value are defined by an meta-data attribute name <i>template-name</i>
.<i>argument-name</i>
.</li>
<li>The template name is prefixed to enable usage of multiple templates from the same configuration element/node</li>
</ul>
<p>Example:</p>
<div class="source"><pre>&lt;configuration&gt;
    &lt;templates&gt;
            &lt;template identifier=&quot;server-mbean-template&quot; arguments=&quot;name,maxpostsize&quot;&gt;
            &lt;ServerMBean&gt;
                &lt;MaxMessageSize value=”${maxpostsize}” /&gt;              
            &lt;/ServerMBean&gt;
                &lt;ServerStartMBean&gt;
                        &lt;Name value=“${name}&quot; /&gt;
                        &lt;JavaVendor&gt;BEA&lt;/JavaVendor&gt;
            &lt;ServerStartMBean&gt;
        &lt;/template&gt;
    &lt;/templates&gt;
    &lt;environment&gt;
        &lt;identifier&gt;localdomain&lt;/identifier&gt;
        &lt;description&gt;Weblogic domain …&lt;/description&gt;
        &lt;resources&gt;
            &lt;resource identifier=&quot;wls-edit&quot; type=&quot;jmx&quot; &gt;        
                &lt;DomainMBean &gt;
                        &lt;ServerMBean
                                use-template=”server-mbean-template” 
                        server-mbean.name=”admserver&quot;
                        server-mbean.maxpostsize=&quot;100000&quot;&gt;
                        &lt;Name&gt;admserver&lt;/Name&gt; 
                    &lt;/ServerMBean&gt;
                &lt;/DomainMBean&gt;
            &lt;/resource&gt;
        &lt;/resources&gt;
    &lt;environment&gt;
&lt;/configuration&gt;</pre>
</div>
<p>Usage of nested templates is supported. A template can use another template as any other element.</p>
</div>
<div class="section"><h3>Definitions</h3>
<div class="section"><h4>Module</h4>
<ul><li>@deprecated</li>
<li>initially called: management data</li>
</ul>
</div>
<div class="section"><h4>Management data</h4>
<ul><li>@deprecated</li>
<li>initial term for: module </li>
<li>Unit of work for Pineapple. </li>
<li>Directory / file structure</li>
<li>Unique name and version </li>
<li>contains managed artifact, i.e. an application or configuration files to test/configure a computing environment.</li>
<li>contains all configuration need to manage the artifact</li>
<li>self contained packaged - but for security information.</li>
<li>add-on to a Maven project as an additional src/management</li>
<li>Maven project are configured to build a package which contains the management data (application + configuration).</li>
</ul>
</div>
<div class="section"><h4>Management data configuration</h4>
<ul><li>single configuration file within management data which configures and application with a computing environment.</li>
<li>located in: src/managment/properties/&lt;environment&gt;.xml</li>
</ul>
</div>
<div class="section"><h4>Management data identifer</h4>
<ul><li>indetifies an management data instance </li>
<li>syntax: &lt;name&gt;-&lt;version&gt; </li>
<li>can be be found in the name of the management directory which contain management data</li>
</ul>
</div>
<div class="section"><h4>Pineapple-Unit / PU </h4>
<ul><li>@deprecated</li>
<li>initial term for: management data</li>
<li>TODO: rename test-util classes </li>
<li>TODO: rename to: <b>management data</b>
 </li>
</ul>
</div>
<div class="section"><h4>Pineapple-Unit-Configuration / PUC</h4>
<ul><li>@deprecated</li>
<li>initial term for: management data configuration</li>
<li>TODO: rename test-util classes</li>
<li>TODO: rename to: <b>management data configuration file</b>
</li>
</ul>
</div>
<div class="section"><h4>Deployment directory</h4>
<ul><li>@deprecated</li>
<li>initial term for: Runtime root directory</li>
<li>TODO: remove this term from the manager-context. </li>
<li>TODO: rename to: <b>Runtime root directory</b>
 </li>
</ul>
</div>
<div class="section"><h4>Application</h4>
<ul><li>@deprecated</li>
<li>initial term for: management data identifier</li>
<li>TODO: rename to: <b>management data identifier</b>
 [] </li>
</ul>
</div>
</div>
</div>

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">&#169;  
          2008
    
          
  

  
  
  &nbsp;| Last Published: 04 Nov 2008
  &nbsp;| Version: 1.0-SNAPSHOT
</div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>

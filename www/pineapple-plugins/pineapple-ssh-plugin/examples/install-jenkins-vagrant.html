<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 18 Feb 2014
 | Rendered using Apache Maven Fluido Skin 1.3.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140218" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple SSH plugin - </title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.3.0.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.3.0.min.js"></script>

    
            </head>
        <body class="topBarDisabled">
          
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Pineapple SSH plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="../../../index.html" title="Pineapple Home">
        Pineapple Home</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../../" title="Pineapple plugin projects">
        Pineapple plugin projects</a>
        </li>
      <li class="divider ">/</li>
            <li class="">
                    <a href="../" title="Pineapple SSH plugin">
        Pineapple SSH plugin</a>
        </li>
      <li class="divider ">/</li>
        <li class=""></li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 18 Feb 2014</li> 
            
                            </ul>
      </div>

                  
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Project Overview</li>
                                
      <li>
    
                          <a href="../../../index.html" title="Home">
          <i class="none"></i>
        Home</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/installation.html" title="Installation">
          <i class="none"></i>
        Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/index.html" title="For Users">
          <i class="none"></i>
        For Users</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/index.html" title="For Developers">
          <i class="none"></i>
        For Developers</a>
            </li>
                  
      <li>
    
                          <a href="../../../usage/terms.html" title="Terms and Conditions">
          <i class="none"></i>
        Terms and Conditions</a>
            </li>
                              <li class="nav-header">Clients</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application">
          <i class="none"></i>
        Standalone Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application">
          <i class="none"></i>
        Deployable Web Application</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin">
          <i class="none"></i>
        Maven Plugin</a>
            </li>
                              <li class="nav-header">Plugins</li>
                                
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent">
          <i class="none"></i>
        Agent</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution">
          <i class="none"></i>
        Composite Execution</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH">
          <i class="none"></i>
        SSH</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test">
          <i class="none"></i>
        Infrastructure Test</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-wbem-plugin/index.html" title="WBEM">
          <i class="none"></i>
        WBEM</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-jrockit-installation-plugin/index.html" title="JRockit Installation">
          <i class="none"></i>
        JRockit Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-fusion-middleware-installation-plugin/index.html" title="Fusion Middleware Installation">
          <i class="none"></i>
        Fusion Middleware Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic Installation">
          <i class="none"></i>
        WebLogic Installation</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic Deployment">
          <i class="none"></i>
        WebLogic Deployment</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic Scripting Tool (WLST)">
          <i class="none"></i>
        WebLogic Scripting Tool (WLST)</a>
            </li>
                  
      <li>
    
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">
          <i class="none"></i>
        WebLogic JMX</a>
            </li>
                              <li class="nav-header">API's</li>
                                
      <li>
    
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST">
          <i class="none"></i>
        REST</a>
            </li>
                  
      <li>
    
                          <a href="../../../development/plugin-framework.html" title="Plugin Framework">
          <i class="none"></i>
        Plugin Framework</a>
            </li>
                              <li class="nav-header">Additional Information</li>
                                
      <li>
    
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Tool Blog">
          <i class="none"></i>
        The Pineapple Tool Blog</a>
            </li>
                  
      <li>
    
                          <a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog">
          <i class="none"></i>
        Pineapple Exception Trail Blog</a>
            </li>
                              <li class="nav-header">Project Tools</li>
                                
      <li>
    
                          <a href="http://java.net/projects/pineapple/downloads" class="externalLink" title="Downloads">
          <i class="none"></i>
        Downloads</a>
            </li>
                  
      <li>
    
                          <a href="http://java.net/projects/pineapple/sources/svn/show" class="externalLink" title="Source Code">
          <i class="none"></i>
        Source Code</a>
            </li>
                  
      <li>
    
                          <a href="http://java.net/jira/browse/PINEAPPLE" class="externalLink" title="Issue Tracker">
          <i class="none"></i>
        Issue Tracker</a>
            </li>
                  
      <li>
    
                          <a href="http://java.net/projects/pineapple/lists" class="externalLink" title="Mailing Lists">
          <i class="none"></i>
        Mailing Lists</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                        
      <li>
    
                          <a href="../project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
            </ul>
                
                    
                
          <hr class="divider" />

           <div id="poweredBy">
                   
    <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>

    
    <div class="g-plusone" data-href="https://pineapple.java.net" data-size="tall" ></div>

                   <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                        
        <div id="bodyColumn"  class="span10" >
                                  
            <div>
<pre> How-to: Install Jenkins on Linux
 ------
 Allan Thrane Andersen
 ------
 January 2014

~~ NOTE: For help with the syntax of this file, see:
~~ http://maven.apache.org/guides/mini/guide-apt-format.html

How-to: Install Java on Linux using a RPM package

* Overview

        This example illustrates how the SSH plugin can be used to install Jenkins 
        and configure a build job on Linux (CentOS).  
        
        Three steps are required to use the plugin:
        
        * Define resources for enabling usage of the plugin
        
        * Define credentials for authentication.        
                        
        * Define module.
        
        []
        
        Then we build a Vagrant box to use for the installation.  
        
        ..And finally Pineapple should be invoked to execute the module to install Jenkins at the targeted resources.
                
        For information about how to define resource, credentials and modules, 
        refer to the {{{../usage/index.html} plugin usage page.}}                               

** Part of the default configuration

        This example named &lt;&lt;&lt;ssh-009-ssh-install-jenkins-linux64&gt;&gt;&gt;, including all configuration files, is included in the 
        {{{../../../usage/default-configuration.html}default configuration}} which is created by Pineapple, 
        so there is no need to create it by hand.

* Define resources

        A resource defines a entity in a IT environment which is manageable by Pineapple
        through some protocol. In this example, the entity is a Linux OS and the used protocol 
        is SSH. One resource is defined for each Linux host where the YUM packages should be installed.
        
        In this example we will use the &lt;&lt;&lt;linux-vagrant&gt;&gt;&gt; environment defined as part of the 
        default configuration. The environment defines a network with three hosts: 

        * &lt;Node1&gt; with IP Address: 192.168.34.10

        * &lt;Node2&gt; with IP Address: 192.168.34.11
        
        * &lt;Node3&gt; with IP Address: 192.168.34.12
        
        [] 

        To enable SSH usage for these hosts, three resources are defined within the &lt;&lt;&lt;linux-vagrant&gt;&gt;&gt; environment
        in the resources file located at &lt;&lt;&lt;$\{user.home}/.pineapple/conf/resources.xml&gt;&gt;&gt;:     
        
+---    
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://pineapple.dev.java.net/ns/environment_1_0
    http://pineapple.dev.java.net/ns/environment_1_0.xsd&quot;&gt;
     
    &lt;environments&gt;
        &lt;environment description=&quot;Vagrant multi-machine Linux environment&quot; id=&quot;linux-vagrant&quot;&gt;
            &lt;resources&gt;
                &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.ssh&quot; credential-id-ref=&quot;ssh-node1&quot; id=&quot;ssh-node1&quot; &gt;
                    &lt;property value=&quot;192.168.34.10&quot; key=&quot;host&quot;/&gt;
                    &lt;property value=&quot;22&quot; key=&quot;port&quot;/&gt;
                    &lt;property value=&quot;1000&quot; key=&quot;timeout&quot;/&gt;
                &lt;/resource&gt;
                &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.ssh&quot; credential-id-ref=&quot;ssh-node2&quot; id=&quot;ssh-node2&quot; &gt;
                    &lt;property value=&quot;192.168.34.11&quot; key=&quot;host&quot;/&gt;
                    &lt;property value=&quot;22&quot; key=&quot;port&quot;/&gt;
                    &lt;property value=&quot;1000&quot; key=&quot;timeout&quot;/&gt;
                &lt;/resource&gt;
                &lt;resource plugin-id=&quot;com.alpha.pineapple.plugin.ssh&quot; credential-id-ref=&quot;ssh-node3&quot; id=&quot;ssh-node3&quot; &gt;
                    &lt;property value=&quot;192.168.34.12&quot; key=&quot;host&quot;/&gt;
                    &lt;property value=&quot;22&quot; key=&quot;port&quot;/&gt;
                    &lt;property value=&quot;1000&quot; key=&quot;timeout&quot;/&gt;
                &lt;/resource&gt;
            &lt;/resources&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;
&lt;/configuration&gt; 
+---

        Each resource is defined with a different ID and IP address. All other properties are identical. The role of the 
        attribute &lt;&lt;&lt;plugin-id&gt;&gt;&gt; is to bind the resource definition to the plugin code at runtime which implements
        the SSH plugin.

* Define credentials

        Since SSH requires authentication, each resource defines a reference to a credential. A credential defines the 
        user name and password used for authentication when a SSH session is created to a host.
        
        Three credentials are created within the &lt;&lt;&lt;linux-vagrant&gt;&gt;&gt; environment to support authentication. The credentials
        are defined in the credentials file located at &lt;&lt;&lt;$\{user.home\}/.pineapple/conf/credentials.xml&gt;&gt;&gt;: 
        
+---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot;&gt;
    &lt;environments&gt;
        &lt;environment description=&quot;Vagrant multi-machine Linux environment&quot; id=&quot;linux-vagrant&quot;&gt;
            &lt;credentials&gt;
                &lt;credential password=&quot;vagrant&quot; user=&quot;vagrant&quot; id=&quot;ssh-node1&quot;/&gt;
                &lt;credential password=&quot;vagrant&quot; user=&quot;vagrant&quot; id=&quot;ssh-node2&quot;/&gt;
                &lt;credential password=&quot;vagrant&quot; user=&quot;vagrant&quot; id=&quot;ssh-node3&quot;/&gt;
            &lt;/credentials&gt;
        &lt;/environment&gt;
    &lt;/environments&gt;     
&lt;/configuration&gt;
+---    

* Define module   

        A module defines input to Pineapple and consists in its minimal form of a single XML file containing a model:
        
[../images/module-directory-layout.jpg]          

        The directory: &lt;&lt;&lt;$\{user.home\}/.pineapple/modules/ssh-009-ssh-install-jenkins-linux64&gt;&gt;&gt; contains the module.
        The module in this example have the structure:

+---
ssh-002-install-yum-packages
 |
 +--- bin        
 |     +--- config.xml
 |     +--- hudson.tasks.Maven.xml 
 |     +--- pineapple-build.config.xml
 |
 +--- models     
 |     +--- linux-vagrant.xml
 +--- vagrant    
 |     +--- Vagrantfile
+---
        
        The model file named &lt;&lt;&lt;linux-vagrant.xml&gt;&gt;&gt; has the content:

+---
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:shp=&quot;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&quot; &gt;
    &lt;mmd:variables&gt;
                &lt;mmd:variable key=&quot;ci-usergroup&quot; value=&quot;jenkins:jenkins&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-temp-dir&quot; value=&quot;/tmp/jenkins&quot; /&gt;    

                &lt;mmd:variable key=&quot;base-jdk&quot; value=&quot;java-1.7.0-openjdk-devel&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-usergroup&quot; value=&quot;jenkins:jenkins&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-temp-dir&quot; value=&quot;/tmp/jenkins&quot; /&gt;    
                &lt;mmd:variable key=&quot;ci-home&quot; value=&quot;/var/lib/jenkins&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-jobs-home&quot; value=&quot;/var/lib/jenkins/jobs&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-config&quot; value=&quot;config.xml&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-maven-config&quot; value=&quot;hudson.tasks.Maven.xml&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-job&quot; value=&quot;pineapple-build&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-job-source-config&quot; value=&quot;pineapple-build.config.xml&quot; /&gt;
                &lt;mmd:variable key=&quot;ci-job-target-config&quot; value=&quot;config.xml&quot; /&gt;
    &lt;/mmd:variables&gt;
        
    &lt;mmd:model target-resource=&quot;ssh-node1&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Install JVM for CI server&quot; &gt;
            &lt;mmd:content&gt;
                        &lt;shp:ssh&gt;
                &lt;shp:execute command=&quot;sudo sudo yum --assumeyes install ${base-jdk}&quot; /&gt;
                        &lt;/shp:ssh&gt;                      
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;
    &lt;mmd:model target-resource=&quot;ssh-node1&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Install Jenkins packages&quot; &gt;
            &lt;mmd:content&gt;
                        &lt;shp:ssh&gt;
                &lt;shp:execute command=&quot;sudo wget -O /etc/yum.repos.d/jenkins.repo http://pkg.jenkins-ci.org/redhat/jenkins.repo&quot; /&gt;
                &lt;shp:execute command=&quot;sudo rpm --import http://pkg.jenkins-ci.org/redhat/jenkins-ci.org.key&quot; /&gt;
                &lt;shp:execute command=&quot;sudo yum --assumeyes install jenkins&quot; /&gt;                          
                        &lt;/shp:ssh&gt;                      
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;        
    &lt;mmd:model target-resource=&quot;ssh-node1&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Validate Jenkins user configuration&quot; &gt;
            &lt;mmd:content&gt;
                        &lt;shp:ssh&gt;
                &lt;shp:assert-contains command=&quot;getent group jenkins&quot; expected-value=&quot;jenkins:x:498:&quot; /&gt;
                &lt;shp:assert-contains command=&quot;id -gn jenkins&quot; expected-value=&quot;jenkins&quot; /&gt; &lt;!-- primary group for user jenkins --&gt;
                &lt;shp:assert-contains command=&quot;id -u jenkins&quot; expected-value=&quot;497&quot; /&gt; &lt;!-- id  for user jenkins --&gt;
                        &lt;/shp:ssh&gt;                      
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;        
    &lt;mmd:model target-resource=&quot;ssh-node1&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Install Jenkins job files&quot; &gt;
            &lt;mmd:content&gt;
                        &lt;shp:ssh&gt;
                &lt;shp:execute command=&quot;mkdir ${ci-temp-dir}&quot; /&gt;                          
                &lt;shp:execute command=&quot;sudo mkdir -p ${ci-jobs-home}/${ci-job}&quot; /&gt;                               
                &lt;shp:execute command=&quot;sudo chmod -R 775 ${ci-jobs-home}/${ci-job}&quot; /&gt;                           
                &lt;shp:execute command=&quot;sudo chown -R ${ci-usergroup} ${ci-jobs-home}/${ci-job}&quot; /&gt;                               

                                &lt;shp:copy-to source=&quot;modulepath:bin/${ci-config}&quot; destination=&quot;${ci-temp-dir}/${ci-config}&quot; chmod=&quot;775&quot; chown=&quot;497&quot; chgrp=&quot;498&quot; /&gt;                              
                &lt;shp:execute command=&quot;sudo chown ${ci-usergroup} ${ci-temp-dir}/${ci-config}&quot; /&gt;                                                                
                &lt;shp:execute command=&quot;sudo mv ${ci-temp-dir}/${ci-config} ${ci-home}/${ci-config}&quot; /&gt;                                                           

                                &lt;shp:copy-to source=&quot;modulepath:bin/${ci-maven-config}&quot; destination=&quot;${ci-temp-dir}/${ci-maven-config}&quot; chmod=&quot;775&quot; /&gt;
                &lt;shp:execute command=&quot;sudo chown ${ci-usergroup} ${ci-temp-dir}/${ci-maven-config}&quot; /&gt;                                                          
                &lt;shp:execute command=&quot;sudo mv ${ci-temp-dir}/${ci-maven-config} ${ci-home}/${ci-maven-config}&quot; /&gt;                                                               
                                                                
                                &lt;shp:copy-to source=&quot;modulepath:bin/${ci-job-source-config}&quot; destination=&quot;${ci-temp-dir}/${ci-job-source-config}&quot; chmod=&quot;775&quot; /&gt;
                &lt;shp:execute command=&quot;sudo chown ${ci-usergroup} ${ci-temp-dir}/${ci-job-source-config}&quot; /&gt;                                                             
                &lt;shp:execute command=&quot;sudo mv ${ci-temp-dir}/${ci-job-source-config} ${ci-jobs-home}/${ci-job}/${ci-job-target-config}&quot; /&gt;                                                              

                &lt;shp:execute command=&quot;rmdir ${ci-temp-dir}&quot; /&gt;                                                          
                        &lt;/shp:ssh&gt;                      
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;
    &lt;mmd:model target-resource=&quot;ssh-node1&quot; target-operation=&quot;deploy-configuration&quot; description=&quot;Start Jenkins&quot; &gt;
            &lt;mmd:content&gt;
                        &lt;shp:ssh&gt;
                                &lt;shp:execute command=&quot;sudo service jenkins start&quot; /&gt;            
                        &lt;/shp:ssh&gt;                      
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;        
&lt;/mmd:models&gt;
+---    

** The configuration details

        Two schema are used in the model file. The &lt;&lt;&lt;http://pineapple.dev.java.net/ns/module_model_1_0&gt;&gt;&gt; is used
        to define the namespace &lt;&lt;&lt;mmd&gt;&gt;&gt; which defines the general infrastructure for models. The 
        &lt;&lt;&lt;http://pineapple.dev.java.net/ns/plugin/ssh_1_0&gt;&gt;&gt; schema is used to define the namespace 
        &lt;&lt;&lt;shp&gt;&gt;&gt; which is used to define the model for the SSH plugin. Since multiple schemas are used 
        to define the model file, the elements are qualified.

        Initially in the model a set of variables are defined. The variables areare referenced from the 
        remaining part of the model file.  
         
        The &lt;&lt;&lt;target-resource&gt;&gt;&gt; attribute defines a reference to the resource which is targeted when the 
        model executed. In this case, the value &lt;&lt;&lt;ssh-node1&gt;&gt;&gt; targets the model to a single resources, 
        e.g. &lt;&lt;&lt;ssh-node1&gt;&gt;&gt;. The two other nodes in the &lt;&lt;&lt;linux-vagrant&gt;&gt;&gt; environment isn't used in this example. 

        The model file is divided into five sub-models, which performs the tasks (can also be read from the mode
        &lt;description&gt; attribute):
        
                * &lt;&lt;Install JVM for CI server&gt;&gt;. The JDK package with the postfix &quot;devel&quot; is installed to allow for 
                the usage of the JDK from build jobs in Jenkins. An alternative would be to configuration Jenkins 
                to download the JDK from  Oracle.   
                
                * &lt;&lt;Install Jenkins packages&gt;&gt;.
                
                * &lt;&lt;Validate Jenkins user configuration&gt;&gt;. Its validate that the Jenkins packages create the &lt;&lt;&lt;jenkins&gt;&gt;&gt;
                user and group with the expected ID's.
                
                * &lt;&lt;Install Jenkins job files&gt;&gt;. The main Jenkins configuration file &lt;&lt;&lt;config.xml&gt;&gt;&gt; is installed on
                the server in the Jenkins configuration directory at &lt;&lt;&lt;/var/lib/jenkins&gt;&gt;&gt;. The Maven configuration
                file &lt;&lt;&lt;hudson.tasks.Maven.xml&gt;&gt;&gt; is alos installed in &lt;&lt;&lt;/var/lib/jenkins&gt;&gt;&gt;. Finally, a build job
                file is installed in &lt;&lt;&lt;/var/lib/jenkins/jobs&gt;&gt;&gt;.
                
                * &lt;&lt;Start Jenkins&gt;&gt;. Starts Jenkins as an OS service.
                
                []

        The &lt;&lt;&lt;target-operation&gt;&gt;&gt; attribute is used to restrict that the sub-models are only executed when Pineapple
        is invoked with the &lt;deploy-configuration&gt; operation. The purpose is to allow for the definition of a set
        of sub-models which only responds to the &lt;undeploy-configuration&gt; which implements the inverse semantics,
        e.g. uninstalls Jenkins from the target server.   

        Finally, the execute commands in the models is executed using sudo. The requirement for sudo depends on 
        the privileges of the user used by the SSH plugin to connect to a given host. The users was defined in 
        credentials file in the previous section.

* Build a Vagrant box

        [[1]] Get and install VirtualBox and Vagrant.
        
        [[2]] Create a Vagrant project directory &lt;&lt;&lt;jenkins-ci&gt;&gt;&gt;.
        
        [[3]] Copy the Vagrant configuration file &lt;&lt;&lt;Vagrantfile&gt;&gt;&gt; located in the &lt;&lt;&lt;vagrant&gt;&gt;&gt; directory within the 
        model to the Vagrant project directory.

+---
# -*- mode: ruby -*-
# vi: set ft=ruby :

BOX_NAME = ENV.fetch(&quot;BOX_NAME&quot;, &quot;pineapple-box&quot;) 
BOX_URI = ENV.fetch(&quot;BOX_URI&quot;, &quot;http://puppet-vagrant-boxes.puppetlabs.com/centos-65-x64-virtualbox-puppet.box&quot;) 
BOX_IP = ENV.fetch(&quot;BOX_IP&quot;, &quot;192.168.34.10&quot;) 
BOX_MEM = ENV.fetch(&quot;BOX_MEM&quot;, &quot;2048&quot;) 
BOX_CPUS = ENV.fetch(&quot;BOX_CPUS&quot;, &quot;2&quot;) 

VAGRANTFILE_API_VERSION = &quot;2&quot;

Vagrant.configure(VAGRANTFILE_API_VERSION) do |config|

        # virtual box provider specific settings
        config.vm.provider :virtualbox do |vb|                                  
                vb.customize [&quot;modifyvm&quot;, :id, &quot;--ioapic&quot;, &quot;on&quot;]    
                vb.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, BOX_MEM]    
                vb.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, BOX_CPUS]      
        end     

        config.vm.define :pineapple_ci do |ci_config|
                ci_config.vm.box = BOX_NAME    
                ci_config.vm.box_url = BOX_URI    
                ci_config.vm.network &quot;private_network&quot;, ip: BOX_IP      
        end
                
end     
+---    
        
        [[4]] Open a prompt, CD into the Vagrant project directory and create the box with: &lt;&lt;&lt;vagrant up&gt;&gt;&gt;. It
        will download a CentOS 65 image and start the VM with the IP address 192.168.34.10.
        
        [] 
        
                                 
* Invoke Pineapple to install Jenkins

        Start your Pineapple client of choice:
        
        * Select the modules named &lt;&lt;ssh-009-ssh-install-jenkins-linux64&gt;&gt;
        
        * Select the &lt;&lt;linux-vagrant&gt;&gt; model.
        
        * Invoke the &lt;&lt;deploy-configuration&gt;&gt; operation to install Jenkins.     
        
        []

* Start build job

        * Access Jenkins at: http://192.168.34.10:8080
        
        * Select the installed job &lt;pineapple-build&gt; and build it.      



</pre></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
              <div class="row span12">Copyright &copy;                   2014.
          All Rights Reserved.      
                    
      </div>

                          
        
                </div>
    </footer>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jun 21, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>How-to: Deploy a web application using the WebLogic deployment plugin</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20120621" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<script type="text/javascript">var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-28287414-1']);
			  _gaq.push(['_trackPageview']);
			
			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();</script>
                      
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Pineapple WebLogic deployment plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 21 Jun 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                          |                           <a href="../../../index.html" title="Pineapple home">Pineapple home</a>
        &gt;
                          <a href="../../" title="Pineapple modules">Pineapple modules</a>
        &gt;
                          <a href="../" title="Pineapple WebLogic deployment plugin">Pineapple WebLogic deployment plugin</a>
        &gt;
    How-to: Deploy a web application using the WebLogic deployment plugin
              </div>
            <div class="xright">        
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Project overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/installation.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/index.html" title="For users">For users</a>
            </li>
                  <li class="none">
                          <a href="../../../development/index.html" title="For developers">For developers</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/terms.html" title="Terms and Conditions">Terms and Conditions</a>
            </li>
          </ul>
                       <h5>Clients</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone web client">Standalone web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable web client">Deployable web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-gui-release/index.html" title="Swing client">Swing client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven plugin">Maven plugin</a>
            </li>
          </ul>
                       <h5>Plugins</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure test">Infrastructure test</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-wbem-plugin/index.html" title="WBEM">WBEM</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-jrockit-installation-plugin/index.html" title="JRockit installation">JRockit installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic installation">WebLogic installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic deployment">WebLogic deployment</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic scripting tool (WLST)">WebLogic scripting tool (WLST)</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">WebLogic JMX</a>
            </li>
          </ul>
                       <h5>Additional information</h5>
                  <ul>
                  <li class="none">
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Blog">The Pineapple Blog</a>
            </li>
          </ul>
                       <h5>Project tools</h5>
                  <ul>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/downloads" class="externalLink" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/sources/svn/show" class="externalLink" title="Source Code">Source Code</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/jira/browse/PINEAPPLE" class="externalLink" title="Issue tracker">Issue tracker</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/lists" class="externalLink" title="Mailing lists">Mailing lists</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section"><h2>How-to: Deploy a web application using the WebLogic deployment plugin<a name="How-to:_Deploy_a_web_application_using_the_WebLogic_deployment_plugin"></a></h2><div class="section"><h3>Requirements<a name="Requirements"></a></h3><p>The example requires these preconditions to be run:</p><ul><li><a href="../../../usage/configure-maven-project.html"> Configure a Maven 2.0 project to build a Pineapple module.</a> </li><li>Install BEA WebLogic 9.2+ and create a domain named <tt>localdomain</tt> with a administration server which listens on <tt>localhost</tt> port <tt>7001</tt>. </li></ul></div><div class="section"><h3>Overview<a name="Overview"></a></h3><p>Three steps are needed to configure the plugin to work:</p><ul><li>Define <b>resource</b> which defines access to the WebLogic administration server.</li><li>Define <b>credential</b> which contains username and password to access the WebLogic administration server.</li><li>Add deployment configuration to the Pineapple <b>module</b> which defines how and where the application should be deployed.</li></ul></div><div class="section"><h3>Define resource<a name="Define_resource"></a></h3><p>A <b>resource</b> defines how a managed resource is accessed in a computing environment. The resource in this case is a WebLogic administration server used for deployment and undeployment.</p><p>The resources are defined in the file <tt>${user.home}/.pineapple/conf/resources.xml</tt>. </p><p>The first step is define an environment in the <tt>resources.xml</tt> file. </p><p>Add a new <tt>environment</tt> named <b>localdomain</b> to the <tt>environments</tt> section with an empty <tt>resources</tt> element.</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;resources/&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>Add a new <tt>resource</tt> for the deployment plugin to <tt>localdomain</tt> environment which looks like: </p><div class="source"><pre>&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;resources&gt;
        &lt;resource&gt;
          &lt;identifier&gt;weblogic-deployment&lt;/identifier&gt;
          &lt;credential-identifier&gt;weblogic-deployment-credential&lt;/credential-identifier&gt;
          &lt;factory&gt;
            com.alpha.pineapple.plugin.weblogic.deployment.WeblogicDeploymentFactoryImpl
          &lt;/factory&gt;
          &lt;properties&gt;
            &lt;adminserver-protocol&gt;t3&lt;/adminserver-protocol&gt;                                     
            &lt;adminserver-listenaddress&gt;127.0.0.1&lt;/adminserver-listenaddress&gt;
            &lt;adminserver-listenport&gt;7001&lt;/adminserver-listenport&gt;                                       
          &lt;/properties&gt;
        &lt;/resource&gt;                                                                     
      &lt;/resources&gt;
    &lt;/environment&gt;              
  &lt;/environments&gt;
&lt;/configuration&gt;                                        
</pre></div><div class="section"><h4>Meaning of the elements in the added resource <a name="Meaning_of_the_elements_in_the_added_resource"></a></h4><ul><li>The <tt>identifier</tt> element identifies the resource in the <tt>localdomain</tt> so that the resource can be referenced from modules.</li><li>The <tt>credential-identifier</tt> identifier for the credential which is used to lookup user name and password for this resource.</li><li>The <tt>factory</tt> element defines the factory class for the plugin. The factory class for the <b>WebLogic deployment plugin</b> is: <tt>com.alpha.pineapple.plugin.weblogic.deployment.WeblogicDeploymentFactoryImpl</tt>.</li><li>The <tt>properties</tt> element defines required properties used by the deployment plugin:<ul><li><tt>adminserver-protocol</tt> - defines the protocol to access the WebLogic administration server. In this example <tt>t3</tt> is used. </li><li><tt>adminserver-listenaddress</tt> - defines the server listen address for the WebLogic administration server for the domain that deployments should be targeted to. In this example <tt>127.0.0.1</tt> is used.</li><li><tt>adminserver-listenport</tt> - defines the port that the administration server listens on. In this example <tt>7001</tt> is used.</li></ul></li></ul></div><div class="section"><h4>Summary of the example <a name="Summary_of_the_example"></a></h4><p>The result of defining the resource in the example</p><ul><li>A resource named <tt>weblogic-deployment</tt> is defined in the <tt>localdomain</tt> environment.</li><li>The <tt>factory</tt> element of the resource defines that the WebLogic deployment plugin should be used at run time by Pineapple to access the resource.</li><li>The resource defines how to access a WebLogic server instance by providing connection properties (protocol, port and host name). The connection properties are used by the WebLogic deployment plugin to connect to the server.</li><li>The <tt>credential identifier</tt> element of the resource defines which credential is used to provide security information for the resource to authenticate itself with the WebLogic server. Definition of credentials is described in the next section. </li></ul></div></div><div class="section"><h3>Define credential <a name="Define_credential"></a></h3><p>A <b>credential</b> defines authentication information used to access a protected resource. A WebLogic administration server is a protected resource which is protected by a user-id/password. So a credential needs to be defined.</p><p>The credentials are defined in the file <tt>${user.home}/.pineapple/conf/credentials.xml</tt>.</p><p>Credentials are grouped by environment the same way as resources are. The first step is define an environment in the <tt>credentials.xml</tt> file. </p><p>Add a new <tt>environment</tt> named <b>localdomain</b> to the <tt>environments</tt> section with an empty <tt>credentials</tt> element.</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;credentials&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>Add a new <tt>credential</tt> for the deployment plugin to <tt>localdomain</tt> environment which looks like: </p><div class="source"><pre>&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;credentials&gt;      
        &lt;credential&gt;
          &lt;identifier&gt;weblogic-deployment-credential&lt;/identifier&gt;
          &lt;user&gt;weblogic&lt;/user&gt;
          &lt;password&gt;weblogic&lt;/password&gt;
        &lt;/credential&gt;
      &lt;/credentials&gt;
    &lt;/environment&gt;              
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p><b>Notice:</b> The identifier <tt>weblogic-deployment-credential</tt> is referenced from the resource definition in the <tt>resources.xml</tt> file.</p><div class="section"><h4>Summary of the example <a name="Summary_of_the_example"></a></h4><p>The result of defining the credential in the example is:</p><ul><li>A credential named <tt>weblogic-deployment-credential</tt> is defined in the <tt>localdomain</tt> environment.</li><li>The credential uses user name/password for authentication. </li><li>The identifier <tt>weblogic-deployment-credential</tt> is referenced from the resource definition in the <tt>resources.xml</tt> file. The sematics of the reference is that the resource will use user name/password in the referenced credential to authentication.</li></ul></div></div><div class="section"><h3>Add deployment configuration to Pineapple module<a name="Add_deployment_configuration_to_Pineapple_module"></a></h3><p>A Pineapple module defines what the different plugins should do in a set of target environments. In the context of the WebLogic deployment plugin, a module should contain the application which should be deployed and information about where the application should be deployed.</p><p>Deployment information is defined in model files: <tt>&lt;module-data-dir&gt;/properties/&lt;environment&gt;.xml</tt> where:</p><ul><li><tt>&lt;module-data-dir</tt>&gt; is the module root directory which identifies the module with a unique name and version. </li><li><tt>&lt;environment&gt;.xml</tt> is a model file for a target environment, with <tt>&lt;environment</tt>&gt; substituted with the environment name, e.g. <tt>localdomain.xml</tt> for an environment named <tt>localdomain</tt>. In the context of the deployment plugin each model contains deployment targets for the different environments that the an application is deployed to.</li></ul><div class="section"><h4>Location of the application in the module<a name="Location_of_the_application_in_the_module"></a></h4><p>The Maven project is configured to create a ZIP file or an exploded directory structure which contains the module. The application can be found in the directory <tt>&lt;module-data-dir&gt;/app</tt>. The deployment plugin will look for here for the application to deploy. </p></div><div class="section"><h4>Specifying deployment targets <a name="Specifying_deployment_targets"></a></h4><p>If the model file doesn't exist for an environment where the application should be deployed to, then create the file and name it after the target environment, e.g. <tt>localdomain.xml</tt> for an environment named <tt>localdomain</tt>. Then add a <tt>environment</tt> definition to the model file.</p><p>This example shows the basic model file for a <tt>localdomain</tt> environment which is stored in the file <tt>localdomain.xml:</tt> </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environment&gt;
    &lt;description&gt;Deployment to the localdomain environment.&lt;/description&gt;
    &lt;resources/&gt;
    &lt;/resources&gt;    
  &lt;/environment&gt;
&lt;/configuration&gt;    
</pre></div><p>Add a new <tt>resource</tt> to file:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environment&gt;
    &lt;description&gt;Deployment to the localdomain environment.&lt;/description&gt;
    &lt;resources&gt;
      &lt;resource identifier=&quot;weblogic-deployment&quot; &gt;              
        &lt;targets&gt;admserver&lt;/targets&gt;
      &lt;/resource&gt;       
    &lt;/resources&gt;    
  &lt;/environment&gt;
&lt;/configuration&gt;    
</pre></div></div><div class="section"><h4>Summary of the example <a name="Summary_of_the_example"></a></h4><p>The result of defining the model file in the example is:</p><ul><li>A model file for deployment in the <tt>localdomain</tt> environment is defined.</li><li>The application is targeted for deployment to the <tt>admserver</tt>. </li></ul></div></div><div class="section"><h3>Using Pineapple to deploy the application<a name="Using_Pineapple_to_deploy_the_application"></a></h3><p>Deploy the application by executing the following command:</p><div class="source"><pre>mvn com.alpha.pineapple:pineapple-maven-plugin:1.0-SNAPSHOT:install-app -Denvironment=localdomain
</pre></div></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2012.
          All Rights Reserved.      
                
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>

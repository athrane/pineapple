<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\apt/examples\clone-repository.apt at 09 Jun 2019
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20190609" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Pineapple Git plugin &#x2013; How-to: Clone remote repository</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script type="text/javascript" src="../js/apache-maven-fluido-1.7.min.js"></script>
    <!-- Google Analytics -->
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-28287414-1']);
      _gaq.push(['_trackPageview']);
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><div id="bannerLeft"><h2>Pineapple Git plugin</h2>
</div>
</div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class=""><a href="../../../index.html" title="Pineapple Home">Pineapple Home</a><span class="divider">/</span></li>
      <li class=""><a href="../../index.html" title="Pineapple plugin projects">Pineapple plugin projects</a><span class="divider">/</span></li>
      <li class=""><a href="../index.html" title="Pineapple Git plugin">Pineapple Git plugin</a><span class="divider">/</span></li>
    <li class="active ">How-to: Clone remote repository</li>
        <li id="publishDate" class="pull-right">Last Published: 09 Jun 2019</li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Project Overview</li>
    <li><a href="../../../index.html" title="Home"><span class="none"></span>Home</a></li>
    <li><a href="../../../usage/installation.html" title="Installation"><span class="none"></span>Installation</a></li>
    <li><a href="../../../usage/index.html" title="For Users"><span class="none"></span>For Users</a></li>
    <li><a href="../../../development/index.html" title="For Developers"><span class="none"></span>For Developers</a></li>
    <li><a href="../../../usage/terms.html" title="Terms and Conditions"><span class="none"></span>Terms and Conditions</a></li>
      <li class="nav-header">Clients</li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone Web Application"><span class="none"></span>Standalone Web Application</a></li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable Web Application"><span class="none"></span>Deployable Web Application</a></li>
    <li><a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven Plugin"><span class="none"></span>Maven Plugin</a></li>
      <li class="nav-header">Plugins</li>
    <li><a href="../../../pineapple-plugins/pineapple-agent-plugin/index.html" title="Agent"><span class="none"></span>Agent</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-composite-execution-plugin/index.html" title="Composite Execution"><span class="none"></span>Composite Execution</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-ssh-plugin/index.html" title="SSH"><span class="none"></span>SSH</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-git-plugin/index.html" title="Git"><span class="none"></span>Git</a></li>
    <li><a href="../../../pineapple-plugins/pineapple-docker-plugin/index.html" title="Docker"><span class="none"></span>Docker</a></li>
    <li><a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure Test"><span class="none"></span>Infrastructure Test</a></li>
      <li class="nav-header">API's</li>
    <li><a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/usage/rest.html" title="REST"><span class="none"></span>REST</a></li>
    <li><a href="../../../development/plugin-framework.html" title="Plugin Framework"><span class="none"></span>Plugin Framework</a></li>
      <li class="nav-header">Additional Information</li>
    <li><a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Project Blog"><span class="none"></span>The Pineapple Project Blog</a></li>
    <li><a href="http://exceptiontrail.blogspot.com" class="externalLink" title="Pineapple Exception Trail Blog"><span class="none"></span>Pineapple Exception Trail Blog</a></li>
      <li class="nav-header">Project Tools</li>
    <li><a href="https://bintray.com/pineapple/maven/com.alpha.pineapple" class="externalLink" title="Downloads"><span class="none"></span>Downloads</a></li>
    <li><a href="https://github.com/athrane/pineapple" class="externalLink" title="Source Code"><span class="none"></span>Source Code</a></li>
    <li><a href="https://github.com/athrane/pineapple/issues" class="externalLink" title="Issue Tracker"><span class="none"></span>Issue Tracker</a></li>
      <li class="nav-header">Project Documentation</li>
    <li><a href="../project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
</ul>
          <hr />
          <div id="poweredBy">
    <script type="text/javascript">asyncJs( 'https://apis.google.com/js/plusone.js' )</script>
    <div class="g-plusone" data-href="https://pineapple.java.net" data-size="tall" ></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="How-to:_Clone_remote_repository"></a>How-to: Clone remote repository</h2>
<div class="section">
<h3><a name="Overview"></a>Overview</h3>
<p>This example illustrates how the Git plugin can be used to clone a remote repository into the modules directory. The cloned repository contains a Pineapple module. This feature enables execution based on modules hosted in a Git repository as opposed to modules stored locally in the module directory.</p>
<div class="section">
<h4><a name="Part_of_the_default_configuration"></a>Part of the default configuration</h4>
<p>This example named <tt>git-000-clone-repo</tt>, including all configuration files, is included in the <a href="../../../usage/default-configuration.html">default configuration</a> which is created by Pineapple, so there is no need to create it by hand. </p>
<div class="section">
<h5><a name="The_used_resource_.28and_credentials.29"></a>The used resource (and credentials)</h5>
<p>In order to abstract away connection and authentication details away for the model, the specifics for accessing a Git repository is defined in a resource.</p>
<p>The resource to define a Git repository contains these properties:</p>
<ul>
<li>URI - which defines the URI to the Git repository. Example: <tt>https://github.com/athrane/pineapple-git-plugin-test-repository.git</tt>.
<p>If the repository requires authentication then a credential must be defined and the resource must reference it. The credential must define a user name an password. </p></li></ul></div></div></div>
<div class="section">
<h3><a name="Define_the_module"></a>Define the module </h3>
<p>Pineapple's unit of work is modules. A module is a self contained unit which can contain models, scripts and binaries. Models serves to specify test cases, deployment of applications, configuration of devices or execution of scripts. </p>
<p>The default directory for modules is <tt>${user.home}/.pineapple/modules</tt> so we will create a module named <tt>git-000-repo</tt> there. The module for this example will end up with the structure:</p>
<div class="source"><pre class="prettyprint linenums">git-000-clone-repo
 |
 +--- models     
       +--- local.xml 
</pre></div></div>
<div class="section">
<h3><a name="Define_the_module_model"></a>Define the module model</h3>
<p>The model file for definition of the image:</p>
<div class="source"><pre class="prettyprint linenums">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:gp=&quot;http://pineapple.dev.java.net/ns/plugin/git_1_0&quot; &gt;
    &lt;mmd:model target-resource=&quot;git-pineapple-example-repo&quot;&gt;
        &lt;mmd:content&gt;
            &lt;gp:git&gt;
                &lt;gp:repository destination=&quot;modules:pineapple-git-plugin-test-repository&quot; branch=&quot;master&quot; /&gt;
            &lt;/gp:git&gt;
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;
&lt;/mmd:models&gt;
</pre></div>
<div class="section">
<h4><a name="The_configuration_details"></a>The configuration details</h4>
<p>Two schema are used in the model file. The <tt>http://pineapple.dev.java.net/ns/module_model_1_0</tt> is used to define the namespace <tt>mmd</tt> which defines the general infrastructure for models. The <tt>http://pineapple.dev.java.net/ns/plugin/git_1_0</tt> schema is used to define the namespace <tt>gp</tt> which is used to define the model for the Git plugin. Since multiple schemas are used to define the model file, the elements are qualified.</p>
<p>The <tt>target-resource</tt> attribute defines a reference to the resource which is targeted when the model executed. In this case, the value <tt>git-pineapple-example-repo</tt> is a reference to a resource which defines the (connection and authentication) details of the Git repository .</p>
<p>The <tt>gp:git</tt> element defines the root of model for the Docker plugin. </p>
<p>The <tt>gp:repository</tt> element defines a repository entity.</p>
<p>The optional <tt>repository.destination</tt> attribute defines a path expression for the target directory where the repository is stored when it is cloned. The value should probably be an absolution path. The value can be prefixed with the <tt>modules:</tt> identifier. If the identifier is present then Pineapple will interpret the path as an relative path where the root is the Pineapple modules directory. If the identifier is present then the path is resolved with the root in Pineapple modules directory. In this case the directory is created as a sub directory relative to Pineapple modules directory and the repository is cloned into this directory. Afterwards the cloned repository is positioned and can be used as a module if the repository contains a module.</p>
<p>The optional <tt>repository.branch</tt> attribute defines which branch of the repository should be cloned. The 'master' branch is cloned in this example. </p></div></div>
<div class="section">
<h3><a name="Invoke_Pineapple_to_execute_model"></a>Invoke Pineapple to execute model </h3>
<p>Start your Pineapple client of choice:</p>
<ul>
<li>Select the module named <b>git-000-clone-repo</b></li>
<li>Select the <b>local</b> model.</li>
<li>Invoke the <b>deploy-configuration</b> to clone the repository.</li></ul></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
Copyright (C) 2007-2019 Allan Thrane Andersen. All Rights Reserved.
        </div>
      </div>
    </footer>
  </body>
</html>

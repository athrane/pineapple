<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jun 21, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>How-to: Execute Custom WLST commands from SOA Suite</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20120621" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<script type="text/javascript">var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-28287414-1']);
			  _gaq.push(['_trackPageview']);
			
			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();</script>
                      
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Pineapple WebLogic scripting tool (WLST) plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 21 Jun 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                          |                           <a href="../../../index.html" title="Pineapple home">Pineapple home</a>
        &gt;
                          <a href="../../" title="Pineapple plugin projects">Pineapple plugin projects</a>
        &gt;
                          <a href="../" title="Pineapple WebLogic scripting tool (WLST) plugin">Pineapple WebLogic scripting tool (WLST) plugin</a>
        &gt;
    How-to: Execute Custom WLST commands from SOA Suite
              </div>
            <div class="xright">        
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Project overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/installation.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/index.html" title="For users">For users</a>
            </li>
                  <li class="none">
                          <a href="../../../development/index.html" title="For developers">For developers</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/terms.html" title="Terms and Conditions">Terms and Conditions</a>
            </li>
          </ul>
                       <h5>Clients</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone web client">Standalone web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable web client">Deployable web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-gui-release/index.html" title="Swing client">Swing client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven plugin">Maven plugin</a>
            </li>
          </ul>
                       <h5>Plugins</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure test">Infrastructure test</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-wbem-plugin/index.html" title="WBEM">WBEM</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-jrockit-installation-plugin/index.html" title="JRockit installation">JRockit installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic installation">WebLogic installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic deployment">WebLogic deployment</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic scripting tool (WLST)">WebLogic scripting tool (WLST)</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">WebLogic JMX</a>
            </li>
          </ul>
                       <h5>Additional information</h5>
                  <ul>
                  <li class="none">
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Blog">The Pineapple Blog</a>
            </li>
          </ul>
                       <h5>Project tools</h5>
                  <ul>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/downloads" class="externalLink" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/sources/svn/show" class="externalLink" title="Source Code">Source Code</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/jira/browse/PINEAPPLE" class="externalLink" title="Issue tracker">Issue tracker</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/lists" class="externalLink" title="Mailing lists">Mailing lists</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section"><h2>How-to: Execute Custom WLST commands from SOA Suite<a name="How-to:_Execute_Custom_WLST_commands_from_SOA_Suite"></a></h2><div class="section"><h3>Overview<a name="Overview"></a></h3><p>This example describes how to define and execute a WLST script which uses <b>WLST custom commands</b> supplied by different Fusion Middleware products. The example illustrate how to invoke a custom from the SOA Suite. </p><p>These steps are needed to configure the plugin to work:</p><ul><li>Define <b>resource</b> which defines access to the plugin.</li><li>Define the module model <tt>local-linux.xml</tt> which defines the execution of the script on a Linux based local host. </li></ul><p>..And finally Pineapple should be invoked to run the script using the module.</p><p>For information about how to define resource, credentials and modules, refer to the <a href="../usage/index.html"> plugin usage page.</a> </p></div><div class="section"><h3>Define resource<a name="Define_resource"></a></h3><p>To define the resource, first open the resources file at <tt>${user.home}/.pineapple/conf/resources.xml</tt> and add an environment that plugin should be executed in. In this example we intend to use the plugin in an environment named <tt>local-linux</tt>. </p><p>The initial environment definition will look like:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local-linux&quot; /&gt;                                                            
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>Then the resource is defined which enables usage of the plugin in the <tt>local-linux</tt> environment:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; 
  xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  
  &lt;environments&gt;
    &lt;environment id=&quot;local-linux&quot; &gt;
      &lt;resources&gt;
        &lt;resource id=&quot;weblogic-wlst-r103&quot; plugin-id=&quot;com.alpha.pineapple.plugin.weblogic.scriptingtool&quot; &gt;
          &lt;property key=&quot;weblogic-home&quot; value=&quot;/home/weblogic/Oracle/Middleware/Oracle_SOA1/common/bin&quot; /&gt;
        &lt;/resource&gt;
      &lt;/resources&gt;
    &lt;/environment&gt;                                                              
  &lt;/environments&gt;
&lt;/configuration&gt;        
</pre></div><div class="section"><h4>What the resource attributes defines<a name="What_the_resource_attributes_defines"></a></h4><p>The <tt>id</tt> defines a key which is used to reference the resource from any module we may define in the future. Later on when the script execution is defined in a module. The <tt>weblogic-r1035-scriptingtool</tt> id is used to tell Pineapple that this resource (and thus the WLST plugin plugin) should be used to parse and execute the module model which defines the execution of the WLST script.</p><p>The <tt>plugin-id</tt> is the technical part for the definition which binds the resource to some plugin code. Each plugin is identified with a Java package and the Java package for the WLST plugin is <tt>com.alpha.pineapple.plugin.weblogic.scriptingtool</tt>. </p><p>Finally a property named <tt>weblogic-home</tt> is defined on the resource which defines the WebLogic home directory of a WebLogic installation. The WebLogic home directory is used to setup and conduct the execution of WLST.</p></div></div><div class="section"><h3>Define the module <a name="Define_the_module"></a></h3><p>Pineapple's unit of work is modules. A module is a self contained unit which can contain models, scripts and binaries. Models serves to specify test cases, deployment of applications, configuration of devices or execution of scripts. </p><p>The default directory for modules is $<a name="user.home">user.home</a>/.pineapple/modules so we will create a module named <tt>weblogic-wlst-example-0.2-hello-world</tt> there. The module for this example will end up with the structure:</p><div class="source"><pre>weblogic-wlst-example-hello-world
 |
 +--- module.xml (optional)
 |    
 +--- bin
 |     +--- script.py
 |
 +--- models     
       +--- local-environment.xml 
</pre></div><div class="section"><h4>Define the module descriptor <tt>Module.xml</tt> (optional)<a name="Define_the_module_descriptor_Module.xml_optional"></a></h4><p><i>Please notice: This step is optional and can be skipped.</i></p><p>The module descriptor is for definition of templates and reusable variable. None of these features are used in this example, so the file ends up empty with the definition of an <tt>id</tt> and a <tt>version</tt> attribute (which are used to provide human friendly output at run time):</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;http://pineapple.dev.java.net/ns/module_1_0&quot; 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;       
    id=&quot;weblogic-wlst-example&quot; version=&quot;1.0.0&quot;&gt;
&lt;/module&gt;
</pre></div></div></div><div class="section"><h3>Define the module model <tt>local-environment.xml</tt> <a name="Define_the_module_model_local-environment.xml"></a></h3><p>The purpose of the model is to configure execution of the script.</p><p>The basic module module file looks like:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:wsp=&quot;http://pineapple.dev.java.net/ns/plugin/weblogic_scriptingtool_1_0&quot;  /&gt;
  
  &lt;mmd:model target-resource=&quot;weblogic-r1035-scriptingtool&quot;&gt;
    &lt;mmd:content&gt;
    &lt;/mmd:content&gt;
  &lt;/mmd:model&gt;  
&lt;/mmd:models&gt;    
</pre></div><p>..here is the assumption that the defined resource is named <tt>weblogic-r1035-scriptingtool</tt>. </p><p>Then the skeleton of script execution model is added:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:wsp=&quot;http://pineapple.dev.java.net/ns/plugin/weblogic_scriptingtool_1_0&quot;  /&gt;
  
  &lt;mmd:model target-resource=&quot;weblogic-r1035-scriptingtool&quot;&gt;
    &lt;mmd:content&gt;
      &lt;wsp:wlst&gt;              
      &lt;/wsp:wlst&gt;
    &lt;/mmd:content&gt;
  &lt;/mmd:model&gt;  
&lt;/mmd:models&gt;    
</pre></div><p>The final step is to define the <tt>wlst-script</tt> execution: </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;mmd:models xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;                 
  xmlns:wsp=&quot;http://pineapple.dev.java.net/ns/plugin/weblogic_scriptingtool_1_0&quot;  /&gt;
  
  &lt;mmd:model target-resource=&quot;weblogic-r1035-scriptingtool&quot;&gt;
    &lt;mmd:content&gt;
      &lt;wsp:wlst&gt;              
        &lt;wsp:wlst-script file=&quot;modulepath:bin\script.py&quot; /&gt;
      &lt;/wsp:wlst&gt;
    &lt;/mmd:content&gt;
  &lt;/mmd:model&gt;  
&lt;/mmd:models&gt;    
</pre></div><p>with the mandatory attributes:</p><ul><li><tt>file</tt> which defines where the WLST scrip is located. The <i>modulepath:</i> expression is resolved to the root directory of the module. </li></ul></div><div class="section"><h3>Add the WLST script to the module<a name="Add_the_WLST_script_to_the_module"></a></h3><p>The script is placed in the directory <tt>${module-dir}/bin/script.py</tt> where <tt>${module-dir}</tt> is the module root directory which identifies the module with a unique name and version.</p><p>The content of the script:</p><div class="source"><pre>import java.util.Date as Date

def main():   
    print (&quot;Starting hello world: &quot; + Date().toString() + &quot;\n&quot;) 
    print (&quot;Completed hello world: &quot; + Date().toString() + &quot;\n&quot;)

main()          
</pre></div></div><div class="section"><h3>A look at the module and the Pineapple configuration <a name="A_look_at_the_module_and_the_Pineapple_configuration"></a></h3><p>The module looks like:</p><div class="source"><pre>weblogic-wlst-example-hello-world
 |
 +--- module.xml (optional)
 |    
 +--- bin
 |     +--- script.py
 |
 +--- models     
       +--- local-environment.xml 
</pre></div><div class="section"><h4><tt>Module.xml</tt> (optional)<a name="Module.xml_optional"></a></h4><p>The content of the <tt>module.xml</tt>:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;module xmlns=&quot;http://pineapple.dev.java.net/ns/module_1_0&quot; 
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;       
    id=&quot;weblogic-wlst-example&quot; version=&quot;1.0.0&quot;&gt;
&lt;/module&gt;
</pre></div></div><div class="section"><h4><tt>local-environment.xml</tt><a name="local-environment.xml"></a></h4><p>Module model for the environment <i>local-environment</i> which is targeted at the resource <tt>weblogic-r1035-scriptingtool</tt> and invokes the script <tt>script.py</tt>:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;
&lt;mmd:models xmlns:mmd=&quot;http://pineapple.dev.java.net/ns/module_model_1_0&quot;       
        xmlns:wsp=&quot;http://pineapple.dev.java.net/ns/plugin/weblogic_scriptingtool_1_0&quot; &gt;
    &lt;mmd:model target-resource=&quot;weblogic-scriptingtool&quot;&gt;
        &lt;mmd:content&gt;
            &lt;wsp:wlst&gt;              
              &lt;wsp:wlst-script file=&quot;modulepath:bin\script.py&quot; /&gt;
            &lt;/wsp:wlst&gt;
        &lt;/mmd:content&gt;
    &lt;/mmd:model&gt;                
&lt;/mmd:models&gt;   
</pre></div></div><div class="section"><h4><tt>script.py</tt><a name="script.py"></a></h4><p>Listed above.</p></div><div class="section"><h4>The <tt>weblogic-r1035-scriptingtool</tt> resource definition<a name="The_weblogic-r1035-scriptingtool_resource_definition"></a></h4><p>The resource <tt>weblogic-r1035-scriptingtool</tt> definition in the <tt>resources.xml</tt>:</p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration xmlns=&quot;http://pineapple.dev.java.net/ns/environment_1_0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;
  &lt;environments&gt;
    &lt;environment id=&quot;local-environment&quot;&gt;
          &lt;resources&gt;
        &lt;resource id=&quot;weblogic-r1035-scriptingtool&quot; plugin-id=&quot;com.alpha.pineapple.plugin.weblogic.scriptingtool&quot; &gt;
          &lt;property key=&quot;weblogic-home&quot; value=&quot;C:\alphabea\weblogic1035&quot; /&gt;
        &lt;/resource&gt;
        
        &lt;!-- additional resources goes here... --&gt;
                                                                                                        
      &lt;/resources&gt;                                              
    &lt;/environment&gt;                                                              

      &lt;!-- additional environments goes here... --&gt;
  &lt;/environments&gt;
&lt;/configuration&gt; 
</pre></div></div><div class="section"><h4>The <tt>weblogic-r1035-scriptingtool</tt> credential definition<a name="The_weblogic-r1035-scriptingtool_credential_definition"></a></h4><p>Since the resource doesn't defines any reference to a credential, then none is defined in the <tt>credentials.xml</tt> file. </p></div></div><div class="section"><h3>Invoke Pineapple to execute the script <a name="Invoke_Pineapple_to_execute_the_script"></a></h3><p>Start your Pineapple client of choice:</p><ul><li>Select the module named <tt>weblogic-wlst-example-hello-world</tt>.</li><li>Select the environment named <tt>local-environment</tt>. </li><li>Invoke the <b>deploy-configuration</b> operation toexecute the script.</li></ul></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2012.
          All Rights Reserved.      
                
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- Generated by Apache Maven Doxia at Jun 21, 2012 -->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Usage</title>
    <style type="text/css" media="all">
      @import url("../css/maven-base.css");
      @import url("../css/maven-theme.css");
      @import url("../css/site.css");
    </style>
    <link rel="stylesheet" href="../css/print.css" type="text/css" media="print" />
      <meta name="author" content="Allan Thrane Andersen" />
    <meta name="Date-Revision-yyyymmdd" content="20120621" />
    <meta http-equiv="Content-Language" content="en" />
                                                    
<script type="text/javascript">var _gaq = _gaq || [];
			  _gaq.push(['_setAccount', 'UA-28287414-1']);
			  _gaq.push(['_trackPageview']);
			
			  (function() {
			    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			  })();</script>
                      
        </head>
  <body class="composite">
    <div id="banner">
                    <div id="bannerLeft">
                Pineapple WebLogic deployment plugin
                </div>
                    <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
            
                
                <div class="xleft">
        <span id="publishDate">Last Published: 21 Jun 2012</span>
                  &nbsp;| <span id="projectVersion">Version: 1.0-SNAPSHOT</span>
                          |                           <a href="../../../index.html" title="Pineapple home">Pineapple home</a>
        &gt;
                          <a href="../../" title="Pineapple modules">Pineapple modules</a>
        &gt;
                          <a href="../" title="Pineapple WebLogic deployment plugin">Pineapple WebLogic deployment plugin</a>
        &gt;
    Usage
              </div>
            <div class="xright">        
                
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
             
                
                                <h5>Project overview</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../index.html" title="Home">Home</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/installation.html" title="Installation">Installation</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/index.html" title="For users">For users</a>
            </li>
                  <li class="none">
                          <a href="../../../development/index.html" title="For developers">For developers</a>
            </li>
                  <li class="none">
                          <a href="../../../usage/terms.html" title="Terms and Conditions">Terms and Conditions</a>
            </li>
          </ul>
                       <h5>Clients</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-standalone-web-client/index.html" title="Standalone web client">Standalone web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-web-application/pineapple-web-application-war/index.html" title="Deployable web client">Deployable web client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-gui-release/index.html" title="Swing client">Swing client</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-applications/pineapple-maven-plugin/index.html" title="Maven plugin">Maven plugin</a>
            </li>
          </ul>
                       <h5>Plugins</h5>
                  <ul>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-infrastructure-test-plugin/index.html" title="Infrastructure test">Infrastructure test</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-wbem-plugin/index.html" title="WBEM">WBEM</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-jrockit-installation-plugin/index.html" title="JRockit installation">JRockit installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-installation-plugin/index.html" title="WebLogic installation">WebLogic installation</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-deployment-plugin/index.html" title="WebLogic deployment">WebLogic deployment</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-plugins/pineapple-weblogic-scripting-tool-plugin/index.html" title="WebLogic scripting tool (WLST)">WebLogic scripting tool (WLST)</a>
            </li>
                  <li class="none">
                          <a href="../../../pineapple-modules/pineapple-weblogic-jmx-plugin/index.html" title="WebLogic JMX">WebLogic JMX</a>
            </li>
          </ul>
                       <h5>Additional information</h5>
                  <ul>
                  <li class="none">
                          <a href="http://pineapplesoftware.blogspot.com" class="externalLink" title="The Pineapple Blog">The Pineapple Blog</a>
            </li>
          </ul>
                       <h5>Project tools</h5>
                  <ul>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/downloads" class="externalLink" title="Downloads">Downloads</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/sources/svn/show" class="externalLink" title="Source Code">Source Code</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/jira/browse/PINEAPPLE" class="externalLink" title="Issue tracker">Issue tracker</a>
            </li>
                  <li class="none">
                          <a href="http://java.net/projects/pineapple/lists" class="externalLink" title="Mailing lists">Mailing lists</a>
            </li>
          </ul>
                       <h5>Project Documentation</h5>
                  <ul>
                                                                                                                          <li class="collapsed">
                          <a href="../project-info.html" title="Project Information">Project Information</a>
                  </li>
          </ul>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="poweredBy" alt="Built by Maven" src="../images/logos/maven-feather.png" />
      </a>
                   
                
            </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">
        <!-- NOTE: For help with the syntax of this file, see: --><!-- http://maven.apache.org/guides/mini/guide-apt-format.html --><div class="section"><h2>Introduction<a name="Introduction"></a></h2><div class="section"><h3>Invoking the plugin<a name="Invoking_the_plugin"></a></h3><p>The plugin is invoked by the core component when the core component is used by one of the Pineapple clients. To trigger invocation by the core component the plugin needs to be configured. </p></div><div class="section"><h3>Configuration<a name="Configuration"></a></h3><p>Three steps are needed to configure the plugin to work:</p><ul><li>Define WebLogic server as a <b>resource</b> for Pineapple to access for deployment operations. </li><li>Define user name and password for the WebLogic server in a <b>credential</b> which is used by Pineapple at run time to access the server resource. </li><li>Define the module model used by the plugin as input for execution of deployment operations. The model defines how and where an application should be deployed (and undeployed).</li></ul><p>For more info about configuration of plugins:</p><ul><li>For info about <b>resources</b> and <b>credentials</b> read the <b><a href="../../../usage/configuration-environment.html">Environment configuration</a></b> document.</li><li>For info about <b>modules</b> read the <b><a href="../../../usage/configuration-modules.html">Modules configuration</a></b> document.</li></ul></div><div class="section"><h3>Define resource<a name="Define_resource"></a></h3><p>A <b>resource</b> defines how a managed resource is accessed in a computing environment. The resource in this case is a WebLogic server used for deployment and undeployment.</p><p>The resources are defined in the file <tt>${user.home}/.pineapple/conf/resources.xml</tt>.</p><p>The resources are grouped by environment. The first step is define an environment in the <tt>resources.xml</tt> file if the environment isn't already defined. </p><p>To define a new environment just add a new <tt>environment</tt> definition with to the <tt>environments</tt> section in the <tt>resources.xml</tt> file. This example shows definition of an environment named <tt>localdomain:</tt> </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;resources/&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>Add a new <tt>resource</tt> to the selected environment in the <tt>resources.xml</tt> file: </p><div class="source"><pre>&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;resources&gt;
        ...
        ...
        &lt;resource&gt;
          &lt;identifier&gt;weblogic-deployment&lt;/identifier&gt;
          &lt;credential-identifier&gt;weblogic-deployment-credential&lt;/credential-identifier&gt;
          &lt;factory&gt;
            com.alpha.pineapple.plugin.weblogic.deployment.WeblogicDeploymentFactoryImpl
          &lt;/factory&gt;
          &lt;properties&gt;
            &lt;adminserver-protocol&gt;t3&lt;/adminserver-protocol&gt;                                     
            &lt;adminserver-listenaddress&gt;127.0.0.1&lt;/adminserver-listenaddress&gt;
            &lt;adminserver-listenport&gt;7001&lt;/adminserver-listenport&gt;                                       
          &lt;/properties&gt;
        &lt;/resource&gt;                                                                     
        ...
      &lt;/resources&gt;
    &lt;/environment&gt;              
  &lt;/environments&gt;
&lt;/configuration&gt;                                        
</pre></div><p>The semantics of the resource elements is explained in the next sub sections:</p><div class="section"><h4>identifier<a name="identifier"></a></h4><p>Identifies the resource in the current environment. </p><p>The identifier is used during configuration of management data, e.g. the deployment details for a application. The management data contains a reference to the resource that Pineapple should use at run time for deployment operations. </p></div><div class="section"><h4>credential-identifier<a name="credential-identifier"></a></h4><p>Identifier for the credential which is used to lookup user name and password for this resource. </p></div><div class="section"><h4>factory<a name="factory"></a></h4><p>Factory class for the plugin which should be used to execute management operations for the resource. </p><p>The factory class for the <b>WebLogic deployment plugin</b> is: <tt>com.alpha.pineapple.plugin.weblogic.deployment.WeblogicDeploymentFactoryImpl</tt>.</p></div><div class="section"><h4>properties<a name="properties"></a></h4><p>Required properties used by the deployment plugin:</p><ul><li><b>adminserver-protocol</b> - defines the protocol to access the WebLogic administration server, i.e. t3, http. </li><li><b>adminserver-listenaddress</b> - defines the server listen address, i.e. localhost, 127.0.0.1, prod7admin. </li><li><b>adminserver-listenport</b> - defines the server listen port, i.e. 7001, 7002.</li></ul><p>Optional properties:</p><ul><li><b>timestamp-enabled</b> - defines whether a time stamp should be appended to the module name when a module is deployed. Legal values for the property is <b>true</b> or <b>false</b>. Default value is <b>false</b>. If the property isn't defined then default value is used. </li></ul><p>Information about valid protocols can be found in the <a class="externalLink" href="http://e-docs.bea.com/wls/docs92/deployment/wldeployer.html#wp1003708"><b>weblogic.Deployer documentation.</b></a></p></div><div class="section"><h4>Summary of the example <a name="Summary_of_the_example"></a></h4><p>The result of defining the resource in the example is:</p><ul><li>A resource named <tt>weblogic-deployment</tt> is defined in the <tt>localdomain</tt> environment.</li><li>The <tt>factory</tt> element of the resource defines that the WebLogic deployment plugin should be used at run time by Pineapple to access the resource.</li><li>The resource defines how to access a WebLogic server instance by providing connection properties (protocol, port and host name). The connection properties are used by the WebLogic deployment plugin to connect to the server.</li><li>The <tt>credential identifier</tt> element of the resource defines which credential is used to provide security information for the resource to authenticate itself with the WebLogic server. Definition of credentials is described in the next section. </li></ul></div></div><div class="section"><h3>Define credential <a name="Define_credential"></a></h3><p>A <b>credential</b> defines authentication information used to access a protected resource. The WebLogic administration server is a protected resource which is protected by a user-id/password. So a credential needs to be defined.</p><p>The credentials are defined in the file <tt>${user.home}/.pineapple/conf/credentials.xml</tt>.</p><p>Credentials are grouped by environment the same way as resources are. The first step is define an environment in the <tt>credentials.xml</tt> file if the environment isn't already defined. </p><p>To define a new environment just add a new <tt>environment</tt> definition with the identifier <tt>localdomain</tt> to the <tt>environments</tt> section in the <tt>credentials.xml</tt> file: </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
      &lt;credentials&gt;
    &lt;/environment&gt;
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>Add a new <tt>credential</tt> to the selected environment in <tt>credentials.xml</tt> file: </p><div class="source"><pre>&lt;configuration&gt;
  &lt;environments&gt;
    &lt;environment&gt;
      &lt;identifier&gt;localdomain&lt;/identifier&gt;
        ...
        ...
        &lt;credential&gt;
          &lt;identifier&gt;weblogic-deployment-credential&lt;/identifier&gt;
          &lt;user&gt;weblogic&lt;/user&gt;
          &lt;password&gt;weblogic&lt;/password&gt;
        &lt;/credential&gt;
        ...                             
      &lt;/credentials&gt;
    &lt;/environment&gt;              
  &lt;/environments&gt;
&lt;/configuration&gt;
</pre></div><p>The semantics of the resource elements is explained in the next sub sections:</p><div class="section"><h4>identifier <a name="identifier"></a></h4><p>Identifies the credential in the current environment.</p></div><div class="section"><h4>user <a name="user"></a></h4><p>User name used to authenticate a resource with. </p></div><div class="section"><h4>password <a name="password"></a></h4><p>Password used to authenticate a resource with. </p></div><div class="section"><h4>Summary of the example <a name="Summary_of_the_example"></a></h4><p>The result of defining the credential in the example is:</p><ul><li>A credential named <tt>weblogic-deployment-credential</tt> is defined in the <tt>localdomain</tt> environment.</li><li>The credential uses user name/password for authentication. </li><li>The identifier <tt>weblogic-deployment-credential</tt> is referenced from the resource definition in the <tt>resources.xml</tt> file. The sematics of the reference is that the resource will use user name/password in the referenced credential for authentication.</li></ul></div></div><div class="section"><h3>Add deployment configuration to Pineapple module<a name="Add_deployment_configuration_to_Pineapple_module"></a></h3><p>A Pineapple module defines what the different plugins should do in a set of target environments. In the context of the WebLogic deployment plugin, a module should contain the application which should be deployed and information about where the application should be deployed.</p><p>Deployment information is defined in model files: <tt>&lt;module-data-dir&gt;/properties/&lt;environment&gt;.xml</tt> where:</p><ul><li><tt>&lt;module-data-dir</tt>&gt; is the module root directory which identifies the module with a unique name and version. </li><li><tt>&lt;environment&gt;.xml</tt> is a model file for a target environment, with <tt>&lt;environment</tt>&gt; substituted with the environment name, e.g. <tt>localdomain.xml</tt> for an environment named <tt>localdomain</tt>. In the context of the deployment plugin each model contains deployment targets for the different environments that the an application is deployed to.</li></ul><div class="section"><h4>Location of the application in the module<a name="Location_of_the_application_in_the_module"></a></h4><p>The Maven project is configured to create a ZIP file or an exploded directory structure which contains the module. The application can be found in the directory <tt>&lt;module-data-dir&gt;/app</tt>. The deployment plugin will look for here for the application to deploy. </p></div><div class="section"><h4>Specifying deployment targets <a name="Specifying_deployment_targets"></a></h4><p>If the model file doesn't exist for an environment where the application should be deployed to, then create the file and name it after the target environment, e.g. <tt>localdomain.xml</tt> for an environment named <tt>localdomain</tt>. Then add a <tt>environment</tt> definition to the model file.</p><p>This example shows definition of an environment named <tt>localdomain</tt> in <tt>localdomain.xml:</tt> </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environment&gt;
    &lt;description&gt;Deployment to the localdomain environment.&lt;/description&gt;
    &lt;resources/&gt;
    &lt;/resources&gt;    
  &lt;/environment&gt;
&lt;/configuration&gt;    
</pre></div><p>Add a new <tt>resource</tt> to the file: </p><div class="source"><pre>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
  &lt;environment&gt;
    &lt;description&gt;Deployment to the localdomain environment.&lt;/description&gt;
    &lt;resources&gt;
      &lt;resource identifier=&quot;weblogic-deployment&quot; &gt;              
        &lt;targets&gt;admserver&lt;/targets&gt;
      &lt;/resource&gt;       
    &lt;/resources&gt;    
  &lt;/environment&gt;
&lt;/configuration&gt;    
</pre></div><p>The semantics of the resource elements is explained in the next sub sections:</p></div><div class="section"><h4>The <tt>resource@identifier</tt> attribute<a name="The_resourceidentifier_attribute"></a></h4><p>Name of the resource in the <tt>resources.xml</tt> which should be used to execute the deployment operation. </p><p>This value must match a resource identifier already defined in the <tt>resources.xml</tt> file.</p><p>At run time (when Pineapple executes an operation for a selected environment) the management data in the <tt>&lt;environment&gt;.xml</tt> file is inspected. With the found <tt>resource@identifier</tt> attributes in the managment data Pineapple lookups the corresponding resource definition in the <tt>resources.xml</tt> file. If Pineapple finds a resource definition, then the plugin specified by the factory class is used to execute the management operation. The data in the resource definition in the <tt>&lt;environment.xml</tt>&gt; and <tt>resources.xml</tt> files are used as input for the plugin. </p><p>In the example, the resource identifier was defined with the value <tt>weblogic-deployment</tt> so that value was reused to trigger execution using the resource.</p></div><div class="section"><h4>The <tt>name</tt> element<a name="The_name_element"></a></h4><p>This parameter is optional and it is not recommended to set it manually.</p><p>If the parameter isn't set manually then the plugin uses the name of the management data directory, which contains a name and version.</p><p>If the parameter is set manually then it overrides the values that the plugin would have used. </p></div><div class="section"><h4>The <tt>source</tt> element<a name="The_source_element"></a></h4><p>This parameter is optional and it is not recommended to set it manually.</p><p>If the parameter isn't set manually then the plugin will search for a deployable artifact in the <tt>/app</tt> directory in the management data directory using the algorithm: </p><ol style="list-style-type: decimal"><li>Search for file with <tt>.ear</tt> suffix. First .ear file found is deployed.</li><li>Search for file with <tt>.war</tt> suffix. First .war file found is deployed. </li><li>Search for file with <tt>.jar</tt> suffix. First .jar file found is deployed.</li><li>Search for file with <tt>.rar</tt> suffix. First .rar file found is deployed. </li><li>Search for directory. First directory found is deployed as exploded application archive.</li></ol><p>If the parameter is set manually then the plugin wil attempt to deploy the file at the external location. </p></div><div class="section"><h4>The <tt>plan</tt> element<a name="The_plan_element"></a></h4><p>This parameter is optional and it is not recommended to set it manually.</p><p>If the parameter isn't set manually then the plugin will search the <tt>/plan</tt> directory in the management using the algorithm: </p><ol style="list-style-type: decimal"><li>Search for <tt>plan.xml</tt>. If the file is found then the file is used as deployment plan. </li><li>Search for <tt>&lt;environment&gt;.xml</tt> (where &lt;environment&gt; is the name of the current environment). If the file is found then file is used as deployment plan</li><li>No plan is found. Deploy without a deployment plan.</li></ol><p>Step 1) in the algorithm supports the scenario where one deployment plan is used in all deployment environments.</p><p>Step 2) in the algorithm supports the scenario where a different deployment plan is used in each deployment environment.</p><p>TODO: describe how to add deployment plans to the management directory...</p></div><div class="section"><h4>The <tt>targets</tt> element<a name="The_targets_element"></a></h4><p>Defines deployment target for the application. The targeting syntax supported by the weblogic.Deployer is supported, e.g. sub module targeting using @. Information about valid targeting syntax can be found in the <a class="externalLink" href="http://e-docs.bea.com/wls/docs92/deployment/wldeployer.html#wp1003708"><b>weblogic.Deployer documentation.</b></a> </p><p>Multiple targets can be specified in two different ways:</p><ul><li>multiple targets a single element:<div class="source"><pre>      &lt;resource identifier= .... &gt;              
        &lt;targets&gt;server1,server2,server3&lt;/targets&gt;
      &lt;/resource&gt;               
</pre></div></li><li>Multiple elements with single target each:<div class="source"><pre>      &lt;resource identifier= .... &gt;              
        &lt;targets&gt;server1&lt;/targets&gt;
        &lt;targets&gt;server2&lt;/targets&gt;
        &lt;targets&gt;server3&lt;/targets&gt;                
      &lt;/resource&gt;               
</pre></div></li></ul></div></div><div class="section"><h3>Which arguments the weblogic.Deployer is invoked with<a name="Which_arguments_the_weblogic.Deployer_is_invoked_with"></a></h3><p>The plugin invokes weblogic.Deployer with the arguments:</p><ul><li><tt>&lt;operation</tt>&gt; which is either <tt>deploy</tt> or <tt>undeploy</tt>. </li><li><tt>-name &lt;name</tt>&gt; where <tt>&lt;name</tt>&gt; defines the name of the application in WebLogic. </li><li><tt>-source &lt;source</tt>&gt; where <tt>&lt;source</tt>&gt; defines the file or directory in the Pineaple module which is deployed.</li><li><tt>-plan &lt;deployment-plan</tt>&gt; where <tt>&lt;deployment-plan</tt>&gt; is a deployment plan if one is found in the Pineapple module. </li><li><tt>user-specified-arguments</tt> which is any arguments defined in the <tt>resource</tt> element. </li><li><tt>-upload</tt> which defines that the application should uploaded to the administration server before it is deployed.</li><li><tt>-stage</tt> which defines that a staged deploymend should take place.</li><li><tt>-usenonexclusivelock</tt> which defines that deployer should acquire a lock which can be taken away at any time. </li></ul></div></div>
      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
              Copyright &#169;                   2012.
          All Rights Reserved.      
                
                  </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
